{"version":3,"sources":["webpack://Ganache/webpack/universalModuleDefinition","webpack://Ganache/webpack/bootstrap","webpack://Ganache/./lib/utils/to.js","webpack://Ganache/external \"ethereumjs-util\"","webpack://Ganache/external \"util\"","webpack://Ganache/external \"async\"","webpack://Ganache/external \"ethereumjs-common\"","webpack://Ganache/external \"web3-provider-engine/subproviders/subprovider.js\"","webpack://Ganache/./lib/utils/runtimeerror.js","webpack://Ganache/external \"level-sublevel\"","webpack://Ganache/external \"lodash\"","webpack://Ganache/external \"source-map-support/register\"","webpack://Ganache/external \"ethereumjs-account\"","webpack://Ganache/./lib/utils/transaction.js","webpack://Ganache/external \"ethereumjs-tx\"","webpack://Ganache/external \"ethereumjs-block\"","webpack://Ganache/./lib/utils/log.js","webpack://Ganache/./lib/utils/receipt.js","webpack://Ganache/./lib/utils/errorhelper.js","webpack://Ganache/external \"events\"","webpack://Ganache/./node_modules/web3/src/index.js","webpack://Ganache/external \"web3-core\"","webpack://Ganache/external \"underscore\"","webpack://Ganache/external \"web3-utils\"","webpack://Ganache/./lib/provider.js","webpack://Ganache/./node_modules/ethereumjs-wallet/index.js","webpack://Ganache/external \"crypto\"","webpack://Ganache/./lib/blockchain_double.js","webpack://Ganache/external \"merkle-patricia-tree\"","webpack://Ganache/external \"fs\"","webpack://Ganache/external \"tmp\"","webpack://Ganache/./lib/database/txserializer.js","webpack://Ganache/external \"web3-core-helpers\"","webpack://Ganache/external \"web3-core-method\"","webpack://Ganache/external \"web3-net\"","webpack://Ganache/external \"web3-eth-personal\"","webpack://Ganache/./lib/utils/txrejectederror.js","webpack://Ganache/./lib/utils/block_helper.js","webpack://Ganache/./public-exports.js","webpack://Ganache/external \"web3-provider-engine\"","webpack://Ganache/external \"web3-provider-engine/subproviders/subscriptions\"","webpack://Ganache/./lib/subproviders/requestfunnel.js","webpack://Ganache/./lib/subproviders/delayedblockfilter.js","webpack://Ganache/./lib/subproviders/gethdefaults.js","webpack://Ganache/./lib/subproviders/geth_api_double.js","webpack://Ganache/./lib/statemanager.js","webpack://Ganache/external \"ethereumjs-abi\"","webpack://Ganache/external \"assert\"","webpack://Ganache/external \"seedrandom\"","webpack://Ganache/external \"bip39\"","webpack://Ganache/external \"safe-buffer\"","webpack://Ganache/external \"randombytes\"","webpack://Ganache/external \"scryptsy\"","webpack://Ganache/external \"uuid/v4\"","webpack://Ganache/external \"bs58check\"","webpack://Ganache/./node_modules/ethereumjs-wallet/hdkey.js","webpack://Ganache/external \"ethereum-cryptography/hdkey\"","webpack://Ganache/external \"ethereumjs-vm\"","webpack://Ganache/external \"heap\"","webpack://Ganache/./lib/database.js","webpack://Ganache/./lib/database/leveluparrayadapter.js","webpack://Ganache/./lib/database/levelupobjectadapter.js","webpack://Ganache/external \"levelup\"","webpack://Ganache/external \"encoding-down\"","webpack://Ganache/./lib/database/filedown.js","webpack://Ganache/external \"abstract-leveldown\"","webpack://Ganache/external \"path\"","webpack://Ganache/external \"cachedown\"","webpack://Ganache/./lib/database/blockserializer.js","webpack://Ganache/./lib/database/bufferserializer.js","webpack://Ganache/./lib/database/blocklogsserializer.js","webpack://Ganache/./lib/database/receiptserializer.js","webpack://Ganache/./lib/utils/gas/estimateGas.js","webpack://Ganache/./lib/utils/gas/guestimation.js","webpack://Ganache/./lib/utils/gas/binSearch.js","webpack://Ganache/./lib/forking/forked_blockchain.js","webpack://Ganache/./lib/forking/forked_storage_trie.js","webpack://Ganache/external \"merkle-patricia-tree/baseTrie\"","webpack://Ganache/external \"merkle-patricia-tree/checkpoint-interface\"","webpack://Ganache/./node_modules/web3-eth/src/index.js","webpack://Ganache/external \"web3-core-subscriptions\"","webpack://Ganache/external \"web3-eth-ens\"","webpack://Ganache/external \"web3-eth-contract\"","webpack://Ganache/external \"web3-eth-iban\"","webpack://Ganache/./node_modules/web3-eth-accounts/src/index.js","webpack://Ganache/external \"eth-lib/lib/account\"","webpack://Ganache/external \"eth-lib/lib/hash\"","webpack://Ganache/external \"eth-lib/lib/rlp\"","webpack://Ganache/external \"eth-lib/lib/bytes\"","webpack://Ganache/external \"crypto-browserify\"","webpack://Ganache/external \"scrypt-js\"","webpack://Ganache/external \"uuid\"","webpack://Ganache/external \"web3-eth-abi\"","webpack://Ganache/./node_modules/web3-eth/src/getNetworkType.js","webpack://Ganache/external \"web3-shh\"","webpack://Ganache/external \"web3-bzz\"","webpack://Ganache/external \"lru-cache\"","webpack://Ganache/external \"eth-sig-util\"","webpack://Ganache/external \"rlp\"","webpack://Ganache/./lib/utils/random.js","webpack://Ganache/./lib/block_tracker.js","webpack://Ganache/./lib/server.js","webpack://Ganache/./lib/webSocketServer.js","webpack://Ganache/external \"websocket\"","webpack://Ganache/./lib/httpServer.js","webpack://Ganache/external \"http\""],"names":["root","factory","exports","module","define","amd","global","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","utils","buffer","val","data","indexOf","slice","length","Buffer","from","isBuffer","hex","trim","BN","intToHex","toString","addHexPrefix","_rpcQuantityHexString","this","replace","rpcQuantityHexString","rpcQuantityBuffer","rlp","encode","rpcDataHexString","Array","fill","join","nullableRpcDataHexString","rpcDataHex","nullableRpcQuantityHexString","rpcQuantityHex","hexWithZeroPadding","digits","number","parseInt","bufVal","toBuffer","bufferToInt","rpcError","id","code","msg","JSON","stringify","jsonrpc","error","message","require","inherits","to","abi","RuntimeError","transactions","vmOutput","Error","captureStackTrace","constructor","results","hashes","combine","err","keys","push","apply","tx","result","execResult","exceptionError","reason","hash","returnData","returnValue","rawDecode","_","runState","program_counter","programCounter","return","exceptionResult","count","fromResults","EthereumJsTransaction","Transaction","EthereumJsFakeTransaction","FakeTransaction","Common","default","ethUtil","assert","sign","fakeHash","_hash","arguments","BUFFER_ZERO","fixProps","_originals","forEach","fieldName","fieldLength","index","_fields","descriptor","getOwnPropertyDescriptor","set","v","configZeroableField","isFake","configurable","getSenderAddress","_from","type","types","none","common","chainId","forCustomChain","networkId","comment","bootstrapNodes","super","undefined","ganacheTxCommon","decode","self","isArray","field","startsWith","gas","input","_chainId","raw","initData","signed","fake","json","hardfork","toAccount","buf","equals","setLengthLeft","options","nonce","gasLimit","gasPrice","Math","floor","_type","_options","expectedNonce","isSigned","block","transactionIndex","txns","blockHash","blockNumber","header","Log","toJSON","logIndex","transactionHash","address","topics","removed","Receipt","logs","gasUsed","cumulativeGasUsed","contractAddress","status","logsBloom","txHash","map","log","LevelUpOutOfRangeError","len","BlockOutOfRangeError","version","core","Eth","Net","Personal","Shh","Bzz","Web3","_this","packageInit","eth","shh","bzz","setProvider","provider","net","setRequestManager","_requestManager","addProviders","ProviderEngine","SubscriptionSubprovider","RequestFunnel","DelayedBlockFilter","GethDefaults","GethApiDouble","BlockTracker","EventEmitter","Provider","_applyDefaultOptions","gethApiDouble","engine","blockTracker","blockchain","state","subscriptionSubprovider","manager","addProvider","setMaxListeners","start","sendAsync","send","close","_queueRequest","_processRequestQueue","on","notification","emit","defaultOptions","_chainIdRpc","vmErrorsOnRPCResponse","verbose","asyncRequestProcessing","logger","merge","payload","callback","externalize","cloneDeep","intermediary","response","reportErrorInResponse","split","process","nextTick","stopMining","stop","_requestQueue","setImmediate","_requestInProgress","args","shift","cleanUpErrorObject","errorObject","stack","transactionMethods","Set","_isTransactionRequest","request","has","method","_typeof","iterator","obj","crypto","randomBytes","scryptsy","uuidv4","bs58check","runCipherBuffer","cipher","concat","update","final","Wallet","priv","pub","isValidPrivate","isValidPublic","_privKey","_pubKey","privateToPublic","privKey","generate","icapDirect","max","privateToAddress","lte","generateVanityAddress","pattern","RegExp","test","getPrivateKey","getPrivateKeyString","bufferToHex","getPublicKey","pubKey","getPublicKeyString","getAddress","publicToAddress","getAddressString","getChecksumAddressString","toChecksumAddress","toV3","password","opts","derivedKey","salt","iv","kdf","kdfparams","dklen","prf","pbkdf2Sync","createCipheriv","ciphertext","mac","keccak256","random","uuid","cipherparams","getV3Filename","timestamp","Date","toV3String","fromPublicKey","nonStrict","importPublic","fromExtendedPublicKey","fromPrivateKey","fromExtendedPrivateKey","tmp","fromV1","parse","Version","Crypto","KeyHeader","Kdf","KdfParams","Salt","N","R","P","DkLen","CipherText","MAC","seed","createDecipheriv","IV","fromV3","toLowerCase","fromEthSale","encseed","wallet","ethaddr","Account","Block","VM","Trie","async","Heap","Database","estimateGas","promisify","BlockchainDouble","console","trie","db_path","pending_transactions","blockGasLimit","defaultTransactionGasLimit","timeAdjustment","blockNumberAdjustment","frozenTime","time","debug","allowUnlimitedContractSize","assign","initialize","accounts","latestBlock","stateRoot","stateTrie","createStateTrie","trie_db","vm","createVMFromStateTrie","setTime","createGenesisBlock","stateManager","checkpoint","eachSeries","accountData","finished","putAccount","account","commit","putBlock","activatePrecompiles","network_id","forkVersion","getBlock","done","e","info","opcode","argsNum","in","arg","db","createBlock","blocks","last","getEffectiveBlockNumber","getHeight","blockHashes","blockIndex","first","receipts","requests","blockLogs","transactionReceipts","parallel","popBlock","del","pop","series","newLastBlock","setStateRoot","clearPendingTransactions","parent","emulateParent","getParent","parentHash","parentNumber","currentTime","getQueuedNonce","addressBuffer","pendingNonce","gt","iaddn","toArrayLike","queueTransaction","sortByPriceAndNonce","sortedByNonce","arr","nonceSort","a","b","sort","heap","sortedTransactions","size","best","getReadyCall","readyCall","parentBlock","newBlock","runArgs","skipBalance","skipNonce","persist","processCall","runTx","catch","vmerr","processBlock","runBlock","skipBlockValidation","totalBlockGasUsage","txTrie","rcptTrie","promises","putInTrie","put","receipt","txLogs","receiptLog","j","rcpt","createdAddress","bitvector","rawReceipt","rcptBuffer","serialize","Promise","all","transactionsTrie","receiptTrie","processNextBlock","currentTransactions","totalGasLimit","maxGasLimit","processTransactionTrace","params","targetHash","txHashCurrentlyProcessing","txCurrentlyProcessing","storageStack","currentDepth","returnVal","structLogs","stepListener","event","next","gasLeft","gasUsedPreviousStep","memory","disableMemory","match","lastItem","disableStack","item","structLog","depth","gasCost","op","pc","storage","disableStorage","processStorageTrace","getTransactionReceipt","targetBlock","forkBlockNumber","beforeTxListener","afterTxListener","removeListeners","removeListener","_cache","flush","cb","stackLength","getContractStorage","getAccount","currentStateRoot","getNonce","getBalance","balance","getStorage","position","getCode","getTransaction","notFound","pendingTxs","getBlockLogs","effective","getTime","increaseTime","seconds","unfreezeTime","date","now","freezeTime","setBlockNumber","that","maybeBlock","sigV","commonOptions","fromJSON","TXRejectedError","includeFullTransactions","mixHash","sha3Uncles","uncleHash","bloom","transactionsRoot","receiptsRoot","miner","coinbase","difficulty","totalDifficulty","extraData","toJsonRpc","uncles","Server","server","_webpacked","Subprovider","methods","eth_call","eth_getStorageAt","eth_sendTransaction","eth_sendRawTransaction","eth_newBlockFilter","eth_getFilterChanges","eth_getFilterLogs","queue","isWorking","handleRequest","end","external","processNext","watching","handleNewBlockFilter","handleGetFilterChanges","filterId","currentBlockHash","previousBlockHash","emitPayload","res","StateManager","blockHelper","pkg","maxSafeInt","Number","MAX_SAFE_INTEGER","vrs","initialized","initialization_error","post_initialization_callbacks","callbacks","waitForInitialization","addedBlockParam","requiresDefaultBlockParameter","minLength","errorMessage","getDelayedHandler","eth_getBalance","eth_getCode","eth_getTransactionCount","eth_estimateGas","eth_accounts","eth_blockNumber","eth_chainId","eth_coinbase","eth_mining","is_mining","eth_hashrate","eth_gasPrice","eth_getBlockByNumber","eth_getBlockByHash","eth_getBlockTransactionCountByNumber","eth_getBlockTransactionCountByHash","eth_getTransactionReceipt","element","eth_getTransactionByHash","eth_getTransactionByBlockHashAndIndex","hashOrNumber","eth_getTransactionByBlockNumberAndIndex","getTransactionCount","eth_sign","dataToSign","eth_signTypedData","typedDataToSign","signTypedData","txData","rawTx","queueRawTransaction","_setCallGasLimit","globalCallGasLimit","callGasLimit","queueStorage","latestFilterId","mine","eth_getLogs","filter","getLogs","eth_uninstallFilter","eth_protocolVersion","bzz_hive","bzz_info","shh_version","eth_getCompilers","eth_syncing","net_listening","net_peerCount","web3_clientVersion","web3_sha3","string","net_version","miner_start","threads","startMining","miner_stop","rpc_modules","rpc","web3","evm","personal","personal_listAccounts","personal_accounts","personal_newAccount","createAccount","account_passwords","personal_importRawKey","rawKey","secretKey","personal_lockAccount","unlocked_accounts","personal_unlockAccount","duration","storedPassword","personal_sendTransaction","ret","evm_snapshot","snapshot","evm_revert","snapshotId","revert","evm_increaseTime","evm_freezeTime","evm_mineBlockNumber","evm_setTime","evm_mine","evm_unlockUnknownAccount","evm_lockUnknownAccount","debug_traceTransaction","queueTransactionTrace","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","uncleIndex","eth_getWork","eth_submitWork","powHash","digest","eth_submitHashrate","hashRate","clientID","db_putString","dbName","db_getString","db_putHex","db_getHex","shh_post","priority","ttl","shh_newIdentity","shh_hasIdentity","shh_newGroup","shh_addToGroup","shh_newFilter","shh_uninstallFilter","shh_getFilterChanges","shh_getMessages","seedrandom","bip39","hdkey","ForkedBlockchain","fs","sigUtil","ZERO_BUFFER","fork","secure","total_accounts","latest_filter_id","action_queue","action_processing","snapshots","mnemonic","fromMasterSeed","mnemonicToSeed","wallet_hdpath","hd_path","hdPath","gasPriceVal","blockTime","is_mining_on_interval","mining_interval_timeout","_provider","forkCacheSize","default_balance_ether","randomAlphaNumericString","entropyToMnemonic","defaultBalanceWei","toWei","reduce","idx","account_keys_path","fileData","addresses","private_keys","writeFileSync","mineOnInterval","_minerCancellationToken","clearTimeout","cancelled","cancellationToken","timeout","setTimeout","unref","derivePath","getWallet","publicKey","_queueTransaction","processNextAction","txJsonRpc","isKnownAccount","_setTransactionDefaults","isTransaction","allocUnsafe","override","queued","processTransaction","processGasEstimate","msgHash","hashPersonalMessage","sgn","ecsign","toRpcSig","EIP712Domain","domain","primaryType","signTypedData_v4","printTransactionReceipt","runtimeError","finishedPrinting","processBlocks","totalBlocks","amountProcessed","whilst","createTransactionWithCorrectNonce","gasEstimate","expectedAddress","expectedTopics","fromBlock","toBlock","current","filtered","keep","expectedTopic","logTopic","isMatch","includes","nextSnapshot","during","doneWithTest","nextBlock","hasContractCode","getContractCode","isUnlocked","validateNonce","resolve","expected","actual","reject","then","HDKey","EthereumHDKey","fromHDKey","_hdkey","seedBuffer","fromExtendedKey","base58key","privateExtendedKey","publicExtendedKey","path","derive","deriveChild","_privateKey","_publicKey","LevelUpArrayAdapter","LevelUpObjectAdapter","levelup","filedown","cachedown","txserializer","blockserializer","bufferserializer","BlockLogsSerializer","ReceiptSerializer","directory","finishInitializing","levelupOptions","valueEncoding","store","maxSize","dir","Sublevel","serializer","sublevel","_get","_put","encoded","RangeError","newLength","valueserializer","keyserializer","encodedKey","decodedValue","batch","array","each","isOpen","util","AbstractLevelDOWN","FileDown","location","tmpDir","mkdirSync","recursive","tmpOptions","_open","accessQueue","lKey","cont","cache","execute","fds","cleanup","exit","fdPath","fd","closeSync","unlinkSync","clear","file","cleanupTmpFile","pair","add","cleanupAndCallback","delete","writeFile","rename","readFile","_del","unlink","_batch","txJson","database","binSearch","generateVM","bn","STIPEND","check","opname","isCall","isCallOrCallcode","isCreate","isTerminator","steps","stepTracker","collect","Context","fee","base","cost","sixtyFloorths","ops","intermediateCost","sub","callingFee","compositeContext","addGas","gtn","gte","isub","iadd","setStart","setStop","getCost","transfer","ctx","values","addSixtyFloorth","sixtyFloorth","addRange","finalizeRange","range","isZero","innerCost","divn","estimate","actualUsed","sysops","systemOps","opIndex","cursor","context","currentIndex","isPrecompile","getTotal","sysOps","allOps","preCompile","preCompileCheck","precompileCallDepth","clone","MAX","hexToBn","gasRefund","startingGas","lo","hi","isEnoughGas","muln","addn","lt","mid","ForkedStorageTrie","LRUCache","httpReg","protocolReg","validProtocolReg","blockNumberReg","cloneWithoutId","exec","fork_block_number","providers","HttpProvider","WebsocketProvider","isNaN","bufValue","strKey","byteLength","pendingRequests","Map","payloads","sendArray","pendingRequest","promise","cachedItem","errResults","hasError","errors","errResult","storageTrieCache","patchVM","_touchedKeys","getId","forkBlock","queriedBlock","forkBlockHash","_trie","lookupAccount","getLookupAccount","_lookupAccount","_lookupStorageTrie","getLookupStorageTrie","storageTrie","copy","isFallbackBlock","isBlockHash","isFallbackBlockHash","getFallbackBlock","numberOrHash","real","checkFn","isFallback","getRelativeBlockNumber","getStorageAt","getTouchedAt","touchedAt","fetchCodeFromFallback","keyExists","exists","fetchAccountFromFallback","acc","receiptJson","fetchBalanceFromFallback","fetchNonceFromFallback","setCode","getSafeFallbackBlockNumber","safeBlockNumber","toBN","relative","currentProvider","effectiveBlockNumber","touched","blockKey","touchedKeys","touchedKey","disconnect","MerklePatriciaTree","BaseTrie","checkpointInterface","ForkedStorageBaseTrie","_touched","findPath","node","remainder","touch","rpcKey","lastBlock","originalPut","prove","verifyProof","helpers","Subscriptions","subscriptions","Method","ENS","BaseContract","Iban","Accounts","getNetworkType","formatter","formatters","blockCall","isString","transactionFromBlockCall","uncleCall","getBlockTransactionCountCall","uncleCountCall","Contract","ens","_detectedAddress","_lastSyncCheck","defaultChain","defaultHardfork","defaultCommon","handleRevert","defaultAccount","defaultBlock","transactionBlockTimeout","transactionConfirmationBlocks","transactionPollingTimeout","maxListenersWarningThreshold","inputAddressFormatter","clearSubscriptions","_ethAccounts","outputFormatter","hexToNumber","outputSyncingFormatter","outputBigNumberFormatter","inputFormatter","inputDefaultBlockNumberFormatter","numberToHex","inputBlockNumberFormatter","outputBlockFormatter","outputTransactionFormatter","outputTransactionReceiptFormatter","abiCoder","inputTransactionFormatter","inputSignFormatter","transformPayload","reverse","inputCallFormatter","inputLogFormatter","outputLogFormatter","inputStorageKeysFormatter","outputProofFormatter","subscriptionName","subscriptionHandler","output","isFunction","_isSyncing","_isSyncingTimeout","currentBlock","highestBlock","attachToObject","Hash","RLP","Bytes","cryp","scrypt","isNot","isUndefined","isNull","BatchRequest","extend","_ethereumCall","isAddress","_accounts","defaultKeyName","_addAccountFunctions","signTransaction","privateKey","encrypt","entropy","randomHex","privateKeyToAccount","ignoreLength","fromPrivate","transactionOptions","hasTxSigningOptions","chain","transaction","baseChain","customChain","substring","ethTx","validationResult","validate","rawTransaction","messageHash","getChainId","getGasPrice","getNetworkId","recoverTransaction","signature","encodeSignature","recovery","toNumber","fromNumber","signingData","signingDataHex","recover","hashMessage","messageHex","isHexStrict","utf8ToHex","messageBytes","hexToBytes","messageBuffer","preamble","preambleBuffer","ethMessage","keccak256s","decodeSignature","preFixed","isObject","isBoolean","decrypt","v3Keystore","syncScrypt","sha3","decipher","v4","_findSafeIndex","pointer","_currentIndexes","numberOfAccounts","remove","addressOrIndex","encryptedWallet","keystore","save","keyName","localStorage","setItem","load","getItem","window","x","removeItem","storageAvailable","givenId","genesis","rng","alphabet","text","charAt","GanacheBlockTracker","_blockchain","getTrackingBlock","awaitCurrentBlock","_setCurrentBlock","_currentBlock","getCurrentBlock","once","_isRunning","oldBlock","webSocketServer","httpServer","keepAliveTimeout","connectionCounter","connections","conn","oldListen","listen","ws","oldClose","destroy","websocket","WebSocketServer","ConnectionManager","connectionsBySubscriptionId","_updateSubscriptions","manageConnection","_logPayload","_handleRequest","connectionManager","wsServer","autoAcceptConnections","connection","utf8Data","binaryData","CLOSE_REASON_UNPROCESSABLE_INPUT","subscriptionId","subscription","http","sendResponse","statusCode","headers","writeHead","createServer","body","chunk","requestHeaders","origin","createCORSResponseHeaders","ganacheProvider"],"mappings":"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","file":"ganache.core.node.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Ganache\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Ganache\"] = factory();\n\telse\n\t\troot[\"Ganache\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 36);\n","const utils = require(\"ethereumjs-util\");\n\nmodule.exports = {\n  buffer: function(val) {\n    let data;\n    if (typeof val === \"string\") {\n      // strings need to be treated as hex, so we have to prep them:\n      data = val.indexOf(\"0x\") === 0 ? val.slice(2) : val;\n      data = data.length % 2 === 1 ? `0${data}` : data;\n      data = Buffer.from(data, \"hex\");\n    } else if (Buffer.isBuffer(val)) {\n      // no need to copy the Buffer to a new Buffer, so we just use the Buffer\n      // exactly as it was given to us:\n      data = val;\n    } else {\n      // all other types get the Buffer treatment and built-in type checking:\n      data = Buffer.from(val);\n    }\n    return data;\n  },\n  // Note: Do not use to.hex() when you really mean utils.addHexPrefix().\n  hex: function(val) {\n    if (typeof val === \"string\") {\n      if (val.indexOf(\"0x\") === 0) {\n        return val.trim();\n      } else {\n        val = new utils.BN(val);\n      }\n    }\n\n    if (typeof val === \"boolean\") {\n      val = val ? 1 : 0;\n    }\n\n    if (typeof val === \"number\") {\n      val = utils.intToHex(val);\n    } else if (val == null) {\n      return \"0x\";\n    } else if (typeof val === \"object\") {\n      // Support Buffer, BigInteger and BN library\n      // Hint: BN is used in ethereumjs\n      val = val.toString(\"hex\");\n    }\n\n    return utils.addHexPrefix(val);\n  },\n\n  _rpcQuantityHexString: function(val) {\n    val = this.hex(val);\n    // remove all zeroes leading zeros, `0+`, from the hex-encoded value\n    // This doesn't remove the last 0 which would be captured by `(.+?)`\n    val = val.replace(/^(?:0x)(?:0+(.+?))?$/, \"0x$1\");\n    return val;\n  },\n\n  rpcQuantityHexString: function(val) {\n    val = this._rpcQuantityHexString(val);\n\n    // RPC Quantities must represent `0` as `0x0`\n    if (val === \"0x\") {\n      val = \"0x0\";\n    }\n\n    return val;\n  },\n\n  rpcQuantityBuffer: function(val) {\n    val = this._rpcQuantityHexString(val);\n\n    if (val === \"0x0\") {\n      val = \"0x\";\n    }\n\n    return utils.rlp.encode(val);\n  },\n\n  rpcDataHexString: function(val, length) {\n    if (typeof length === \"number\") {\n      val = this.hex(val).replace(\"0x\", \"\");\n\n      val = new Array(length - val.length).fill(\"0\").join(\"\") + val;\n    } else {\n      if (val.length === 0) {\n        return \"0x\";\n      }\n      val = this.hex(val).replace(\"0x\", \"\");\n\n      if (val.length % 2 !== 0) {\n        val = \"0\" + val;\n      }\n    }\n    return \"0x\" + val;\n  },\n\n  nullableRpcDataHexString: function(val, length) {\n    if (val === null) {\n      return null;\n    } else {\n      const rpcDataHex = this.rpcDataHexString(val, length);\n      return rpcDataHex === \"0x\" ? null : rpcDataHex;\n    }\n  },\n\n  nullableRpcQuantityHexString: function(val, length) {\n    if (val === null) {\n      return null;\n    } else {\n      const rpcQuantityHex = this._rpcQuantityHexString(val, length);\n      return rpcQuantityHex === \"0x\" ? null : rpcQuantityHex;\n    }\n  },\n\n  hexWithZeroPadding: function(val) {\n    val = this.hex(val);\n    const digits = val.replace(\"0x\", \"\");\n    if (digits.length & 0x1) {\n      return \"0x0\" + digits;\n    }\n    return val;\n  },\n\n  number: function(val) {\n    if (typeof val === \"number\") {\n      return val;\n    }\n    if (typeof val === \"string\") {\n      if (val.indexOf(\"0x\") !== 0) {\n        return parseInt(val, 10);\n      }\n    }\n    var bufVal = utils.toBuffer(val);\n    return utils.bufferToInt(bufVal);\n  },\n\n  rpcError: function(id, code, msg) {\n    return JSON.stringify({\n      jsonrpc: \"2.0\",\n      id: id,\n      error: {\n        code: code,\n        message: msg\n      }\n    });\n  }\n};\n","module.exports = require(\"ethereumjs-util\");","module.exports = require(\"util\");","module.exports = require(\"async\");","module.exports = require(\"ethereumjs-common\");","module.exports = require(\"web3-provider-engine/subproviders/subprovider.js\");","var inherits = require(\"util\").inherits;\nvar to = require(\"./to\");\nvar abi = require(\"ethereumjs-abi\");\n\ninherits(RuntimeError, Error);\n\n// Note: ethereumjs-vm will return an object that has a \"results\" and \"receipts\" keys.\n// You should pass in the whole object.\nfunction RuntimeError(transactions, vmOutput) {\n  // Why not just Error.apply(this, [message])? See\n  // https://gist.github.com/justmoon/15511f92e5216fa2624b#anti-patterns\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n\n  this.results = {};\n  this.hashes = [];\n\n  // handles creating this.message\n  this.combine(transactions, vmOutput);\n}\n\nRuntimeError.prototype.combine = function(transactions, vmOutput) {\n  // Can be combined with vmOutput or another RuntimeError.\n  if (transactions instanceof RuntimeError) {\n    var err = transactions;\n    var keys = Object.keys(err.results);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      this.results[key] = err.results[key];\n      Array.prototype.push.apply(this.hashes, err.hashes);\n    }\n  } else {\n    var results = vmOutput.results;\n\n    for (i = 0; i < transactions.length; i++) {\n      var tx = transactions[i];\n      var result = results[i];\n\n      // 1 means no error, oddly.\n      if (result.execResult.exceptionError) {\n        var hash = to.hex(tx.hash());\n        this.hashes.push(hash);\n        var reason;\n        var returnData = result.execResult.returnValue;\n        if (returnData && returnData.slice(0, 4).toString(\"hex\") === \"08c379a0\") {\n          try {\n            reason = abi.rawDecode([\"string\"], returnData.slice(4))[0];\n          } catch (_) {\n            // if decoding fails, we'll just leave the reason empty\n          }\n        }\n\n        const runState = result.execResult.runState;\n        this.results[hash] = {\n          error: result.execResult.exceptionError.error || result.execResult.exceptionError,\n          program_counter: runState && runState.programCounter,\n          return: to.hex(returnData),\n          reason: reason\n        };\n      }\n    }\n  }\n\n  // Once combined, set the message\n  if (this.hashes.length === 1) {\n    var exceptionResult = this.results[this.hashes[0]];\n    var message = \"VM Exception while processing transaction: \" + exceptionResult.error;\n    if (exceptionResult.reason) {\n      message += \" \" + exceptionResult.reason;\n    }\n    this.message = message;\n  } else {\n    message = \"Multiple VM Exceptions while processing transactions: \\n\\n\";\n\n    for (i = 0; i < this.hashes.length; i++) {\n      hash = this.hashes[i];\n      exceptionResult = this.results[hash];\n      message += hash + \": \" + exceptionResult.error;\n      if (exceptionResult.reason) {\n        message += \" \" + exceptionResult.reason;\n      }\n      message += \"\\n\";\n    }\n    this.message = message;\n  }\n};\n\nRuntimeError.prototype.count = function() {\n  return Object.keys(this.results).length;\n};\n\nRuntimeError.fromResults = function(transactions, vmOutput) {\n  var err = new RuntimeError(transactions, vmOutput);\n\n  if (err.count() === 0) {\n    return null;\n  }\n\n  return err;\n};\n\nmodule.exports = RuntimeError;\n","module.exports = require(\"level-sublevel\");","module.exports = require(\"lodash\");","module.exports = require(\"source-map-support/register\");","module.exports = require(\"ethereumjs-account\");","const EthereumJsTransaction = require(\"ethereumjs-tx\").Transaction;\nconst EthereumJsFakeTransaction = require(\"ethereumjs-tx\").FakeTransaction;\nconst Common = require(\"ethereumjs-common\").default;\nconst ethUtil = require(\"ethereumjs-util\");\nconst assert = require(\"assert\");\nconst rlp = ethUtil.rlp;\nconst to = require(\"./to\");\n\nconst sign = EthereumJsTransaction.prototype.sign;\nconst fakeHash = function() {\n  // this isn't memoization of the hash. previous versions of ganache-core\n  // created hashes in a different/incorrect way and are recorded this way\n  // in snapshot dbs. We are preserving the chain's immutability by using the\n  // stored hash instead of calculating it.\n  if (this._hash != null) {\n    return this._hash;\n  }\n  return EthereumJsFakeTransaction.prototype.hash.apply(this, arguments);\n};\nconst BUFFER_ZERO = Buffer.from([0]);\n\nfunction configZeroableField(tx, fieldName, fieldLength = 32) {\n  const index = tx._fields.indexOf(fieldName);\n  const descriptor = Object.getOwnPropertyDescriptor(tx, fieldName);\n  // eslint-disable-next-line accessor-pairs\n  Object.defineProperty(tx, fieldName, {\n    set: (v) => {\n      descriptor.set.call(tx, v);\n      v = ethUtil.toBuffer(v);\n      assert(fieldLength >= v.length, `The field ${fieldName} must not have more ${fieldLength} bytes`);\n      tx._originals[index] = v;\n    },\n    get: () => {\n      return tx._originals[index];\n    }\n  });\n}\n\n/**\n * etheruemjs-tx's Transactions don't behave quite like we need them to, so\n * we're monkey-patching them to do what we want here.\n * @param {Transaction} tx The Transaction to fix\n * @param {Object} [data] The data object\n */\nfunction fixProps(tx, data) {\n  // ethereumjs-tx doesn't allow for a `0` value in fields, but we want it to\n  // in order to differentiate between a value that isn't set and a value\n  // that is set to 0 in a fake transaction.\n  // Once https://github.com/ethereumjs/ethereumjs-tx/issues/112 is figured\n  // out we can probably remove this fix/hack.\n  // We keep track of the original value and return that value when\n  // referenced by its property name. This lets us properly encode a `0` as\n  // an empty buffer while still being able to differentiate between a `0`\n  // and `null`/`undefined`.\n  tx._originals = [];\n  const fieldNames = [\"nonce\", \"gasPrice\", \"gasLimit\", \"value\"];\n  fieldNames.forEach((fieldName) => configZeroableField(tx, fieldName, 32));\n\n  if (tx.isFake()) {\n    /**\n     * @prop {Buffer} from (read/write) Set from address to bypass transaction\n     * signing on fake transactions.\n     */\n    Object.defineProperty(tx, \"from\", {\n      enumerable: true,\n      configurable: true,\n      get: tx.getSenderAddress.bind(tx),\n      set: (val) => {\n        if (val) {\n          tx._from = ethUtil.toBuffer(val);\n        } else {\n          tx._from = null;\n        }\n      }\n    });\n\n    if (data && data.from) {\n      tx.from = data.from;\n    }\n\n    tx.hash = fakeHash;\n  }\n}\n\n/**\n * Parses the given data object and adds its properties to the given tx.\n * @param {Transaction} tx\n * @param {Object} [data]\n */\nfunction initData(tx, data) {\n  if (data) {\n    if (typeof data === \"string\") {\n      data = to.buffer(data);\n    }\n    if (Buffer.isBuffer(data)) {\n      data = rlp.decode(data);\n    }\n    const self = tx;\n    if (Array.isArray(data)) {\n      if (data.length > tx._fields.length) {\n        throw new Error(\"wrong number of fields in data\");\n      }\n\n      // make sure all the items are buffers\n      data.forEach((d, i) => {\n        self[self._fields[i]] = ethUtil.toBuffer(d);\n      });\n    } else if ((typeof data === \"undefined\" ? \"undefined\" : typeof data) === \"object\") {\n      const keys = Object.keys(data);\n      tx._fields.forEach(function(field) {\n        if (keys.indexOf(field) !== -1) {\n          let val = data[field];\n          if (typeof val === \"string\" && !val.startsWith(\"0x\")) {\n            val = \"0x\" + val;\n          }\n          self[field] = val;\n        }\n        if (field === \"gasLimit\") {\n          if (keys.indexOf(\"gas\") !== -1) {\n            self.gas = data.gas;\n          }\n        } else if (field === \"data\") {\n          if (keys.indexOf(\"input\") !== -1) {\n            self.input = data.input;\n          }\n        }\n      });\n\n      // Set chainId value from the data, if it's there and the data didn't\n      // contain a `v` value with chainId in it already. If we do have a\n      // data.chainId value let's set the interval v value to it.\n      if (!tx._chainId && data && data.chainId != null) {\n        tx.raw[self._fields.indexOf(\"v\")] = tx._chainId = data.chainId || 0;\n      }\n    } else {\n      throw new Error(\"invalid data\");\n    }\n  }\n}\n\nmodule.exports = class Transaction extends EthereumJsTransaction {\n  /**\n   * @param {Object} [data] The data for this Transaction.\n   * @param {Number} type The `Transaction.types` bit flag for this transaction\n   * @param {Object} [common] EthereumJS common.fromCustomChain()\n   *  Can be a combination of `Transaction.types.none`, `Transaction.types.signed`, and `Transaction.types.fake`.\n   */\n  constructor(data, type = Transaction.types.none, common) {\n    if (data.chainId && !common) {\n      common = Common.forCustomChain(\n        \"mainnet\", // TODO needs to match chain id\n        {\n          name: \"ganache\",\n          networkId: 1,\n          chainId: data.chainId,\n          comment: \"Local test network\",\n          bootstrapNodes: []\n        },\n        \"muirGlacier\"\n      );\n    }\n    super(undefined, { common });\n\n    this.ganacheTxCommon = common;\n    this.type = type;\n\n    fixProps(this, data);\n    initData(this, data);\n  }\n\n  static get types() {\n    // values must be powers of 2\n    return {\n      none: 0,\n      signed: 1,\n      fake: 2\n    };\n  }\n\n  /**\n   * Prepares arbitrary JSON data for use in a Transaction.\n   * @param {Object} json JSON object representing the Transaction\n   * @param {Number} type The `Transaction.types` bit flag for this transaction\n   * @param {Object} [common] EthereumJS common.fromCustomChain()\n   * @param {Number} [networkId]\n   * @param {string} [hardfork]\n   *  Can be a combination of `Transaction.types.none`, `Transaction.types.signed`, and `Transaction.types.fake`.\n   */\n  static fromJSON(json, type, common, networkId, hardfork) {\n    let toAccount;\n    if (json.to) {\n      // Remove all padding and make it easily comparible.\n      const buf = to.buffer(json.to);\n      if (buf.equals(Buffer.from([0]))) {\n        // if the address is 0x0 make it 0x0{20}\n        toAccount = ethUtil.setLengthLeft(buf, 20);\n      } else {\n        toAccount = buf;\n      }\n    }\n    const data = json.data || json.input;\n    const options = {\n      nonce: ethUtil.toBuffer(to.hex(json.nonce)),\n      from: ethUtil.toBuffer(to.hex(json.from)),\n      value: ethUtil.toBuffer(to.hex(json.value)),\n      gasLimit: ethUtil.toBuffer(to.hex(json.gas || json.gasLimit)),\n      gasPrice: ethUtil.toBuffer(to.hex(json.gasPrice)),\n      data: data ? to.buffer(data) : null,\n      to: toAccount,\n      v: ethUtil.toBuffer(json.v),\n      r: ethUtil.toBuffer(json.r),\n      s: ethUtil.toBuffer(json.s)\n    };\n    if (!common && options.v.length > 0) {\n      const chainId = Math.floor((json.v - 35) / 2);\n      common = Common.forCustomChain(\n        \"mainnet\", // TODO needs to match chain id\n        {\n          name: \"ganache\",\n          networkId: networkId,\n          chainId: chainId >= 0 ? chainId : 1,\n          comment: \"Local test network\",\n          bootstrapNodes: []\n        },\n        hardfork\n      );\n    }\n    const tx = new Transaction(options, type, common);\n    tx._hash = json.hash ? to.buffer(json.hash) : null;\n    return tx;\n  }\n\n  /**\n   * Encodes the Transaction in order to be used in a database. Can be decoded\n   * into an identical Transaction via `Transaction.decode(encodedTx)`.\n   */\n  encode() {\n    const resultJSON = {\n      hash: to.nullableRpcDataHexString(this.hash()),\n      nonce: to.nullableRpcQuantityHexString(this.nonce) || \"0x\",\n      from: to.rpcDataHexString(this.from),\n      to: to.nullableRpcDataHexString(this.to),\n      value: to.nullableRpcQuantityHexString(this.value),\n      gas: to.nullableRpcQuantityHexString(this.gasLimit),\n      gasPrice: to.nullableRpcQuantityHexString(this.gasPrice),\n      data: this.data ? this.data.toString(\"hex\") : null,\n      v: to.nullableRpcQuantityHexString(this.v),\n      r: to.nullableRpcQuantityHexString(this.r),\n      s: to.nullableRpcQuantityHexString(this.s),\n      _type: this.type,\n      _options: {\n        hardfork: this.ganacheTxCommon.hardfork(),\n        chainId: this.ganacheTxCommon.chainId(),\n        networkId: this.ganacheTxCommon.networkId()\n      }\n    };\n    return resultJSON;\n  }\n\n  isFake() {\n    return (this.type & Transaction.types.fake) === Transaction.types.fake;\n  }\n\n  isSigned() {\n    return (this.type & Transaction.types.signed) === Transaction.types.signed;\n  }\n\n  /**\n   * Compares the transaction's nonce value to the given expectedNonce taking in\n   * to account the type of transaction and comparison rules for each type.\n   *\n   * In a signed transaction a nonce of Buffer([]) is the same as Buffer([0]),\n   * but in a fake transaction Buffer([]) is null and Buffer([0]) is 0.\n   *\n   * @param {Buffer} expectedNonce The value of the from account's next nonce.\n   */\n  validateNonce(expectedNonce) {\n    let nonce;\n    if (this.isSigned() && this.nonce.length === 0) {\n      nonce = BUFFER_ZERO;\n    } else {\n      nonce = this.nonce;\n    }\n    return nonce.equals(expectedNonce);\n  }\n\n  /**\n   * Signs the transaction and sets the `type` bit for `signed` to 1,\n   * i.e., `isSigned() === true`\n   */\n  sign() {\n    sign.apply(this, arguments);\n    this.type |= Transaction.types.signed;\n  }\n\n  /**\n   * Returns a JSON-RPC spec compliant representation of this Transaction.\n   *\n   * @param {Object} block The block this Transaction appears in.\n   */\n  toJsonRpc(block) {\n    const hash = this.hash();\n\n    let transactionIndex = null;\n    for (let i = 0, txns = block.transactions, l = txns.length; i < l; i++) {\n      if (txns[i].hash().equals(hash)) {\n        transactionIndex = i;\n        break;\n      }\n    }\n\n    const resultJSON = {\n      hash: to.nullableRpcDataHexString(hash),\n      nonce: to.rpcQuantityHexString(this.nonce),\n      blockHash: to.nullableRpcDataHexString(block.hash()),\n      blockNumber: to.nullableRpcQuantityHexString(block.header.number),\n      transactionIndex: to.nullableRpcQuantityHexString(transactionIndex),\n      from: to.rpcDataHexString(this.from),\n      to: to.nullableRpcDataHexString(this.to),\n      value: to.rpcQuantityHexString(this.value),\n      gas: to.rpcQuantityHexString(this.gasLimit),\n      gasPrice: to.rpcQuantityHexString(this.gasPrice),\n      input: to.rpcDataHexString(this.data),\n      v: to.nullableRpcQuantityHexString(this.v),\n      r: to.nullableRpcQuantityHexString(this.r),\n      s: to.nullableRpcQuantityHexString(this.s)\n    };\n\n    return resultJSON;\n  }\n};\n","module.exports = require(\"ethereumjs-tx\");","module.exports = require(\"ethereumjs-block\");","var to = require(\"./to.js\");\n\n// Expects:\n//\n// logIndex: ...\n// transactionIndex: ...\n// transactionHash: ...\n// block: ...\n// address: ...\n// data: ...\n// topics: ...\n// type: ...\n\nfunction Log(data) {\n  var self = this;\n  Object.keys(data).forEach(function(key) {\n    self[key] = data[key];\n  });\n}\n\nLog.prototype.toJSON = function() {\n  // RPC quantity values like this.transactionIndex can be set to \"0x00\",\n  // use the explicit rpcQuantityHexString to properly format the JSON, removing leading zeroes.\n  // See RPC log format spec: https://github.com/ethereum/wiki/wiki/JSON-RPC\n  return {\n    logIndex: to.rpcQuantityHexString(this.logIndex),\n    transactionIndex: to.rpcQuantityHexString(this.transactionIndex),\n    transactionHash: to.rpcDataHexString(this.transactionHash),\n    blockHash: to.rpcDataHexString(this.block.hash()),\n    blockNumber: to.rpcQuantityHexString(this.block.header.number),\n    address: to.rpcDataHexString(this.address),\n    data: to.rpcDataHexString(this.data),\n    topics: this.topics,\n    type: \"mined\",\n    removed: (this.removed || false)\n  };\n};\n\nmodule.exports = Log;\n","var to = require(\"./to\");\n\nfunction Receipt(tx, block, logs, gasUsed, cumulativeGasUsed, contractAddress, status, logsBloom) {\n  this.tx = tx;\n  this.block = block;\n  this.logs = logs;\n  this.gasUsed = gasUsed;\n  this.cumulativeGasUsed = cumulativeGasUsed;\n  this.contractAddress = contractAddress;\n  this.status = status;\n  this.logsBloom = logsBloom;\n\n  this.transactionIndex = 0;\n\n  this.txHash = tx.hash();\n\n  for (var i = 0; i < block.transactions.length; i++) {\n    var current = block.transactions[i];\n    if (current.hash().equals(this.txHash)) {\n      this.transactionIndex = i;\n      break;\n    }\n  }\n}\n\nReceipt.prototype.toJSON = function() {\n  // Enforce Hex formatting as defined in the RPC spec.\n  return {\n    transactionHash: to.rpcDataHexString(this.txHash),\n    transactionIndex: to.rpcQuantityHexString(this.transactionIndex),\n    blockHash: to.rpcDataHexString(this.block.hash()),\n    blockNumber: to.rpcQuantityHexString(this.block.header.number),\n    from: to.rpcDataHexString(this.tx.from),\n    to: to.nullableRpcDataHexString(this.tx.to),\n    gasUsed: to.rpcQuantityHexString(this.gasUsed),\n    cumulativeGasUsed: to.rpcQuantityHexString(this.cumulativeGasUsed),\n    contractAddress: this.contractAddress != null ? to.rpcDataHexString(this.contractAddress) : null,\n    logs: this.logs.map(function(log) {\n      return log.toJSON();\n    }),\n    status: to.rpcQuantityHexString(this.status),\n    logsBloom: to.rpcDataHexString(this.logsBloom),\n    v: to.rpcQuantityHexString(this.tx.v),\n    r: to.rpcQuantityHexString(this.tx.r),\n    s: to.rpcQuantityHexString(this.tx.s)\n  };\n};\n\nmodule.exports = Receipt;\n","class LevelUpOutOfRangeError extends Error {\n  constructor(type, index, len) {\n    const message = \"LevelUpArrayAdapter named '\" + type + \"' index out of range: index \" + index + \"; length: \" + len;\n    super(message);\n    this.name = `${this.constructor.name}:${type}`;\n    this.type = type;\n  }\n}\n\nclass BlockOutOfRangeError extends LevelUpOutOfRangeError {\n  constructor(index, len) {\n    super(\"blocks\", index, len);\n  }\n}\n\nmodule.exports = {\n  LevelUpOutOfRangeError,\n  BlockOutOfRangeError\n};\n","module.exports = require(\"events\");","/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file index.js\n * @authors:\n *   Fabian Vogelsteller <fabian@ethereum.org>\n *   Gav Wood <gav@parity.io>\n *   Jeffrey Wilcke <jeffrey.wilcke@ethereum.org>\n *   Marek Kotewicz <marek@parity.io>\n *   Marian Oancea <marian@ethereum.org>\n * @date 2017\n */\n\n\"use strict\";\n\n\nvar version = require('../package.json').version;\nvar core = require('web3-core');\nvar Eth = require('web3-eth');\nvar Net = require('web3-net');\nvar Personal = require('web3-eth-personal');\nvar Shh = require('web3-shh');\nvar Bzz = require('web3-bzz');\nvar utils = require('web3-utils');\n\nvar Web3 = function Web3() {\n    var _this = this;\n\n    // sets _requestmanager etc\n    core.packageInit(this, arguments);\n\n    this.version = version;\n    this.utils = utils;\n\n    this.eth = new Eth(this);\n    this.shh = new Shh(this);\n    this.bzz = new Bzz(this);\n\n    // overwrite package setProvider\n    var setProvider = this.setProvider;\n    this.setProvider = function (provider, net) {\n        setProvider.apply(_this, arguments);\n\n        _this.eth.setRequestManager(_this._requestManager);\n        _this.shh.setRequestManager(_this._requestManager);\n        _this.bzz.setProvider(provider);\n\n        return true;\n    };\n};\n\nWeb3.version = version;\nWeb3.utils = utils;\nWeb3.modules = {\n    Eth: Eth,\n    Net: Net,\n    Personal: Personal,\n    Shh: Shh,\n    Bzz: Bzz\n};\n\ncore.addProviders(Web3);\n\nmodule.exports = Web3;\n\n","module.exports = require(\"web3-core\");","module.exports = require(\"underscore\");","module.exports = require(\"web3-utils\");","// make sourcemaps work!\nrequire(\"source-map-support/register\");\n\nconst ProviderEngine = require(\"web3-provider-engine\");\nconst SubscriptionSubprovider = require(\"web3-provider-engine/subproviders/subscriptions\");\n\nconst RequestFunnel = require(\"./subproviders/requestfunnel\");\nconst DelayedBlockFilter = require(\"./subproviders/delayedblockfilter\");\nconst GethDefaults = require(\"./subproviders/gethdefaults\");\nconst GethApiDouble = require(\"./subproviders/geth_api_double\");\n\nconst BlockTracker = require(\"./block_tracker\");\n\nconst RuntimeError = require(\"./utils/runtimeerror\");\nconst EventEmitter = require(\"events\");\n\nconst _ = require(\"lodash\");\n\nfunction Provider(options) {\n  const self = this;\n  EventEmitter.call(this);\n\n  this.options = options = self._applyDefaultOptions(options || {});\n\n  const gethApiDouble = new GethApiDouble(options, this);\n\n  this.engine = new ProviderEngine({\n    blockTracker: new BlockTracker({ blockchain: gethApiDouble.state.blockchain })\n  });\n\n  const subscriptionSubprovider = new SubscriptionSubprovider();\n\n  this.engine.manager = gethApiDouble;\n  this.engine.addProvider(new RequestFunnel());\n  this.engine.addProvider(new DelayedBlockFilter());\n  this.engine.addProvider(subscriptionSubprovider);\n  this.engine.addProvider(new GethDefaults());\n  this.engine.addProvider(gethApiDouble);\n\n  this.engine.setMaxListeners(100);\n  this.engine.start();\n\n  this.manager = gethApiDouble;\n  this.sendAsync = this.send.bind(this);\n  this.send = this.send.bind(this);\n  this.close = this.close.bind(this);\n  this._queueRequest = this._queueRequest.bind(this);\n  this._processRequestQueue = this._processRequestQueue.bind(this);\n\n  subscriptionSubprovider.on(\"data\", function(err, notification) {\n    self.emit(\"data\", err, notification);\n  });\n}\n\nconst defaultOptions = {\n  _chainId: 1,\n  _chainIdRpc: 1337,\n  vmErrorsOnRPCResponse: true,\n  verbose: false,\n  asyncRequestProcessing: false,\n  logger: {\n    log: function() {}\n  }\n};\n\nProvider.prototype = Object.create(EventEmitter.prototype);\nProvider.prototype.constructor = Provider;\n\nProvider.prototype._applyDefaultOptions = function(options) {\n  return _.merge({}, defaultOptions, options);\n};\n\nProvider.prototype.send = function(payload, callback) {\n  if (typeof callback !== \"function\") {\n    throw new Error(\n      \"No callback provided to provider's send function. As of web3 1.0, provider.send \" +\n        \"is no longer synchronous and must be passed a callback as its final argument.\"\n    );\n  }\n\n  const self = this;\n\n  const externalize = function(payload) {\n    return _.cloneDeep(payload);\n  };\n\n  if (Array.isArray(payload)) {\n    payload = payload.map(externalize);\n  } else {\n    payload = externalize(payload);\n  }\n\n  const intermediary = function(err, result) {\n    // clone result so that we can mutate the response without worrying about\n    // that messing up assumptions the calling logic might have about us\n    // mutating things\n    result = _.cloneDeep(result);\n    let response;\n    if (Array.isArray(result)) {\n      response = [];\n      for (let i = 0; i < result.length; i++) {\n        response.push(self.reportErrorInResponse(payload[i], err, result[i]));\n      }\n    } else {\n      response = self.reportErrorInResponse(payload, err, result);\n    }\n\n    if (self.options.verbose) {\n      self.options.logger.log(\n        \" <   \" +\n          JSON.stringify(response, null, 2)\n            .split(\"\\n\")\n            .join(\"\\n <   \")\n      );\n    }\n    process.nextTick(() => callback(response.error ? err : null, response));\n  };\n\n  if (self.options.verbose) {\n    self.options.logger.log(\n      \"   > \" +\n        JSON.stringify(payload, null, 2)\n          .split(\"\\n\")\n          .join(\"\\n   > \")\n    );\n  }\n\n  if (self.options.asyncRequestProcessing) {\n    self.engine.sendAsync(payload, intermediary);\n  } else {\n    self._queueRequest(payload, intermediary);\n  }\n};\n\nProvider.prototype.close = function(callback) {\n  // This is a little gross reaching, but...\n  this.manager.state.stopMining();\n  this.manager.state.blockchain.close(callback);\n  this.engine.stop();\n};\n\nProvider.prototype._queueRequest = function(payload, intermediary) {\n  if (!this._requestQueue) {\n    this._requestQueue = [];\n  }\n\n  this._requestQueue.push({\n    payload: payload,\n    callback: intermediary\n  });\n\n  setImmediate(this._processRequestQueue);\n};\n\nProvider.prototype._processRequestQueue = function() {\n  const self = this;\n\n  if (self._requestInProgress) {\n    return;\n  }\n\n  self._requestInProgress = true;\n\n  const args = self._requestQueue.shift();\n\n  if (args) {\n    self.engine.sendAsync(args.payload, (err, result) => {\n      if (self._requestQueue.length > 0) {\n        setImmediate(self._processRequestQueue);\n      }\n      args.callback(err, result);\n      self._requestInProgress = false;\n    });\n  } else {\n    // still need to free the lock\n    self._requestInProgress = false;\n\n    if (self._requestQueue.length > 0) {\n      setImmediate(self._processRequestQueue);\n    }\n  }\n};\n\nProvider.prototype.cleanUpErrorObject = function(err, response) {\n  // Our response should already have an error field at this point, if it\n  // doesn't, this was likely intentional. If not, this is the wrong place to\n  // fix that problem.\n  if (!err || !response.error) {\n    return response;\n  }\n\n  const errorObject = {\n    error: {\n      data: {}\n    }\n  };\n\n  if (err.message) {\n    // clean up the error reporting done by the provider engine so the error message isn't lost in the stack trace noise\n    errorObject.error.message = err.message;\n    errorObject.error.data.stack = err.stack;\n    errorObject.error.data.name = err.name;\n    if (\"code\" in err) {\n      errorObject.error.code = err.code;\n    }\n  } else if (!response.error) {\n    errorObject.error = {\n      message: err.toString()\n    };\n  }\n\n  return _.merge(response, errorObject);\n};\n\n// helper set of RPC methods which execute code and respond with a transaction hash as their result\nconst transactionMethods = new Set([\"eth_sendTransaction\", \"eth_sendRawTransaction\", \"personal_sendTransaction\"]);\n\nProvider.prototype._isTransactionRequest = function(request) {\n  return transactionMethods.has(request.method);\n};\n\nProvider.prototype.reportErrorInResponse = function(request, err, response) {\n  const self = this;\n\n  if (!err) {\n    return response;\n  }\n\n  // TODO: for next major release: move reporting of tx hash on error to error\n  // field to prevent poorly-written clients which assume that the existence of\n  // the \"result\" field implies no errors from breaking.\n  if (self._isTransactionRequest(request)) {\n    if (err instanceof RuntimeError) {\n      // Make sure we always return the transaction hash on failed transactions so\n      // the caller can get their tx receipt. This breaks JSONRPC 2.0, but it's how\n      // we've always done it.\n      response.result = err.hashes[0];\n\n      if (self.options.vmErrorsOnRPCResponse) {\n        if (!response.error.data) {\n          response.error.data = {};\n        }\n        response.error.data[err.hashes[0]] = err.results[err.hashes[0]];\n      } else {\n        delete response.error;\n      }\n    }\n  }\n\n  if (request.method === \"eth_call\") {\n    if (err instanceof RuntimeError) {\n      if (self.options.vmErrorsOnRPCResponse) {\n        if (!response.error.data) {\n          response.error.data = {};\n        }\n        response.error.data[err.hashes[0]] = err.results[err.hashes[0]];\n      } else {\n        response.result = err.results[err.hashes[0]].return || \"0x\";\n        delete response.error;\n      }\n    }\n  }\n\n  return self.cleanUpErrorObject(err, response);\n};\n\nmodule.exports = Provider;\n","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar Buffer = require('safe-buffer').Buffer;\nvar ethUtil = require('ethereumjs-util');\nvar crypto = require('crypto');\nvar randomBytes = require('randombytes');\nvar scryptsy = require('scryptsy');\nvar uuidv4 = require('uuid/v4');\nvar bs58check = require('bs58check');\n\nfunction assert(val, msg) {\n  if (!val) {\n    throw new Error(msg || 'Assertion failed');\n  }\n}\n\nfunction runCipherBuffer(cipher, data) {\n  return Buffer.concat([cipher.update(data), cipher.final()]);\n}\n\nvar Wallet = function Wallet(priv, pub) {\n  if (priv && pub) {\n    throw new Error('Cannot supply both a private and a public key to the constructor');\n  }\n\n  if (priv && !ethUtil.isValidPrivate(priv)) {\n    throw new Error('Private key does not satisfy the curve requirements (ie. it is invalid)');\n  }\n\n  if (pub && !ethUtil.isValidPublic(pub)) {\n    throw new Error('Invalid public key');\n  }\n\n  this._privKey = priv;\n  this._pubKey = pub;\n};\n\nObject.defineProperty(Wallet.prototype, 'privKey', {\n  get: function get() {\n    assert(this._privKey, 'This is a public key only wallet');\n    return this._privKey;\n  }\n});\n\nObject.defineProperty(Wallet.prototype, 'pubKey', {\n  get: function get() {\n    if (!this._pubKey) {\n      this._pubKey = ethUtil.privateToPublic(this.privKey);\n    }\n    return this._pubKey;\n  }\n});\n\nWallet.generate = function (icapDirect) {\n  if (icapDirect) {\n    var max = new ethUtil.BN('088f924eeceeda7fe92e1f5b0fffffffffffffff', 16);\n    while (true) {\n      var privKey = randomBytes(32);\n      if (new ethUtil.BN(ethUtil.privateToAddress(privKey)).lte(max)) {\n        return new Wallet(privKey);\n      }\n    }\n  } else {\n    return new Wallet(randomBytes(32));\n  }\n};\n\nWallet.generateVanityAddress = function (pattern) {\n  if ((typeof pattern === 'undefined' ? 'undefined' : _typeof(pattern)) !== 'object') {\n    pattern = new RegExp(pattern);\n  }\n\n  while (true) {\n    var privKey = randomBytes(32);\n    var address = ethUtil.privateToAddress(privKey);\n\n    if (pattern.test(address.toString('hex'))) {\n      return new Wallet(privKey);\n    }\n  }\n};\n\nWallet.prototype.getPrivateKey = function () {\n  return this.privKey;\n};\n\nWallet.prototype.getPrivateKeyString = function () {\n  return ethUtil.bufferToHex(this.getPrivateKey());\n};\n\nWallet.prototype.getPublicKey = function () {\n  return this.pubKey;\n};\n\nWallet.prototype.getPublicKeyString = function () {\n  return ethUtil.bufferToHex(this.getPublicKey());\n};\n\nWallet.prototype.getAddress = function () {\n  return ethUtil.publicToAddress(this.pubKey);\n};\n\nWallet.prototype.getAddressString = function () {\n  return ethUtil.bufferToHex(this.getAddress());\n};\n\nWallet.prototype.getChecksumAddressString = function () {\n  return ethUtil.toChecksumAddress(this.getAddressString());\n};\n\n// https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition\nWallet.prototype.toV3 = function (password, opts) {\n  assert(this._privKey, 'This is a public key only wallet');\n\n  opts = opts || {};\n  var salt = opts.salt || randomBytes(32);\n  var iv = opts.iv || randomBytes(16);\n\n  var derivedKey;\n  var kdf = opts.kdf || 'scrypt';\n  var kdfparams = {\n    dklen: opts.dklen || 32,\n    salt: salt.toString('hex')\n  };\n\n  if (kdf === 'pbkdf2') {\n    kdfparams.c = opts.c || 262144;\n    kdfparams.prf = 'hmac-sha256';\n    derivedKey = crypto.pbkdf2Sync(Buffer.from(password), salt, kdfparams.c, kdfparams.dklen, 'sha256');\n  } else if (kdf === 'scrypt') {\n    // FIXME: support progress reporting callback\n    kdfparams.n = opts.n || 262144;\n    kdfparams.r = opts.r || 8;\n    kdfparams.p = opts.p || 1;\n    derivedKey = scryptsy(Buffer.from(password), salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n  } else {\n    throw new Error('Unsupported kdf');\n  }\n\n  var cipher = crypto.createCipheriv(opts.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n  if (!cipher) {\n    throw new Error('Unsupported cipher');\n  }\n\n  var ciphertext = runCipherBuffer(cipher, this.privKey);\n\n  var mac = ethUtil.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')]));\n\n  return {\n    version: 3,\n    id: uuidv4({ random: opts.uuid || randomBytes(16) }),\n    address: this.getAddress().toString('hex'),\n    crypto: {\n      ciphertext: ciphertext.toString('hex'),\n      cipherparams: {\n        iv: iv.toString('hex')\n      },\n      cipher: opts.cipher || 'aes-128-ctr',\n      kdf: kdf,\n      kdfparams: kdfparams,\n      mac: mac.toString('hex')\n    }\n  };\n};\n\nWallet.prototype.getV3Filename = function (timestamp) {\n  /*\n   * We want a timestamp like 2016-03-15T17-11-33.007598288Z. Date formatting\n   * is a pain in Javascript, everbody knows that. We could use moment.js,\n   * but decide to do it manually in order to save space.\n   *\n   * toJSON() returns a pretty close version, so let's use it. It is not UTC though,\n   * but does it really matter?\n   *\n   * Alternative manual way with padding and Date fields: http://stackoverflow.com/a/7244288/4964819\n   *\n   */\n  var ts = timestamp ? new Date(timestamp) : new Date();\n\n  return ['UTC--', ts.toJSON().replace(/:/g, '-'), '--', this.getAddress().toString('hex')].join('');\n};\n\nWallet.prototype.toV3String = function (password, opts) {\n  return JSON.stringify(this.toV3(password, opts));\n};\n\nWallet.fromPublicKey = function (pub, nonStrict) {\n  if (nonStrict) {\n    pub = ethUtil.importPublic(pub);\n  }\n  return new Wallet(null, pub);\n};\n\nWallet.fromExtendedPublicKey = function (pub) {\n  assert(pub.slice(0, 4) === 'xpub', 'Not an extended public key');\n  pub = bs58check.decode(pub).slice(45);\n  // Convert to an Ethereum public key\n  return Wallet.fromPublicKey(pub, true);\n};\n\nWallet.fromPrivateKey = function (priv) {\n  return new Wallet(priv);\n};\n\nWallet.fromExtendedPrivateKey = function (priv) {\n  assert(priv.slice(0, 4) === 'xprv', 'Not an extended private key');\n  var tmp = bs58check.decode(priv);\n  assert(tmp[45] === 0, 'Invalid extended private key');\n  return Wallet.fromPrivateKey(tmp.slice(46));\n};\n\n// https://github.com/ethereum/go-ethereum/wiki/Passphrase-protected-key-store-spec\nWallet.fromV1 = function (input, password) {\n  assert(typeof password === 'string');\n  var json = (typeof input === 'undefined' ? 'undefined' : _typeof(input)) === 'object' ? input : JSON.parse(input);\n\n  if (json.Version !== '1') {\n    throw new Error('Not a V1 wallet');\n  }\n\n  if (json.Crypto.KeyHeader.Kdf !== 'scrypt') {\n    throw new Error('Unsupported key derivation scheme');\n  }\n\n  var kdfparams = json.Crypto.KeyHeader.KdfParams;\n  var derivedKey = scryptsy(Buffer.from(password), Buffer.from(json.Crypto.Salt, 'hex'), kdfparams.N, kdfparams.R, kdfparams.P, kdfparams.DkLen);\n\n  var ciphertext = Buffer.from(json.Crypto.CipherText, 'hex');\n\n  var mac = ethUtil.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext]));\n\n  if (mac.toString('hex') !== json.Crypto.MAC) {\n    throw new Error('Key derivation failed - possibly wrong passphrase');\n  }\n\n  var decipher = crypto.createDecipheriv('aes-128-cbc', ethUtil.keccak256(derivedKey.slice(0, 16)).slice(0, 16), Buffer.from(json.Crypto.IV, 'hex'));\n  var seed = runCipherBuffer(decipher, ciphertext);\n\n  return new Wallet(seed);\n};\n\nWallet.fromV3 = function (input, password, nonStrict) {\n  assert(typeof password === 'string');\n  var json = (typeof input === 'undefined' ? 'undefined' : _typeof(input)) === 'object' ? input : JSON.parse(nonStrict ? input.toLowerCase() : input);\n\n  if (json.version !== 3) {\n    throw new Error('Not a V3 wallet');\n  }\n\n  var derivedKey;\n  var kdfparams;\n  if (json.crypto.kdf === 'scrypt') {\n    kdfparams = json.crypto.kdfparams;\n\n    // FIXME: support progress reporting callback\n    derivedKey = scryptsy(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n  } else if (json.crypto.kdf === 'pbkdf2') {\n    kdfparams = json.crypto.kdfparams;\n\n    if (kdfparams.prf !== 'hmac-sha256') {\n      throw new Error('Unsupported parameters to PBKDF2');\n    }\n\n    derivedKey = crypto.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n  } else {\n    throw new Error('Unsupported key derivation scheme');\n  }\n\n  var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n\n  var mac = ethUtil.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext]));\n  if (mac.toString('hex') !== json.crypto.mac) {\n    throw new Error('Key derivation failed - possibly wrong passphrase');\n  }\n\n  var decipher = crypto.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n  var seed = runCipherBuffer(decipher, ciphertext);\n\n  return new Wallet(seed);\n};\n\n/*\n * Based on https://github.com/ethereum/pyethsaletool/blob/master/pyethsaletool.py\n * JSON fields: encseed, ethaddr, btcaddr, email\n */\nWallet.fromEthSale = function (input, password) {\n  assert(typeof password === 'string');\n  var json = (typeof input === 'undefined' ? 'undefined' : _typeof(input)) === 'object' ? input : JSON.parse(input);\n\n  var encseed = Buffer.from(json.encseed, 'hex');\n\n  // key derivation\n  var derivedKey = crypto.pbkdf2Sync(password, password, 2000, 32, 'sha256').slice(0, 16);\n\n  // seed decoding (IV is first 16 bytes)\n  // NOTE: crypto (derived from openssl) when used with aes-*-cbc will handle PKCS#7 padding internally\n  //       see also http://stackoverflow.com/a/31614770/4964819\n  var decipher = crypto.createDecipheriv('aes-128-cbc', derivedKey, encseed.slice(0, 16));\n  var seed = runCipherBuffer(decipher, encseed.slice(16));\n\n  var wallet = new Wallet(ethUtil.keccak256(seed));\n  if (wallet.getAddress().toString('hex') !== json.ethaddr) {\n    throw new Error('Decoded key mismatch - possibly wrong passphrase');\n  }\n  return wallet;\n};\n\nmodule.exports = Wallet;","module.exports = require(\"crypto\");","var to = require(\"./utils/to.js\");\nvar Account = require(\"ethereumjs-account\").default;\nvar Block = require(\"ethereumjs-block\");\nvar Log = require(\"./utils/log\");\nvar Receipt = require(\"./utils/receipt\");\nvar VM = require(\"ethereumjs-vm\").default;\nvar Common = require(\"ethereumjs-common\").default;\nvar RuntimeError = require(\"./utils/runtimeerror\");\nvar Trie = require(\"merkle-patricia-tree\");\nvar utils = require(\"ethereumjs-util\");\nvar async = require(\"async\");\nvar Heap = require(\"heap\");\nvar Database = require(\"./database\");\nvar EventEmitter = require(\"events\");\nvar estimateGas = require(\"./utils/gas/estimateGas\");\nvar _ = require(\"lodash\");\nvar promisify = require(\"util\").promisify;\nconst BN = utils.BN;\n\nfunction BlockchainDouble(options) {\n  var self = this;\n  EventEmitter.apply(self);\n\n  this.options = options = this._applyDefaultOptions(options || {});\n\n  this.logger = options.logger || console;\n\n  this.data = new Database(options);\n\n  if (options.trie != null && options.db_path != null) {\n    throw new Error(\"Can't initialize a TestRPC with a db and a custom trie.\");\n  }\n\n  this.pending_transactions = [];\n\n  // updated periodically to keep up with the times\n  this.blockGasLimit = options.gasLimit;\n  this.defaultTransactionGasLimit = options.defaultTransactionGasLimit;\n  this.timeAdjustment = 0;\n  this.blockNumberAdjustment = 0;\n  this.frozenTime = 0;\n}\n\nconst defaultOptions = {\n  gasLimit: \"0x6691b7\",\n  defaultTransactionGasLimit: \"0x15f90\",\n  time: null,\n  debug: false,\n  hardfork: \"muirGlacier\",\n  allowUnlimitedContractSize: false\n};\n\n// inheritence w/ prototype chaining\nBlockchainDouble.prototype = Object.create(EventEmitter.prototype);\nBlockchainDouble.prototype.constructor = BlockchainDouble;\n\nBlockchainDouble.prototype._applyDefaultOptions = function(options) {\n  // We want this function to mutate the options object so that we can report\n  // our settings back to our consumer application (e.g., ganache)\n  return _.merge(options, defaultOptions, Object.assign({}, options));\n};\n\nBlockchainDouble.prototype.initialize = function(accounts, callback) {\n  var self = this;\n\n  this.data.initialize(function(err) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.latestBlock(function(err, block) {\n      if (err) {\n        return callback(err);\n      }\n\n      var options = self.options;\n\n      var root = null;\n\n      if (block) {\n        root = block.header.stateRoot;\n      }\n\n      // I haven't yet found a good way to do this. Getting the trie from the\n      // forked blockchain without going through the other setup is a little gross.\n      self.stateTrie = self.createStateTrie(self.data.trie_db, root);\n\n      self.vm = options.vm || self.createVMFromStateTrie(self.stateTrie, true);\n\n      if (options.time) {\n        self.setTime(options.time);\n      }\n\n      // If we already have a block, then that means there's an existing chain.\n      // Don't create a genesis block.\n      if (block) {\n        self.emit(\"block\", block);\n        return callback();\n      }\n\n      self.createGenesisBlock(function(err, block) {\n        if (err) {\n          return callback(err);\n        }\n\n        accounts = accounts || [];\n\n        self.vm.stateManager.checkpoint(() => {\n          async.eachSeries(\n            accounts,\n            function(accountData, finished) {\n              self.vm.stateManager.putAccount(utils.toBuffer(accountData.address), accountData.account, finished);\n            },\n            function(err) {\n              if (err) {\n                return callback(err);\n              }\n\n              self.vm.stateManager.commit(() => {\n                // Create first block\n                self.putBlock(block, [], [], callback);\n              });\n            }\n          );\n        });\n      });\n    });\n  });\n};\n\nBlockchainDouble.prototype.createVMFromStateTrie = function(state, activatePrecompiles) {\n  const self = this;\n  const common = Common.forCustomChain(\n    \"mainnet\", // TODO needs to match chain id\n    {\n      name: \"ganache\",\n      networkId: self.options.network_id || self.forkVersion,\n      chainId: self.options._chainId,\n      comment: \"Local test network\",\n      bootstrapNodes: []\n    },\n    self.options.hardfork\n  );\n\n  const vm = new VM({\n    state: state,\n    common,\n    blockchain: {\n      // EthereumJS VM needs a blockchain object in order to get block information.\n      // When calling getBlock() it will pass a number that's of a Buffer type.\n      // Unfortunately, it uses a 64-character buffer (when converted to hex) to\n      // represent block numbers as well as block hashes. Since it's very unlikely\n      // any block number will get higher than the maximum safe Javascript integer,\n      // we can convert this buffer to a number ahead of time before calling our\n      // own getBlock(). If the conversion succeeds, we have a block number.\n      // If it doesn't, we have a block hash. (Note: Our implementation accepts both.)\n      getBlock: function(number, done) {\n        try {\n          number = to.number(number);\n        } catch (e) {\n          // Do nothing; must be a block hash.\n        }\n\n        self.getBlock(number, done);\n      }\n    },\n    activatePrecompiles: activatePrecompiles || false,\n    allowUnlimitedContractSize: self.options.allowUnlimitedContractSize\n  });\n\n  if (self.options.debug === true) {\n    // log executed opcodes, including args as hex\n    vm.on(\"step\", function(info) {\n      var name = info.opcode.name;\n      var argsNum = info.opcode.in;\n      if (argsNum) {\n        var args = info.stack\n          .slice(-argsNum)\n          .map((arg) => to.hex(arg))\n          .join(\" \");\n\n        self.logger.log(`${name} ${args}`);\n      } else {\n        self.logger.log(name);\n      }\n    });\n  }\n\n  return vm;\n};\n\nBlockchainDouble.prototype.createStateTrie = function(db, root) {\n  return new Trie(db, root);\n};\n\n// Overrideable so other implementations (forking) can edit it.\nBlockchainDouble.prototype.createGenesisBlock = function(callback) {\n  this.createBlock(callback);\n};\n\nBlockchainDouble.prototype.latestBlock = function(callback) {\n  this.data.blocks.last(function(err, last) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, last);\n  });\n};\n\n// number accepts number (integer, hex) or tag (e.g., \"latest\")\nBlockchainDouble.prototype.getEffectiveBlockNumber = function(number, callback) {\n  if (typeof number !== \"string\") {\n    number = to.hex(number);\n  }\n\n  // If we have a hex number\n  if (number.indexOf(\"0x\") >= 0) {\n    return callback(null, to.number(number));\n  } else {\n    if (number === \"latest\" || number === \"pending\") {\n      return this.getHeight(callback);\n    } else if (number === \"earliest\") {\n      return callback(null, 0);\n    }\n  }\n};\n\n// number accepts number (integer, hex), tag (e.g., \"latest\") or block hash\n// This function is used by ethereumjs-vm\nBlockchainDouble.prototype.getBlock = function(number, callback) {\n  var self = this;\n\n  if (typeof number !== \"string\") {\n    number = to.hex(number);\n  }\n\n  // If we have a hex number or a block hash\n  if (number.indexOf(\"0x\") >= 0) {\n    var hash = number;\n\n    // block hash\n    if (hash.length > 40) {\n      this.data.blockHashes.get(to.hex(hash), function(err, blockIndex) {\n        if (err) {\n          return callback(err);\n        }\n        return self.data.blocks.get(blockIndex, callback);\n      });\n    } else {\n      // Block number\n      return this.data.blocks.get(to.number(hash), callback);\n    }\n  } else {\n    if (number === \"latest\" || number === \"pending\") {\n      return this.latestBlock(callback);\n    } else if (number === \"earliest\") {\n      return this.data.blocks.first(callback);\n    } else {\n      process.nextTick(callback, new Error(\"Invalid `blockNumber`: \\\"\" + number + \"\\\"\"));\n    }\n  }\n};\n\nBlockchainDouble.prototype.putBlock = function(block, logs, receipts, callback) {\n  var self = this;\n\n  // Lock in the state root for this block.\n  block.header.stateRoot = this.stateTrie.root;\n\n  this.data.blocks.length(function(err, length) {\n    if (err) {\n      return callback(err);\n    }\n\n    var requests = [\n      self.data.blocks.push.bind(self.data.blocks, block),\n      self.data.blockLogs.push.bind(self.data.blockLogs, logs),\n      self.data.blockHashes.set.bind(self.data.blockHashes, to.hex(block.hash()), length)\n    ];\n\n    block.transactions.forEach(function(tx, index) {\n      var txHash = to.hex(tx.hash());\n      requests.push(\n        self.data.transactions.set.bind(self.data.transactions, txHash, tx),\n        self.data.transactionReceipts.set.bind(self.data.transactionReceipts, txHash, receipts[index])\n      );\n    });\n\n    async.parallel(requests, (err, result) => {\n      if (!err) {\n        self.emit(\"block\", block);\n      }\n      callback(err, result);\n    });\n  });\n};\n\nBlockchainDouble.prototype.popBlock = function(callback) {\n  var self = this;\n\n  this.data.blocks.last(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n    if (block == null) {\n      return callback(null, null);\n    }\n\n    var requests = [];\n    var blockHash = to.hex(block.hash());\n\n    block.transactions.forEach(function(tx) {\n      var txHash = to.hex(tx.hash());\n\n      requests.push(\n        self.data.transactions.del.bind(self.data.transactions, txHash),\n        self.data.transactionReceipts.del.bind(self.data.transactionReceipts, txHash)\n      );\n    });\n\n    requests.push(\n      self.data.blockLogs.pop.bind(self.data.blockLogs),\n      self.data.blockHashes.del.bind(self.data.blockHashes, blockHash),\n      self.data.blocks.pop.bind(self.data.blocks) // Do this one last in case anything relies on it.\n    );\n\n    async.series(requests, function(err) {\n      if (err) {\n        return callback(err);\n      }\n\n      // Set the root to the last available, which will \"roll back\" to the previous\n      // moment in time. Note that all the old data is still in the db, but it's now just junk data.\n      self.data.blocks.last(function(err, newLastBlock) {\n        if (err) {\n          return callback(err);\n        }\n        // using setStateRoot because in the future it will automatically take care\n        // of clearing the cache for us.\n        // note setStateRoot checks for checkpoints, and if there are any, it will fail.\n        // At time of writing this comment, the only time there could be a checkpoint\n        // is in the middle of a vm.runBlock call. Once asyncRequestProcessing is reenabled\n        // this will likely cause problems.\n        self.vm.stateManager.setStateRoot(newLastBlock.header.stateRoot, function(err) {\n          // Remember: Return block we popped off.\n          callback(err, block);\n        });\n      });\n    });\n  });\n};\n\nBlockchainDouble.prototype.clearPendingTransactions = function() {\n  this.pending_transactions = [];\n};\n\n/**\n * createBlock\n *\n * Create a new block, where the parent's block is either the latest block\n * on the chain or the parent block passed in.\n *\n * @param  {Block}   parent   The block meant to be the parent block (optional)\n * @param  {Function} callback Callback function called after block is created\n * @return Block              The block created.\n */\nBlockchainDouble.prototype.createBlock = function(parent, emulateParent, callback) {\n  var self = this;\n\n  if (typeof parent === \"function\") {\n    callback = parent;\n    parent = null;\n    emulateParent = false;\n  } else if (typeof emulateParent === \"function\") {\n    callback = emulateParent;\n    emulateParent = false;\n  }\n\n  var block = new Block();\n\n  function getParent(callback) {\n    if (parent) {\n      return callback(null, parent);\n    } else {\n      self.latestBlock(callback);\n    }\n  }\n\n  getParent(function(err, parent) {\n    if (err) {\n      return callback(err);\n    }\n\n    block.header.gasLimit = self.blockGasLimit;\n\n    if (parent != null && emulateParent) {\n      block.header.number = parent.header.number;\n      block.header.timestamp = parent.header.timestamp;\n      block.header.parentHash = parent.header.parentHash;\n    } else {\n      var parentNumber = parent != null ? to.number(parent.header.number) : -1;\n\n      // Ensure we have the right block number for the VM.\n      block.header.number = to.hex(parentNumber + 1 + self.blockNumberAdjustment);\n\n      // Set the timestamp before processing txs\n      block.header.timestamp = to.hex(self.currentTime());\n\n      if (parent != null) {\n        block.header.parentHash = to.hex(parent.hash());\n      }\n    }\n\n    callback(null, block);\n  });\n};\n\nBlockchainDouble.prototype.getQueuedNonce = function(address, callback) {\n  var nonce = null;\n  var addressBuffer = to.buffer(address);\n  this.pending_transactions.forEach(function(tx) {\n    if (!tx.from.equals(addressBuffer)) {\n      return;\n    }\n\n    var pendingNonce = new BN(tx.nonce);\n    // If this is the first queued nonce for this address we found,\n    // or it's higher than the previous highest, note it.\n    if (nonce === null || pendingNonce.gt(nonce)) {\n      nonce = pendingNonce;\n    }\n  });\n\n  // If we found a queued transaction nonce, return one higher\n  // than the highest we found\n  if (nonce != null) {\n    return callback(null, nonce.iaddn(1).toArrayLike(Buffer));\n  }\n  this.stateTrie.get(addressBuffer, function(err, val) {\n    if (err) {\n      return callback(err);\n    }\n\n    var account = new Account(val);\n    // nonces are initiallized as an empty buffer, which isn't what we want.\n    callback(null, account.nonce.length === 0 ? Buffer.from([0]) : account.nonce);\n  });\n};\n\nBlockchainDouble.prototype.queueTransaction = function(tx) {\n  this.pending_transactions.push(tx);\n};\n\nBlockchainDouble.prototype.sortByPriceAndNonce = function() {\n  // Sorts transactions like I believe geth does.\n  // See the description of 'SortByPriceAndNonce' at\n  // https://github.com/ethereum/go-ethereum/blob/290e851f57f5d27a1d5f0f7ad784c836e017c337/core/types/transaction.go\n  var self = this;\n  var sortedByNonce = {};\n\n  self.pending_transactions.forEach((tx) => {\n    const from = tx.from.toString(\"hex\");\n    const arr = sortedByNonce[from];\n    if (arr) {\n      arr.push(tx);\n    } else {\n      sortedByNonce[from] = [tx];\n    }\n  });\n\n  var priceSort = function(a, b) {\n    return parseInt(to.hex(b.gasPrice), 16) - parseInt(to.hex(a.gasPrice), 16);\n  };\n  var nonceSort = function(a, b) {\n    return parseInt(to.hex(a.nonce), 16) - parseInt(to.hex(b.nonce), 16);\n  };\n\n  // Now sort each address by nonce\n  Object.keys(sortedByNonce).forEach((address) => {\n    sortedByNonce[address].sort(nonceSort);\n  });\n\n  // Initialise a heap, sorted by price, for the head transaction from each account.\n  var heap = new Heap(priceSort);\n  Object.keys(sortedByNonce).forEach((address) => {\n    heap.push(sortedByNonce[address].shift());\n  });\n\n  // Now reorder our transactions. Compare the next transactions from each account, and choose\n  // the one with the highest gas price.\n  const sortedTransactions = [];\n  while (heap.size() > 0) {\n    const best = heap.pop();\n    const address = best.from.toString(\"hex\");\n    if (sortedByNonce[address].length > 0) {\n      // Push on the next transaction from this account\n      heap.push(sortedByNonce[address].shift());\n    }\n    sortedTransactions.push(best);\n  }\n  self.pending_transactions = sortedTransactions;\n};\n\nBlockchainDouble.prototype.getReadyCall = function(tx, emulateParent, blockNumber, callback) {\n  const readyCall = (tx, err, parentBlock) => {\n    if (err) {\n      return callback(err);\n    }\n    // create a fake block with this fake transaction\n    this.createBlock(parentBlock, emulateParent, (err, newBlock) => {\n      if (err) {\n        return callback(err);\n      }\n\n      newBlock.transactions.push(tx);\n\n      // gas estimates and eth_calls aren't subject to block gas limits\n      newBlock.header.gasLimit = tx.gasLimit;\n\n      const runArgs = {\n        tx: tx,\n        block: newBlock,\n        skipBalance: true,\n        skipNonce: true\n      };\n\n      callback(null, parentBlock.header.stateRoot, runArgs);\n    });\n  };\n  // Delegate block selection\n  if (blockNumber === \"latest\") {\n    this.latestBlock(readyCall.bind(null, tx));\n  } else {\n    this.getBlock(blockNumber, readyCall.bind(null, tx));\n  }\n};\n\nBlockchainDouble.prototype.readyCall = function(tx, emulateParent, blockNumber, callback) {\n  this.getReadyCall(tx, emulateParent, blockNumber, (err, stateRoot, runArgs) => {\n    if (err) {\n      callback(err);\n      return;\n    }\n    const stateTrie = this.createStateTrie(this.data.trie_db, stateRoot, { persist: false });\n    const vm = this.createVMFromStateTrie(stateTrie);\n    callback(null, vm, runArgs);\n  });\n};\n\nBlockchainDouble.prototype.processCall = function(tx, blockNumber, callback) {\n  this.readyCall(tx, true, blockNumber, async(err, vm, runArgs) => {\n    if (err) {\n      callback(err);\n      return;\n    }\n\n    const result = await vm.runTx(runArgs).catch((vmerr) => ({ vmerr }));\n    let vmerr = result.vmerr;\n    // This is a check that has been in there for awhile. I'm unsure if it's required, but it can't hurt.\n    if (vmerr && vmerr instanceof Error === false) {\n      vmerr = new Error(\"VM error: \" + vmerr);\n    }\n\n    // If we're given an error back directly, it's worse than a runtime error. Expose it and get out.\n    if (vmerr) {\n      return callback(vmerr, err);\n    }\n\n    // If no error, check for a runtime error. This can return null if no runtime error.\n    vmerr = RuntimeError.fromResults([tx], { results: [result] });\n\n    callback(vmerr, result);\n  });\n};\n\nBlockchainDouble.prototype.estimateGas = function(tx, blockNumber, callback) {\n  this.getReadyCall(tx, false, blockNumber, (err, stateRoot, runArgs) => {\n    if (err) {\n      callback(err);\n      return;\n    }\n    const generateVM = () => {\n      const stateTrie = this.createStateTrie(this.data.trie_db, stateRoot);\n      return this.createVMFromStateTrie(stateTrie);\n    };\n    estimateGas(generateVM, runArgs, callback);\n  });\n};\n\n/**\n * processBlock\n *\n * Process the passed in block and included transactions\n *\n * @param  {VM} vm             the vm to use when running the block\n * @param  {Block} block       block to process\n * @param  {Boolean} commit    Whether or not changes should be committed to the state\n * trie and the block appended to the end of the chain.\n * @param  {Function} callback Callback function when transaction processing is completed.\n * @return [type]              [description]\n */\nBlockchainDouble.prototype.processBlock = async function(vm, block, commit, callback) {\n  var self = this;\n\n  if (typeof commit === \"function\") {\n    callback = commit;\n    commit = true;\n  }\n\n  const results = await vm\n    .runBlock({\n      block: block,\n      generate: true,\n      skipBlockValidation: true\n    })\n    .catch((vmerr) => ({ vmerr }));\n  let vmerr = results.vmerr;\n  // This is a check that has been in there for awhile. I'm unsure if it's required, but it can't hurt.\n  if (vmerr && vmerr instanceof Error === false) {\n    vmerr = new Error(\"VM error: \" + vmerr);\n  }\n\n  // If we're given an error back directly, it's worse than a runtime error. Expose it and get out.\n  if (vmerr) {\n    callback(vmerr);\n    return;\n  }\n  // If no error, check for a runtime error. This can return null if no runtime error.\n  vmerr = RuntimeError.fromResults(block.transactions, results);\n\n  // Note, even if we have an error, some transactions may still have succeeded.\n  // Process their logs if so, returning the error at the end.\n\n  var logs = [];\n  var receipts = [];\n\n  var totalBlockGasUsage = 0;\n\n  results.results.forEach(function(result) {\n    totalBlockGasUsage += to.number(result.gasUsed);\n  });\n\n  block.header.gasUsed = utils.toBuffer(to.hex(totalBlockGasUsage));\n\n  const txTrie = new Trie();\n  const rcptTrie = new Trie();\n  const promises = [];\n  const putInTrie = (trie, key, val) => promisify(trie.put.bind(trie))(key, val);\n\n  for (var v = 0; v < results.receipts.length; v++) {\n    var result = results.results[v];\n    var receipt = results.receipts[v];\n    var tx = block.transactions[v];\n    var txHash = tx.hash();\n    var txLogs = [];\n\n    // Only process the transaction's logs if it didn't error.\n    if (result.execResult.exceptionError === undefined) {\n      for (var i = 0; i < receipt.logs.length; i++) {\n        var receiptLog = receipt.logs[i];\n        var address = to.hex(receiptLog[0]);\n        var topics = [];\n\n        for (var j = 0; j < receiptLog[1].length; j++) {\n          topics.push(to.hex(receiptLog[1][j]));\n        }\n\n        var data = to.hex(receiptLog[2]);\n\n        var log = new Log({\n          logIndex: to.hex(i),\n          transactionIndex: to.hex(v),\n          transactionHash: txHash,\n          block: block,\n          address: address,\n          data: data,\n          topics: topics,\n          type: \"mined\"\n        });\n\n        logs.push(log);\n        txLogs.push(log);\n      }\n    }\n\n    const rcpt = new Receipt(\n      tx,\n      block,\n      txLogs,\n      result.gasUsed.toArrayLike(Buffer),\n      receipt.gasUsed,\n      result.createdAddress,\n      receipt.status,\n      to.hex(receipt.bitvector)\n    );\n    receipts.push(rcpt);\n\n    const rawReceipt = [receipt.status, receipt.gasUsed, receipt.bitvector, receipt.logs];\n    const rcptBuffer = utils.rlp.encode(rawReceipt);\n    const key = utils.rlp.encode(v);\n    promises.push(putInTrie(txTrie, key, tx.serialize()));\n    promises.push(putInTrie(rcptTrie, key, rcptBuffer));\n  }\n  await Promise.all(promises);\n\n  block.header.transactionsTrie = utils.toBuffer(txTrie.root);\n  block.header.receiptTrie = utils.toBuffer(rcptTrie.root);\n\n  if (commit) {\n    // Put that block on the end of the chain\n    self.putBlock(block, logs, receipts, done);\n  } else {\n    done();\n  }\n\n  function done(e) {\n    if (e) {\n      return callback(e);\n    }\n    // Note we return the vm err here too, if it exists.\n    callback(vmerr, block.transactions, results);\n  }\n};\n\n/**\n * processNextBlock\n *\n * Process the next block like a normal blockchain, pulling from the list of\n * pending transactions.\n *\n * @param  {number} timestamp at which the block is mined\n * @param  {Function} callback Callback when transaction processing is finished.\n * @return [type]              [description]\n */\nBlockchainDouble.prototype.processNextBlock = function(timestamp, callback) {\n  var self = this;\n\n  if (typeof timestamp === \"function\") {\n    callback = timestamp;\n    timestamp = undefined;\n  }\n\n  self.sortByPriceAndNonce();\n\n  // Grab only the transactions that can fit within the block\n  var currentTransactions = [];\n  var totalGasLimit = 0;\n  var maxGasLimit = to.number(self.blockGasLimit);\n\n  while (self.pending_transactions.length > 0) {\n    var tx = self.pending_transactions[0];\n    var gasLimit = to.number(tx.gasLimit);\n\n    if (totalGasLimit + gasLimit <= maxGasLimit) {\n      totalGasLimit += gasLimit;\n      self.pending_transactions.shift();\n      currentTransactions.push(tx);\n    } else {\n      // Next one won't fit. Break.\n      break;\n    }\n  }\n\n  // Remember, we ensured transactions had a valid gas limit when they were queued (in the state manager).\n  // If we run into a case where we can't process any because one is higher than the gas limit,\n  // then it's a serious issue. This should never happen, but let's check anyway.\n  if (currentTransactions.length === 0 && self.pending_transactions.length > 0) {\n    // Error like geth.\n    var error = \"Unexpected error condition: next transaction exceeds block gas limit\";\n    return callback(error);\n  }\n\n  // Create a new block meant to be the end of the chain\n  this.createBlock(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n\n    // Overwrite block timestamp\n    if (timestamp) {\n      self.data.blocks.last(function(err, last) {\n        if (err) {\n          // it is safe to ignore this error as we only use the result\n          // to log a warning to the console.\n          return;\n        }\n        if (last && to.number(last.header.timestamp) > timestamp) {\n          self.logger.log(\n            \"Waring: Setting the block timestamp (\" + timestamp + \") that is earlier than the parent block one.\"\n          );\n        }\n      });\n      block.header.timestamp = to.hex(timestamp);\n      self.setTime(new Date(timestamp * 1000));\n    }\n    // Add transactions to the block.\n    Array.prototype.push.apply(block.transactions, currentTransactions);\n\n    self.processBlock(self.vm, block, true, callback);\n  });\n};\n\n/**\n * processTransactionTrace\n *\n * Run a previously-run transaction in the same state in which it occurred at the time it was run.\n * This will return the vm-level trace output for debugging purposes.\n *\n * Strategy:\n *\n *  1. Find block where transaction occurred\n *  2. Set state root of that block\n *  3. Rerun every transaction in that block prior to and including the requested transaction\n *  4. Send trace results back.\n *\n * @param  {[type]}   tx       [description]\n * @param  {Function} callback [description]\n * @return [type]              [description]\n */\nBlockchainDouble.prototype.processTransactionTrace = async function(hash, params, callback) {\n  const self = this;\n  const targetHash = to.hex(hash);\n  let txHashCurrentlyProcessing = \"\";\n  let txCurrentlyProcessing = null;\n  let vm;\n\n  const storageStack = {\n    currentDepth: -1,\n    stack: []\n  };\n\n  const returnVal = {\n    gas: 0,\n    returnValue: \"\",\n    structLogs: []\n  };\n\n  function stepListener(event, next) {\n    // See these docs:\n    // https://github.com/ethereum/go-ethereum/wiki/Management-APIs\n\n    const gasLeft = to.number(event.gasLeft);\n    const totalGasUsedAfterThisStep = to.number(txCurrentlyProcessing.gasLimit) - gasLeft;\n    const gasUsedPreviousStep = totalGasUsedAfterThisStep - returnVal.gas;\n    returnVal.gas += gasUsedPreviousStep;\n\n    let memory = null;\n    if (!params.disableMemory) {\n      // Get memory and break it up into 32-byte words.\n      // Note we may possibly have to pad the final word.\n      memory = Buffer.from(event.memory).toString(\"hex\");\n      memory = memory.match(/.{1,64}/g) || [];\n\n      if (memory.length > 0) {\n        const lastItem = memory[memory.length - 1];\n        if (lastItem.length < 64) {\n          memory[memory.length - 1] = lastItem + new Array(64 - lastItem.length + 1).join(\"0\");\n        }\n      }\n    }\n\n    let stack = null;\n    if (!params.disableStack) {\n      stack = event.stack.map((item) => {\n        return to.rpcDataHexString(item, 64).replace(\"0x\", \"\"); // non-0x prefixed.\n      });\n    }\n    let structLog = {\n      depth: event.depth,\n      error: \"\",\n      gas: gasLeft,\n      gasCost: 0,\n      memory,\n      op: event.opcode.name,\n      pc: event.pc,\n      stack,\n      storage: null\n    };\n\n    // The gas difference calculated for each step is indicative of gas consumed in\n    // the previous step. Gas consumption in the final step will always be zero.\n    if (returnVal.structLogs.length) {\n      returnVal.structLogs[returnVal.structLogs.length - 1].gasCost = gasUsedPreviousStep;\n    }\n\n    if (params.disableStorage) {\n      returnVal.structLogs.push(structLog);\n      next();\n    } else {\n      structLog = self.processStorageTrace(structLog, storageStack, event, vm, function(err, structLog) {\n        if (err) {\n          return next(err);\n        }\n        returnVal.structLogs.push(structLog);\n        next();\n      });\n    }\n  }\n\n  // #1 - get block via transaction receipt\n  this.getTransactionReceipt(targetHash, function(err, receipt) {\n    if (err) {\n      return callback(err);\n    }\n\n    if (!receipt) {\n      return callback(new Error(\"Unknown transaction \" + targetHash));\n    }\n\n    const targetBlock = receipt.block;\n\n    // Get the parent of the target block\n    self.getBlock(targetBlock.header.parentHash, function(err, parent) {\n      if (err) {\n        return callback(err);\n      }\n\n      // #2 - Set state root of original block\n      var stateTrie = self.createStateTrie(self.data.trie_db, parent.header.stateRoot, {\n        // when forking we need to make sure we also copy over the forkBlockNumber,\n        // otherwise some operations will request data from the main chain at the\n        // latest block\n        forkBlockNumber: to.number(parent.header.number)\n      });\n      vm = self.createVMFromStateTrie(stateTrie);\n\n      // Prepare the \"next\" block with necessary transactions\n      self.createBlock(parent, false, function(err, block) {\n        if (err) {\n          return callback(err);\n        }\n\n        // make sure we use the same timestamp as the target block\n        block.header.timestamp = targetBlock.header.timestamp;\n\n        for (var i = 0; i < targetBlock.transactions.length; i++) {\n          var tx = targetBlock.transactions[i];\n          block.transactions.push(tx);\n\n          // After including the target transaction, that's all we need to do.\n          if (to.hex(tx.hash()) === targetHash) {\n            break;\n          }\n        }\n\n        function beforeTxListener(tx) {\n          txCurrentlyProcessing = tx;\n          txHashCurrentlyProcessing = to.hex(tx.hash());\n          if (txHashCurrentlyProcessing === targetHash) {\n            vm.on(\"step\", stepListener);\n          }\n        }\n\n        // afterTxListener cleans up everything.\n        function afterTxListener() {\n          if (txHashCurrentlyProcessing === targetHash) {\n            removeListeners();\n          }\n        }\n\n        function removeListeners() {\n          vm.removeListener(\"step\", stepListener);\n          vm.removeListener(\"beforeTx\", beforeTxListener);\n          vm.removeListener(\"afterTx\", afterTxListener);\n        }\n\n        // Listen to beforeTx and afterTx so we know when our target transaction\n        // is processing. These events will add the event listener for getting the trace data.\n        vm.on(\"beforeTx\", beforeTxListener);\n        vm.on(\"afterTx\", afterTxListener);\n\n        // Don't even let the vm try to flush the block's _cache to the stateTrie.\n        // When forking some of the data that the traced function may request will\n        // exist only on the main chain. Because we pretty much lie to the VM by\n        // telling it we DO have data in our Trie, when we really don't, it gets\n        // lost during the commit phase when it traverses the \"borrowed\" data's\n        // trie (as it may not have a valid root). Because this is a trace, and we\n        // don't need to commit the data, duck punching the `flush` method (the\n        // simplest method I could find) is fine.\n        // Remove this and you may see the infamous\n        // `Uncaught TypeError: Cannot read property 'pop' of undefined` error!\n        vm.stateManager._cache.flush = (cb) => cb();\n\n        // #3 - Process the block without committing the data.\n        self.processBlock(vm, block, false, function(err) {\n          // Ignore runtime errors, or else erroneous transactions can't be traced.\n          if (err && err.message.indexOf(\"VM Exception\") === 0) {\n            err = null;\n          }\n\n          // Just to be safe\n          removeListeners();\n\n          // #4 - send state results back\n          callback(err, returnVal);\n        });\n      });\n    });\n  });\n};\n\nBlockchainDouble.prototype.processStorageTrace = function(structLog, storageStack, event, vm, callback) {\n  var name = event.opcode.name;\n\n  if (storageStack.currentDepth > event.depth) {\n    storageStack.stack.pop();\n  }\n  if (storageStack.currentDepth < event.depth) {\n    storageStack.stack.push({});\n  }\n\n  storageStack.currentDepth = event.depth;\n\n  var key;\n  var value;\n  switch (name) {\n    case \"SSTORE\":\n      {\n        const stack = event.stack;\n        const stackLength = stack.length;\n        key = to.rpcDataHexString(stack[stackLength - 1], 64).replace(\"0x\", \"\");\n        value = to.rpcDataHexString(stack[stackLength - 2], 64).replace(\"0x\", \"\");\n        // use Object.assign to prevent future steps from overwriting this step's storage values\n        structLog.storage = Object.assign({}, storageStack.stack[storageStack.currentDepth]);\n\n        callback(null, structLog);\n        // assign after callback because this storage change actually takes\n        // effect _after_ this opcode executes\n        storageStack.stack[storageStack.currentDepth][key] = value;\n      }\n      break;\n    case \"SLOAD\":\n      {\n        const stack = event.stack;\n        // this one's more fun, we need to get the value the contract is loading from current storage\n        key = to.rpcDataHexString(stack[stack.length - 1], 64).replace(\"0x\", \"\");\n\n        vm.stateManager.getContractStorage(event.address, Buffer.from(key, \"hex\"), function(err, result) {\n          if (err) {\n            return callback(err);\n          }\n\n          value = to.rpcDataHexString(result, 64).replace(\"0x\", \"\");\n          storageStack.stack[storageStack.currentDepth][key] = value;\n          // use Object.assign to prevent future steps from overwriting this step's storage values\n          structLog.storage = Object.assign({}, storageStack.stack[storageStack.currentDepth]);\n          callback(null, structLog);\n        });\n      }\n      break;\n    default:\n      // use Object.assign to prevent future steps from overwriting this step's storage values\n      structLog.storage = Object.assign({}, storageStack.stack[storageStack.currentDepth]);\n      callback(null, structLog);\n  }\n};\n\nBlockchainDouble.prototype.getAccount = function(address, number, callback) {\n  var self = this;\n\n  this.getBlock(number, function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n\n    var trie = self.stateTrie;\n\n    // Manipulate the state root in place to maintain checkpoints\n    var currentStateRoot = trie.root;\n    self.stateTrie.root = block.header.stateRoot;\n\n    trie.get(utils.toBuffer(address), function(err, data) {\n      // Finally, put the stateRoot back for good\n      trie.root = currentStateRoot;\n\n      if (err) {\n        return callback(err);\n      }\n\n      var account = new Account(data);\n\n      callback(null, account);\n    });\n  });\n};\n\nBlockchainDouble.prototype.getNonce = function(address, number, callback) {\n  this.getAccount(address, number, function(err, account) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, account.nonce);\n  });\n};\n\nBlockchainDouble.prototype.getBalance = function(address, number, callback) {\n  this.getAccount(address, number, function(err, account) {\n    if (err) {\n      return callback(err);\n    }\n\n    callback(null, account.balance);\n  });\n};\n\n// Note! Storage values are returned RLP encoded!\nBlockchainDouble.prototype.getStorage = function(address, position, number, callback) {\n  var self = this;\n\n  this.getBlock(number, function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n\n    var trie = self.stateTrie;\n\n    // Manipulate the state root in place to maintain checkpoints\n    var currentStateRoot = trie.root;\n    self.stateTrie.root = block.header.stateRoot;\n\n    trie.get(utils.toBuffer(address), function(err, data) {\n      if (err != null) {\n        // Put the stateRoot back if there's an error\n        trie.root = currentStateRoot;\n        return callback(err);\n      }\n\n      var account = new Account(data);\n\n      trie.root = account.stateRoot;\n\n      trie.get(utils.setLengthLeft(utils.toBuffer(position), 32), function(err, value) {\n        // Finally, put the stateRoot back for good\n        trie.root = currentStateRoot;\n\n        if (err != null) {\n          return callback(err);\n        }\n\n        callback(null, value);\n      });\n    });\n  });\n};\n\nBlockchainDouble.prototype.getCode = function(address, number, callback) {\n  var self = this;\n\n  this.getBlock(number, function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n\n    var trie = self.stateTrie;\n\n    // Manipulate the state root in place to maintain checkpoints\n    var currentStateRoot = trie.root;\n    self.stateTrie.root = block.header.stateRoot;\n\n    trie.get(utils.toBuffer(address), function(err, data) {\n      if (err != null) {\n        // Put the stateRoot back if there's an error\n        trie.root = currentStateRoot;\n        return callback(err);\n      }\n\n      var account = new Account(data);\n\n      account.getCode(trie, function(err, code) {\n        // Finally, put the stateRoot back for good\n        trie.root = currentStateRoot;\n\n        if (err) {\n          return callback(err);\n        }\n\n        callback(null, code);\n      });\n    });\n  });\n};\n\nBlockchainDouble.prototype.getTransaction = function(hash, callback) {\n  hash = to.hex(hash);\n\n  this.data.transactions.get(hash, function(err, tx) {\n    if (err) {\n      if (err.notFound) {\n        return callback(null, null);\n      } else {\n        return callback(err);\n      }\n    }\n    callback(null, tx);\n  });\n};\n\nBlockchainDouble.prototype.getTransactionReceipt = function(hash, callback) {\n  hash = to.hex(hash);\n  const pendingTxs = this.pending_transactions;\n\n  for (var i = 0; i < pendingTxs.length; i++) {\n    const pendingTxHash = to.hex(pendingTxs[i].hash());\n    if (hash === pendingTxHash) {\n      return callback(null, { tx: pendingTxs[i] });\n    }\n  }\n\n  this.data.transactionReceipts.get(hash, function(err, receipt) {\n    if (err) {\n      if (err.notFound) {\n        return callback(null, null);\n      } else {\n        return callback(err);\n      }\n    }\n\n    callback(err, receipt);\n  });\n};\n\nBlockchainDouble.prototype.getBlockLogs = function(number, callback) {\n  var self = this;\n  this.getEffectiveBlockNumber(number, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n    self.data.blockLogs.get(effective, callback);\n  });\n};\n\nBlockchainDouble.prototype.getHeight = function(callback) {\n  this.latestBlock(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, to.number(block.header.number));\n  });\n};\n\nBlockchainDouble.prototype.currentTime = function() {\n  if (this.frozenTime !== 0) {\n    return this.frozenTime;\n  } else {\n    return ((new Date().getTime() / 1000) | 0) + this.timeAdjustment;\n  }\n};\n\nBlockchainDouble.prototype.increaseTime = function(seconds) {\n  if (seconds < 0) {\n    seconds = 0;\n  }\n  this.timeAdjustment += seconds;\n  this.unfreezeTime();\n  return this.timeAdjustment;\n};\n\nBlockchainDouble.prototype.setTime = function(date) {\n  var now = (new Date().getTime() / 1000) | 0;\n  var start = (date.getTime() / 1000) | 0;\n  this.timeAdjustment = start - now;\n  this.unfreezeTime();\n};\n\nBlockchainDouble.prototype.freezeTime = function(seconds) {\n  this.frozenTime = seconds;\n};\n\nBlockchainDouble.prototype.unfreezeTime = function() {\n  if (this.frozenTime !== 0) {\n    this.logger.log(\"Waring: unfreezing time and resuming using system time, offset by (\" + this.timeAdjustment + \")\");\n    this.frozenTime = 0;\n  }\n};\n\nBlockchainDouble.prototype.setBlockNumber = function(number) {\n  var that = this;\n  if (number === undefined) {\n    that.blockNumberAdjustment = 0;\n    return;\n  }\n\n  this.data.blocks.last((err, maybeBlock) => {\n    if (err !== null) {\n      return;\n    }\n    if (maybeBlock === null) {\n      that.blockNumberAdjustment = number;\n    } else {\n      that.blockNumberAdjustment = number - to.number(maybeBlock.header.number);\n    }\n  });\n};\n\nBlockchainDouble.prototype.close = function(callback) {\n  this.data.close(callback);\n};\n\nmodule.exports = BlockchainDouble;\n","module.exports = require(\"merkle-patricia-tree\");","module.exports = require(\"fs\");","module.exports = require(\"tmp\");","// var to = require(\"../utils/to\");\nvar Transaction = require(\"../utils/transaction\");\nvar Common = require(\"ethereumjs-common\").default;\nvar ethUtil = require(\"ethereumjs-util\");\n\nconst decode = function(json, done) {\n  const options = {\n    hash: json.hash,\n    nonce: json.nonce,\n    value: json.value,\n    to: json.to,\n    from: json.from,\n    gasLimit: json.gas || json.gasLimit,\n    gasPrice: json.gasPrice,\n    data: json.data,\n    v: json.v,\n    r: json.r,\n    s: json.s\n  };\n\n  const sigV = ethUtil.bufferToInt(options.v);\n  let chainId = Math.floor((sigV - 35) / 2);\n  if (chainId < 0) {\n    chainId = 0;\n  }\n\n  const commonOptions = {\n    name: \"ganache\",\n    chainId,\n    networkId: 1,\n    comment: \"Local test network\"\n  };\n\n  let hardfork = \"muirGlacier\";\n  if (json._options) {\n    hardfork = json._options.hardfork;\n    commonOptions.chainId = json._options.chainId;\n    commonOptions.networkId = json._options.networkId;\n  }\n\n  const common = Common.forCustomChain(\n    \"mainnet\", // TODO needs to match chain id\n    commonOptions,\n    hardfork\n  );\n  // databases generated before ganache-core@2.3.2 didn't have a `_type` and\n  // and were always fake signed. So if _type is undefined it is \"fake\" (even\n  // if we have a valid signature that can generate the tx's `from`).\n  const type = json._type === undefined ? Transaction.types.fake : json._type;\n  const tx = Transaction.fromJSON(options, type, common);\n\n  // Commenting this out because we don't want to throw if the json.hash we\n  // put in is different that the tx.hash() calculation we now have. There\n  // may have been bug fixes to the way transactions are hashed in future\n  // versions of ganache-core, but we still want tobe able to read in\n  // transactions from previously saved databases!\n  // if (to.hex(tx.hash()) !== json.hash) {\n  //   const e = new Error(\n  //     \"DB consistency check: Decoded transaction hash \" +\n  //       \"didn't match encoded hash. Expected: \" +\n  //       json.hash +\n  //       \"; actual: \" +\n  //       to.hex(tx.hash())\n  //   );\n  //   return done(e);\n  // }\n\n  done(null, tx);\n};\n\nconst encode = function(tx, done) {\n  const encoded = tx.encode();\n  done(null, encoded);\n};\n\nmodule.exports = {\n  encode,\n  decode\n};\n","module.exports = require(\"web3-core-helpers\");","module.exports = require(\"web3-core-method\");","module.exports = require(\"web3-net\");","module.exports = require(\"web3-eth-personal\");","var inherits = require(\"util\").inherits;\n\n// raised when the transaction is rejected prior to running it in the EVM.\nfunction TXRejectedError(message) {\n  // Why not just Error.apply(this, [message])? See\n  // https://gist.github.com/justmoon/15511f92e5216fa2624b#anti-patterns\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n}\n\ninherits(TXRejectedError, Error);\n\nmodule.exports = TXRejectedError;\n","var to = require(\"./to\");\n\nmodule.exports = {\n  toJSON: function(block, includeFullTransactions) {\n    return {\n      number: to.rpcQuantityHexString(block.header.number),\n      hash: to.hex(block.hash()),\n      parentHash: to.hex(block.header.parentHash), // common.hash\n      mixHash: to.hex(block.header.mixHash),\n      nonce: to.rpcDataHexString(to.hex(block.header.nonce), 16),\n      sha3Uncles: to.hex(block.header.uncleHash),\n      logsBloom: to.hex(block.header.bloom),\n      transactionsRoot: to.hex(block.header.transactionsTrie),\n      stateRoot: to.hex(block.header.stateRoot),\n      receiptsRoot: to.hex(block.header.receiptTrie),\n      miner: to.hex(block.header.coinbase),\n      difficulty: to.rpcQuantityHexString(block.header.difficulty),\n      totalDifficulty: to.rpcQuantityHexString(block.header.difficulty), // TODO: Figure out what to do here.\n      extraData: to.rpcDataHexString(block.header.extraData),\n      size: to.hex(1000), // TODO: Do something better here\n      gasLimit: to.rpcQuantityHexString(block.header.gasLimit),\n      gasUsed: to.rpcQuantityHexString(block.header.gasUsed),\n      timestamp: to.rpcQuantityHexString(block.header.timestamp),\n      transactions: block.transactions.map(function(tx) {\n        if (includeFullTransactions) {\n          return tx.toJsonRpc(block);\n        } else {\n          return to.hex(tx.hash());\n        }\n      }),\n      uncles: [] // block.uncleHeaders.map(function(uncleHash) {return to.hex(uncleHash)})\n    };\n  }\n};\n","// make sourcemaps work!\nrequire(\"source-map-support/register\");\n\nconst Provider = require(\"./lib/provider\");\nconst Server = require(\"./lib/server\");\n\n// This interface exists so as not to cause breaking changes.\nmodule.exports = {\n  server: function(options) {\n    return Server.create(options);\n  },\n  provider: function(options) {\n    return new Provider(options);\n  },\n  _webpacked: true\n};\n","module.exports = require(\"web3-provider-engine\");","module.exports = require(\"web3-provider-engine/subproviders/subscriptions\");","var Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\nvar inherits = require(\"util\").inherits;\n\ninherits(RequestFunnel, Subprovider);\n\nmodule.exports = RequestFunnel;\n\n// See if any payloads for the specified methods are marked as external.\n// If they are external, and match the method list, process them one at\n// a time.\nfunction RequestFunnel() {\n  // We use an object here for O(1) lookups (speed).\n  this.methods = {\n    eth_call: true,\n    eth_getStorageAt: true,\n    eth_sendTransaction: true,\n    eth_sendRawTransaction: true,\n\n    // Ensure block filter and filter changes are process one at a time\n    // as well so filter requests that come in after a transaction get\n    // processed once that transaction has finished processing.\n    eth_newBlockFilter: true,\n    eth_getFilterChanges: true,\n    eth_getFilterLogs: true\n  };\n  this.queue = [];\n  this.isWorking = false;\n}\n\nRequestFunnel.prototype.handleRequest = function(payload, next, end) {\n  if (payload.external !== true || this.methods[payload.method] !== true) {\n    return next();\n  }\n\n  this.queue.push([payload, next]);\n\n  if (this.isWorking === false) {\n    this.processNext();\n  }\n};\n\nRequestFunnel.prototype.processNext = function() {\n  var self = this;\n\n  if (this.queue.length === 0) {\n    this.isWorking = false;\n    return;\n  }\n\n  this.isWorking = true;\n\n  var item = this.queue.shift();\n  var next = item[1];\n\n  next(function(error, request, cb) {\n    if (error) {\n      return cb(error);\n    }\n    cb();\n    self.processNext();\n  });\n};\n","// It's unforutnate we have to have this subprovider, but it's because\n// we instamine, and web3 isn't written in a way that supports instamining\n// (i.e., it sets up the filter after the transaction has been processed).\n// This block filter will ensure that each block filter will always see\n// the change from the last block to the current block.\n//\n// Note: An added benefit of this is that it shaves off a signifcant\n// amount of time from tests that use web3 and block filters.\n\nvar Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\nvar inherits = require(\"util\").inherits;\nvar async = require(\"async\");\nvar to = require(\"../utils/to\");\n\ninherits(DelayedBlockFilter, Subprovider);\n\nmodule.exports = DelayedBlockFilter;\n\nfunction DelayedBlockFilter() {\n  this.watching = {};\n}\n\nDelayedBlockFilter.prototype.handleRequest = function(payload, next, end) {\n  if (payload.method === \"eth_newBlockFilter\") {\n    return this.handleNewBlockFilter(payload, next, end);\n  }\n  if (payload.method === \"eth_getFilterChanges\") {\n    return this.handleGetFilterChanges(payload, next, end);\n  }\n\n  next();\n};\n\nDelayedBlockFilter.prototype.handleNewBlockFilter = function(payload, next, end) {\n  var self = this;\n\n  // Let this filter process and add it to our watch list.\n  next(function(err, result, cb) {\n    if (err) {\n      return cb();\n    }\n    self.watching[result] = true;\n    cb();\n  });\n};\n\nDelayedBlockFilter.prototype.handleGetFilterChanges = function(payload, next, end) {\n  var self = this;\n  var filterId = payload.params[0];\n\n  if (!this.watching[filterId]) {\n    return next();\n  }\n\n  // Get the changes, and then alter the result.\n  next(function(err, result, cb) {\n    if (err) {\n      return cb();\n    }\n\n    var currentBlockHash;\n    var previousBlockHash;\n    var blockNumber;\n\n    async.series(\n      [\n        function(c) {\n          // If we have a result, use it.\n          if (result.length !== 0) {\n            currentBlockHash = result[0];\n            c();\n          } else {\n            // Otherwise, get the current block number.\n            self.emitPayload(\n              {\n                method: \"eth_blockNumber\"\n              },\n              function(err, res) {\n                if (err) {\n                  return c(err);\n                }\n                blockNumber = to.number(res.result);\n                c();\n              }\n            );\n          }\n        },\n        function(c) {\n          // If we got a block number above, meaning, we didn't get a block hash,\n          // skip this step.\n          if (blockNumber) {\n            return c();\n          }\n\n          // If not skipped, then we got a block hash, and we need to get a block number from it.\n          self.emitPayload(\n            {\n              method: \"eth_getBlockByHash\",\n              params: [currentBlockHash, false]\n            },\n            function(err, res) {\n              if (err) {\n                return c(err);\n              }\n              blockNumber = to.number(res.result.number);\n              c();\n            }\n          );\n        },\n        function(c) {\n          // If we're at block 0, return no changes. See final function below.\n          blockNumber = to.number(blockNumber);\n          if (blockNumber === 0) {\n            previousBlockHash = undefined;\n            return c();\n          }\n\n          // If at this point, we do have a block number, so let's subtract one\n          // from it and get the block hash of the block before it.\n          blockNumber = blockNumber - 1;\n          self.emitPayload(\n            {\n              method: \"eth_getBlockByNumber\",\n              params: [blockNumber, false]\n            },\n            function(err, res) {\n              if (err) {\n                return c(err);\n              }\n              previousBlockHash = res.result.hash;\n              c();\n            }\n          );\n        }\n      ],\n      function(err) {\n        if (err) {\n          // Unfortunately the subprovider code doesn't let us return an error\n          // through the callback cb(). So we'll just ignore it.... (famous last words).\n        }\n\n        // If we got the previous block, use it. Otherwise do nothing.\n        // Then stop watching because we only want on getFilterChanges to react this way.\n        if (previousBlockHash) {\n          result[0] = previousBlockHash;\n        }\n\n        delete self.watching[filterId];\n        cb();\n      }\n    );\n  });\n};\n","var Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\nvar inherits = require(\"util\").inherits;\n\ninherits(GethDefaults, Subprovider);\n\nmodule.exports = GethDefaults;\n\nfunction GethDefaults() {}\n\n// Massage eth_estimateGas requests, setting default data (e.g., from) if\n// not specified. This is here specifically to make the testrpc\n// react like Geth.\nGethDefaults.prototype.handleRequest = function(payload, next, end) {\n  if (payload.method !== \"eth_estimateGas\" && payload.method !== \"eth_call\") {\n    return next();\n  }\n\n  var params = payload.params[0];\n\n  if (params.from == null) {\n    this.emitPayload(\n      {\n        method: \"eth_coinbase\"\n      },\n      function(err, result) {\n        if (err) {\n          return end(err);\n        }\n\n        var coinbase = result.result;\n\n        params.from = coinbase;\n        next();\n      }\n    );\n  } else {\n    next();\n  }\n};\n","var utils = require(\"ethereumjs-util\");\nvar inherits = require(\"util\").inherits;\nvar StateManager = require(\"../statemanager.js\");\nvar to = require(\"../utils/to\");\nvar TXRejectedError = require(\"../utils/txrejectederror\");\n\nvar blockHelper = require(\"../utils/block_helper\");\nvar pkg = require(\"../../package.json\");\nconst { BlockOutOfRangeError } = require(\"../utils/errorhelper\");\n\nvar Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\n\nconst maxSafeInt = \"0x\" + Number.MAX_SAFE_INTEGER.toString(16);\nconst vrs = [\"v\", \"r\", \"s\"];\n\ninherits(GethApiDouble, Subprovider);\n\nfunction GethApiDouble(options, provider) {\n  var self = this;\n\n  this.state = options.state || new StateManager(options, provider);\n  this.options = options;\n  this.initialized = false;\n\n  this.initialization_error = null;\n  this.post_initialization_callbacks = [];\n\n  this.state.initialize(function(err) {\n    if (err) {\n      self.initialization_error = err;\n    }\n    self.initialized = true;\n\n    var callbacks = self.post_initialization_callbacks;\n    self.post_initialization_callbacks = [];\n\n    callbacks.forEach(function(callback) {\n      setImmediate(function() {\n        callback(self.initialization_error, self.state);\n      });\n    });\n  });\n}\n\nGethApiDouble.prototype.waitForInitialization = function(callback) {\n  var self = this;\n  if (self.initialized === false) {\n    self.post_initialization_callbacks.push(callback);\n  } else {\n    callback(self.initialization_error, self.state);\n  }\n};\n\n// Function to not pass methods through until initialization is finished\nGethApiDouble.prototype.handleRequest = function(payload, next, end) {\n  var self = this;\n\n  if (self.initialization_error != null) {\n    return end(self.initialization_error);\n  }\n\n  if (self.initialized === false) {\n    self.waitForInitialization(self.getDelayedHandler(payload, next, end));\n    return;\n  }\n\n  var method = self[payload.method];\n\n  if (method == null) {\n    return end(new Error(\"Method \" + payload.method + \" not supported.\"));\n  }\n\n  var params = payload.params || [];\n  var args = [].concat(params);\n\n  var addedBlockParam = false;\n\n  if (self.requiresDefaultBlockParameter(payload.method) && args.length < method.length - 1) {\n    args.push(\"latest\");\n    addedBlockParam = true;\n  }\n\n  args.push(end);\n\n  // avoid crash by checking to make sure that we haven't specified too many arguments\n  if (\n    args.length > method.length ||\n    (method.minLength !== undefined && args.length < method.minLength) ||\n    (method.minLength === undefined && args.length < method.length)\n  ) {\n    var errorMessage = `Incorrect number of arguments. Method '${payload.method}' requires `;\n    if (method.minLength) {\n      errorMessage += `between ${method.minLength - 1} and ${method.length - 1} arguments. `;\n    } else {\n      errorMessage += `exactly ${method.length - 1} arguments. `;\n    }\n\n    if (addedBlockParam) {\n      errorMessage += \"Including the implicit block argument, r\";\n    } else {\n      // new sentence, capitalize it.\n      errorMessage += \"R\";\n    }\n    errorMessage += `equest specified ${args.length - 1} arguments: ${JSON.stringify(args)}.`;\n\n    return end(new Error(errorMessage));\n  }\n\n  method.apply(self, args);\n};\n\nGethApiDouble.prototype.getDelayedHandler = function(payload, next, end) {\n  var self = this;\n  return function(err, state) {\n    if (err) {\n      end(err);\n    }\n    self.handleRequest(payload, next, end);\n  };\n};\n\nGethApiDouble.prototype.requiresDefaultBlockParameter = function(method) {\n  // object for O(1) lookup.\n  var methods = {\n    eth_getBalance: true,\n    eth_getCode: true,\n    eth_getTransactionCount: true,\n    eth_getStorageAt: true,\n    eth_call: true,\n    eth_estimateGas: true\n  };\n\n  return methods[method] === true;\n};\n\n// Handle individual requests.\n\nGethApiDouble.prototype.eth_accounts = function(callback) {\n  callback(null, Object.keys(this.state.accounts));\n};\n\nGethApiDouble.prototype.eth_blockNumber = function(callback) {\n  this.state.blockNumber(function(err, result) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, to.hex(result));\n  });\n};\n\nGethApiDouble.prototype.eth_chainId = function(callback) {\n  callback(null, to.hex(this.options._chainIdRpc));\n};\n\nGethApiDouble.prototype.eth_coinbase = function(callback) {\n  callback(null, this.state.coinbase);\n};\n\nGethApiDouble.prototype.eth_mining = function(callback) {\n  callback(null, this.state.is_mining);\n};\n\nGethApiDouble.prototype.eth_hashrate = function(callback) {\n  callback(null, \"0x0\");\n};\n\nGethApiDouble.prototype.eth_gasPrice = function(callback) {\n  callback(null, utils.addHexPrefix(this.state.gasPrice()));\n};\n\nGethApiDouble.prototype.eth_getBalance = function(address, blockNumber, callback) {\n  this.state.getBalance(address, blockNumber, callback);\n};\n\nGethApiDouble.prototype.eth_getCode = function(address, blockNumber, callback) {\n  this.state.getCode(address, blockNumber, callback);\n};\n\nGethApiDouble.prototype.eth_getBlockByNumber = function(blockNumber, includeFullTransactions, callback) {\n  this.state.blockchain.getBlock(blockNumber, function(err, block) {\n    if (err) {\n      if (err instanceof BlockOutOfRangeError) {\n        return callback(null, null);\n      } else {\n        return callback(err);\n      }\n    }\n\n    callback(null, blockHelper.toJSON(block, includeFullTransactions));\n  });\n};\n\nGethApiDouble.prototype.eth_getBlockByHash = function(txHash, includeFullTransactions, callback) {\n  this.eth_getBlockByNumber.apply(this, arguments);\n};\n\nGethApiDouble.prototype.eth_getBlockTransactionCountByNumber = function(blockNumber, callback) {\n  this.state.blockchain.getBlock(blockNumber, function(err, block) {\n    if (err) {\n      if (err instanceof BlockOutOfRangeError) {\n        // block doesn't exist\n        return callback(null, null);\n      }\n      return callback(err);\n    }\n    callback(null, to.rpcQuantityHexString(block.transactions.length));\n  });\n};\n\nGethApiDouble.prototype.eth_getBlockTransactionCountByHash = function(blockHash, callback) {\n  this.eth_getBlockTransactionCountByNumber.apply(this, arguments);\n};\n\nGethApiDouble.prototype.eth_getTransactionReceipt = function(hash, callback) {\n  this.state.getTransactionReceipt(hash, function(err, receipt) {\n    if (err) {\n      return callback(err);\n    }\n\n    var result = null;\n\n    if (receipt && receipt.block) {\n      result = receipt.toJSON();\n      vrs.forEach((element) => {\n        delete result[element];\n      });\n    }\n    callback(null, result);\n  });\n};\n\nGethApiDouble.prototype.eth_getTransactionByHash = function(hash, callback) {\n  this.state.getTransactionReceipt(hash, function(err, receipt) {\n    if (err) {\n      return callback(err);\n    }\n\n    var result = null;\n\n    if (receipt) {\n      // if there is no block then the transaction is still pending\n      if (!receipt.block) {\n        // assemble the block object with null values for pending transactions\n        receipt.block = {\n          transactions: [],\n          hash: () => {\n            return null;\n          },\n          header: { number: null }\n        };\n\n        result = receipt.tx.toJsonRpc(receipt.block);\n      } else {\n        result = receipt.tx.toJsonRpc(receipt.block);\n      }\n    }\n    callback(null, result);\n  });\n};\n\nGethApiDouble.prototype.eth_getTransactionByBlockHashAndIndex = function(hashOrNumber, index, callback) {\n  index = to.number(index);\n\n  this.state.getBlock(hashOrNumber, function(err, block) {\n    if (err) {\n      // block doesn't exist by that hash\n      if (err.notFound) {\n        return callback(null, null);\n      } else {\n        return callback(err);\n      }\n    }\n\n    if (index >= block.transactions.length) {\n      return callback(new Error(\"Transaction at index \" + to.hex(index) + \" does not exist in block.\"));\n    }\n\n    var tx = block.transactions[index];\n    var result = tx.toJsonRpc(block);\n\n    callback(null, result);\n  });\n};\n\nGethApiDouble.prototype.eth_getTransactionByBlockNumberAndIndex = function(hashOrNumber, index, callback) {\n  this.eth_getTransactionByBlockHashAndIndex(hashOrNumber, index, callback);\n};\n\nGethApiDouble.prototype.eth_getTransactionCount = function(address, blockNumber, callback) {\n  this.state.getTransactionCount(address, blockNumber, (err, count) => {\n    if (err instanceof BlockOutOfRangeError) {\n      return callback(null, null);\n    }\n    return callback(err, count);\n  });\n};\n\nGethApiDouble.prototype.eth_sign = function(address, dataToSign, callback) {\n  var result;\n  var error;\n\n  try {\n    result = this.state.sign(address, dataToSign);\n  } catch (e) {\n    error = e;\n  }\n\n  callback(error, result);\n};\n\nGethApiDouble.prototype.eth_signTypedData = function(address, typedDataToSign, callback) {\n  var result;\n  var error;\n\n  try {\n    result = this.state.signTypedData(address, typedDataToSign);\n  } catch (e) {\n    error = e;\n  }\n\n  callback(error, result);\n};\n\nGethApiDouble.prototype.eth_sendTransaction = function(txData, callback) {\n  this.state.queueTransaction(\"eth_sendTransaction\", txData, null, callback);\n};\n\nGethApiDouble.prototype.eth_sendRawTransaction = function(rawTx, callback) {\n  let data;\n  if (rawTx) {\n    data = to.buffer(rawTx);\n  }\n\n  if (data === undefined) {\n    throw new TXRejectedError(\"rawTx must be a string, JSON-encoded Buffer, or Buffer.\");\n  }\n\n  this.state.queueRawTransaction(data, callback);\n};\n\nGethApiDouble.prototype._setCallGasLimit = function(txData) {\n  // if the caller didn't specify a gas limit make sure we set one\n  if (!txData.gas && !txData.gasLimit) {\n    const globalCallGasLimit = this.options.callGasLimit;\n    if (globalCallGasLimit != null) {\n      // if the user configured a global `callGasLimit` use it\n      txData.gas = globalCallGasLimit;\n    } else {\n      // otherwise, set a very high gas limit. We'd use Infinity, or some VM flag to ignore gasLimit checks like\n      // geth does, but the VM doesn't currently support that for `runTx`.\n      // https://github.com/ethereumjs/ethereumjs-vm/blob/4bbb6e394a344717890d618a6be1cf67b8e5b74d/lib/runTx.ts#L71\n      txData.gas = maxSafeInt;\n    }\n  }\n};\nGethApiDouble.prototype.eth_call = function(txData, blockNumber, callback) {\n  this._setCallGasLimit(txData);\n  this.state.queueTransaction(\"eth_call\", txData, blockNumber, callback);\n};\n\nGethApiDouble.prototype.eth_estimateGas = function(txData, blockNumber, callback) {\n  this._setCallGasLimit(txData);\n  this.state.queueTransaction(\"eth_estimateGas\", txData, blockNumber, callback);\n};\n\nGethApiDouble.prototype.eth_getStorageAt = function(address, position, blockNumber, callback) {\n  this.state.queueStorage(address, position, blockNumber, callback);\n};\n\nGethApiDouble.prototype.eth_newBlockFilter = function(callback) {\n  var filterId = utils.addHexPrefix(utils.intToHex(this.state.latestFilterId));\n  this.state.latestFilterId += 1;\n  callback(null, filterId);\n};\n\nGethApiDouble.prototype.eth_getFilterChanges = function(filterId, callback) {\n  var blockHash = this.state\n    .latestBlock()\n    .hash()\n    .toString(\"hex\");\n  // Mine a block after each request to getFilterChanges so block filters work.\n  this.state.mine();\n  callback(null, [blockHash]);\n};\n\nGethApiDouble.prototype.eth_getLogs = function(filter, callback) {\n  this.state.getLogs(filter, callback);\n};\n\nGethApiDouble.prototype.eth_uninstallFilter = function(filterId, callback) {\n  callback(null, true);\n};\n\nGethApiDouble.prototype.eth_protocolVersion = function(callback) {\n  callback(null, \"63\");\n};\n\nGethApiDouble.prototype.bzz_hive = function(callback) {\n  callback(null, []);\n};\n\nGethApiDouble.prototype.bzz_info = function(callback) {\n  callback(null, []);\n};\n\nGethApiDouble.prototype.shh_version = function(callback) {\n  callback(null, \"2\");\n};\n\nGethApiDouble.prototype.eth_getCompilers = function(callback) {\n  callback(null, []);\n};\n\nGethApiDouble.prototype.eth_syncing = function(callback) {\n  callback(null, false);\n};\n\nGethApiDouble.prototype.net_listening = function(callback) {\n  callback(null, true);\n};\n\nGethApiDouble.prototype.net_peerCount = function(callback) {\n  callback(null, 0);\n};\n\nGethApiDouble.prototype.web3_clientVersion = function(callback) {\n  callback(null, \"EthereumJS TestRPC/v\" + pkg.version + \"/ethereum-js\");\n};\n\nGethApiDouble.prototype.web3_sha3 = function(string, callback) {\n  callback(null, to.hex(utils.keccak256(string)));\n};\n\nGethApiDouble.prototype.net_version = function(callback) {\n  // net_version returns a string containing a base 10 integer.\n  callback(null, this.state.net_version + \"\");\n};\n\nGethApiDouble.prototype.miner_start = function(threads, callback) {\n  if (!callback && typeof threads === \"function\") {\n    callback = threads;\n    threads = null;\n  }\n\n  this.state.startMining(function(err) {\n    callback(err, true);\n  });\n};\n\n// indicate that `miner_start` only requires one argument (the callback)\nGethApiDouble.prototype.miner_start.minLength = 1;\n\nGethApiDouble.prototype.miner_stop = function(callback) {\n  this.state.stopMining(function(err) {\n    callback(err, true);\n  });\n};\n\nGethApiDouble.prototype.rpc_modules = function(callback) {\n  // returns the availible api modules and versions\n  callback(null, { eth: \"1.0\", net: \"1.0\", rpc: \"1.0\", web3: \"1.0\", evm: \"1.0\", personal: \"1.0\" });\n};\n\nGethApiDouble.prototype.personal_listAccounts = function(callback) {\n  callback(null, Object.keys(this.state.personal_accounts));\n};\n\nGethApiDouble.prototype.personal_newAccount = function(password, callback) {\n  var account = this.state.createAccount({ generate: true });\n  this.state.accounts[account.address.toLowerCase()] = account;\n  this.state.personal_accounts[account.address.toLowerCase()] = true;\n  this.state.account_passwords[account.address.toLowerCase()] = password;\n  callback(null, account.address);\n};\n\nGethApiDouble.prototype.personal_importRawKey = function(rawKey, password, callback) {\n  var account = this.state.createAccount({ secretKey: rawKey });\n  this.state.accounts[account.address.toLowerCase()] = account;\n  this.state.personal_accounts[account.address.toLowerCase()] = true;\n  this.state.account_passwords[account.address.toLowerCase()] = password;\n  callback(null, account.address);\n};\n\nGethApiDouble.prototype.personal_lockAccount = function(address, callback) {\n  var account = this.state.personal_accounts[address.toLowerCase()];\n  if (account !== true) {\n    var error = \"Account not found\";\n    return callback(error);\n  }\n  delete this.state.unlocked_accounts[address.toLowerCase()];\n  callback(null, true);\n};\n\nGethApiDouble.prototype.personal_unlockAccount = function(address, password, duration, callback) {\n  // FIXME handle duration\n  var account = this.state.personal_accounts[address.toLowerCase()];\n  if (account !== true) {\n    var accountError = \"Account not found\";\n    return callback(accountError);\n  }\n\n  var storedPassword = this.state.account_passwords[address.toLowerCase()];\n  if (storedPassword !== undefined && storedPassword !== password) {\n    var passwordError = \"Invalid password\";\n    return callback(passwordError);\n  }\n\n  this.state.unlocked_accounts[address.toLowerCase()] = true;\n  callback(null, true);\n};\n\nGethApiDouble.prototype.personal_sendTransaction = function(txData, password, callback) {\n  if (txData.from == null) {\n    var error = \"Sender not found\";\n    callback(error);\n    return;\n  }\n\n  var from = utils.addHexPrefix(txData.from).toLowerCase();\n\n  var self = this;\n  self.personal_unlockAccount(from, password, null, function(err) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.state.queueTransaction(\"eth_sendTransaction\", txData, null, function(err, ret) {\n      self.state.unlocked_accounts[from.toLowerCase()] = false;\n      callback(err, ret);\n    });\n  });\n};\n\n/* Functions for testing purposes only. */\n\nGethApiDouble.prototype.evm_snapshot = function(callback) {\n  this.state.snapshot(callback);\n};\n\nGethApiDouble.prototype.evm_revert = function(snapshotId, callback) {\n  this.state.revert(snapshotId, callback);\n};\n\nGethApiDouble.prototype.evm_increaseTime = function(seconds, callback) {\n  callback(null, this.state.blockchain.increaseTime(seconds));\n};\n\nGethApiDouble.prototype.evm_freezeTime = function(seconds, callback) {\n  callback(null, this.state.blockchain.freezeTime(seconds));\n};\n\nGethApiDouble.prototype.evm_mineBlockNumber = function(number, callback) {\n  var self = this;\n  this.state.blockchain.setBlockNumber(number);\n  this.state.processBlock(undefined, function(err) {\n    if (err) {\n      return callback(err);\n    }\n    self.state.blockchain.setBlockNumber(undefined);\n    callback(err, \"0x0\");\n  });\n};\n\nGethApiDouble.prototype.evm_setTime = function(date, callback) {\n  callback(null, this.state.blockchain.setTime(new Date(date)));\n};\n\nGethApiDouble.prototype.evm_mine = function(timestamp, callback) {\n  if (typeof timestamp === \"function\") {\n    callback = timestamp;\n    timestamp = undefined;\n  }\n  this.state.processBlock(timestamp, function(err) {\n    if (err) {\n      return callback(err);\n    }\n    callback(err, \"0x0\");\n  });\n};\n\n// indicate that `evm_mine` only requires one argument (the callback)\nGethApiDouble.prototype.evm_mine.minLength = 1;\n\n/**\n * Unlocks any unknown account.\n *\n * Note: accounts known to the `personal` namespace and accounts returned by\n * `eth_accounts` cannot be unlocked using this method.\n *\n * @param {*} address the address of the account to unlock\n * @param {*} callback\n * @returns `true` if the account was unlocked successfully, `false` if the\n * account was already unlocked. Throws an error if the account could not be\n * unlocked.\n */\nGethApiDouble.prototype.evm_unlockUnknownAccount = function(address, callback) {\n  // check if given address is already unlocked\n  address = address.toLowerCase();\n  if (this.state.unlocked_accounts[address] !== true) {\n    if (this.state.personal_accounts[address] !== true) {\n      // unlock the account\n      this.state.unlocked_accounts[address] = true;\n      return callback(null, true);\n    } else {\n      // if the account is known to the `personal` namespace we may not unlock\n      // it\n      return callback(new Error(\"cannot unlock known/personal account\"));\n    }\n  }\n  // account was already unlocked, return `false`\n  callback(null, false);\n};\n\n/**\n * Locks any unknown account.\n *\n * Note: accounts known to the `personal` namespace and accounts returned by\n * `eth_accounts` cannot be locked using this method.\n *\n * @param {*} address the address of the account to lock\n * @param {*} callback\n * @returns `true` if the account was locked successfully, `false` if the\n * account was already locked. Throws an error if the account could not be\n * locked.\n */\nGethApiDouble.prototype.evm_lockUnknownAccount = function(address, callback) {\n  // Checks if given address is already unlocked\n  address = address.toLowerCase();\n  if (this.state.unlocked_accounts[address]) {\n    if (this.state.personal_accounts[address]) {\n      // if the account is known to the `personal` namespace we may not lock it\n      return callback(new Error(\"cannot lock known/personal account\"));\n    } else {\n      // unlock the account\n      delete this.state.unlocked_accounts[address];\n      return callback(null, true);\n    }\n  }\n  // account wasn't locked to begin with, return `false`\n  callback(null, false);\n};\n\nGethApiDouble.prototype.debug_traceTransaction = function(txHash, params, callback) {\n  if (typeof params === \"function\") {\n    callback = params;\n    params = [];\n  }\n\n  this.state.queueTransactionTrace(txHash, params, callback);\n};\n\n/*\n  RPC AUDIT:\n  TODO ETH: eth_getUncleCountByBlockHash, eth_getUncleCountByBlockNumber, eth_getUncleByBlockHashAndIndex,\n        eth_getUncleByBlockNumberAndIndex, eth_getWork, eth_submitWork, eth_submitHashrate\n\n  TODO DB: db_putString, db_getString, db_putHex, db_getHex\n\n  TODO WHISPER: shh_post, shh_newIdentity, shh_hasIdentity, shh_newGroup, shh_addToGroup,\n        shh_newFilter, shh_uninstallFilter, shh_getFilterChanges, shh_getMessages\n*/\n\n/**\n * Returns the number of uncles in a block from a block matching the given block hash.\n *\n * @param {DATA, 32 Bytes} hash - hash of a block.\n * @callback callback\n * @param {error} err - Error Object\n * @param {QUANTITY} result - integer of the number of uncles in this block.\n */\nGethApiDouble.prototype.eth_getUncleCountByBlockHash = function(hash, callback) {\n  callback(null, \"0x0\");\n};\n\n/**\n * Returns the number of uncles in a block from a block matching the given block number.\n *\n * @param {QUANTITY} blockNumber -\n *  ^integer of a block number, or the string \"latest\", \"earliest\" or \"pending\". Ex: '0xe8', // 232\n * @callback callback\n * @param {error} err - Error Object\n * @param {QUANTITY} result - integer of the number of uncles in this block.\n */\nGethApiDouble.prototype.eth_getUncleCountByBlockNumber = function(blockNumber, callback) {\n  callback(null, \"0x0\");\n};\n\n/**\n * Returns information about a uncle of a block by hash and uncle index position.\n *\n * @param {DATA, 32 Bytes} hash - hash of a block\n * @param {QUANTITY} index - the uncle's index position.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Object} result - A block object,\n */\nGethApiDouble.prototype.eth_getUncleByBlockHashAndIndex = function(hash, index, callback) {\n  callback(null, {});\n};\n\n/**\n * Returns information about a uncle of a block by number and uncle index position.\n *\n * @param {QUANTITY} blockNumber -\n * ^a block number, or the string \"earliest\", \"latest\" or \"pending\", as in the default block parameter.\n * @param {QUANTITY} uncleIndex - the uncle's index position.\n * @callback callback\n * @param {error} err - Error object\n * @param {Object} resutl - A block object,\n */\nGethApiDouble.prototype.eth_getUncleByBlockNumberAndIndex = function(blockNumber, uncleIndex, callback) {\n  callback(null, {});\n};\n\n/**\n * Returns: An Array with the following elements\n * 1: DATA, 32 Bytes - current block header pow-hash\n * 2: DATA, 32 Bytes - the seed hash used for the DAG.\n * 3: DATA, 32 Bytes - the boundary condition (\"target\"), 2^256 / difficulty.\n *\n * @param {QUANTITY} filterId - A filter id\n * @callback callback\n * @param {error} err - Error object\n * @param {Array} result - the hash of the current block, the seedHash, and the boundary condition to be met (\"target\").\n */\nGethApiDouble.prototype.eth_getWork = function(filterId, callback) {\n  callback(null, []);\n};\n\n/**\n * Used for submitting a proof-of-work solution\n *\n * @param {DATA, 8 Bytes} nonce - The nonce found (64 bits)\n * @param {DATA, 32 Bytes} powHash - The header's pow-hash (256 bits)\n * @param {DATA, 32 Bytes} digest - The mix digest (256 bits)\n * @callback callback\n * @param {error} err - Error object\n * @param {Boolean} result - returns true if the provided solution is valid, otherwise false.\n */\nGethApiDouble.prototype.eth_submitWork = function(nonce, powHash, digest, callback) {\n  callback(null, false);\n};\n\n/**\n * Used for submitting mining hashrate.\n *\n * @param {String} hashRate - a hexadecimal string representation (32 bytes) of the hash rate\n * @param {String} clientID - A random hexadecimal(32 bytes) ID identifying the client\n * @callback callback\n * @param {error} err - Error object\n * @param {Boolean} result - returns true if submitting went through succesfully and false otherwise.\n */\nGethApiDouble.prototype.eth_submitHashrate = function(hashRate, clientID, callback) {\n  callback(null, false);\n};\n\n/**\n * Stores a string in the local database.\n *\n * @param {String} dbName - Database name.\n * @param {String} key - Key name.\n * @param {String} value - String to store.\n * @callback callback\n * @param {error} err - Error object\n * @param {Boolean} result - returns true if the value was stored, otherwise false.\n */\nGethApiDouble.prototype.db_putString = function(dbName, key, value, callback) {\n  callback(null, false);\n};\n\n/**\n * Returns string from the local database\n *\n * @param {String} dbName - Database name.\n * @param {String} key - Key name.\n * @callback callback\n * @param {error} - Error Object\n * @param {String} result - The previously stored string.\n */\nGethApiDouble.prototype.db_getString = function(dbName, key, callback) {\n  callback(null, \"\");\n};\n\n/**\n * Stores binary data in the local database.\n *\n * @param {String} dbName - Database name.\n * @param {String} key - Key name.\n * @param {DATA} data - Data to store.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - returns true if the value was stored, otherwise false.\n */\nGethApiDouble.prototype.db_putHex = function(dbName, key, data, callback) {\n  callback(null, false);\n};\n\n/**\n * Returns binary data from the local database\n *\n * @param {String} dbName - Database name.\n * @param {String} key - Key name.\n * @callback callback\n * @param {error} err - Error Object\n * @param {DATA} result - The previously stored data.\n */\nGethApiDouble.prototype.db_getHex = function(dbName, key, callback) {\n  callback(null, \"0x00\");\n};\n\n/**\n * Sends a whisper message.\n *\n * @param {DATA, 60 Bytes} from - (optional) The identity of the sender.\n * @param {DATA, 60 Bytes} to -\n *  ^(optional) The identity of the receiver. When present whisper will encrypt the message so that\n *  only the receiver can decrypt it.\n * @param {Array of DATA} topics - Array of DATA topics, for the receiver to identify messages.\n * @param {DATA} payload - The payload of the message.\n * @param {QUANTITY} priority - The integer of the priority in a range from ... (?).\n * @param {QUANTITY} ttl - integer of the time to live in seconds.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - returns true if the message was sent, otherwise false.\n */\nGethApiDouble.prototype.shh_post = function(from, to, topics, payload, priority, ttl, callback) {\n  callback(null, false);\n};\n\n/**\n * Creates new whisper identity in the client.\n *\n * @callback callback\n * @param {error} err - Error Object\n * @param {DATA, 60 Bytes} result - the address of the new identiy.\n */\nGethApiDouble.prototype.shh_newIdentity = function(callback) {\n  callback(null, \"0x00\");\n};\n\n/**\n * Checks if the client hold the private keys for a given identity.\n *\n * @param {DATA, 60 Bytes} address - The identity address to check.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - returns true if the client holds the privatekey for that identity, otherwise false.\n */\nGethApiDouble.prototype.shh_hasIdentity = function(address, callback) {\n  callback(null, false);\n};\n\n/**\n * Creates a new group.\n *\n * @callback callback\n * @param {error} err - Error Object\n * @param {DATA, 60 Bytes} result - the address of the new group.\n */\nGethApiDouble.prototype.shh_newGroup = function(callback) {\n  callback(null, \"0x00\");\n};\n\n/**\n * Adds a whisper identity to the group\n *\n * @param {DATA, 60 Bytes} - The identity address to add to a group.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - returns true if the identity was successfully added to the group, otherwise false.\n */\nGethApiDouble.prototype.shh_addToGroup = function(address, callback) {\n  callback(null, false);\n};\n\n/**\n * Creates filter to notify, when client receives whisper message matching the filter options.\n *\n * @param {DATA, 60 Bytes} to -\n * ^(optional) Identity of the receiver. When present it will try to decrypt any incoming message\n *  if the client holds the private key to this identity.\n * @param {Array of DATA} topics - Array of DATA topics which the incoming message's topics should match.\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - returns true if the identity was successfully added to the group, otherwise false.\n */\nGethApiDouble.prototype.shh_newFilter = function(to, topics, callback) {\n  callback(null, false);\n};\n\n/**\n * Uninstalls a filter with given id. Should always be called when watch is no longer needed.\n * Additonally Filters timeout when they aren't requested with shh_getFilterChanges for a period of time.\n *\n * @param {QUANTITY} id - The filter id. Ex: \"0x7\"\n * @callback callback\n * @param {error} err - Error Object\n * @param {Boolean} result - true if the filter was successfully uninstalled, otherwise false.\n */\nGethApiDouble.prototype.shh_uninstallFilter = function(id, callback) {\n  callback(null, false);\n};\n\n/**\n * Polling method for whisper filters. Returns new messages since the last call of this method.\n *\n * @param {QUANTITY} id - The filter id. Ex: \"0x7\"\n * @callback callback\n * @param {error} err - Error Object\n * @param {Array} result - More Info: https://github.com/ethereum/wiki/wiki/JSON-RPC#shh_getfilterchanges\n */\nGethApiDouble.prototype.shh_getFilterChanges = function(id, callback) {\n  callback(null, []);\n};\n\n/**\n * Get all messages matching a filter. Unlike shh_getFilterChanges this returns all messages.\n *\n * @param {QUANTITY} id - The filter id. Ex: \"0x7\"\n * @callback callback\n * @param {error} err - Error Object\n * @param {Array} result - See: shh_getFilterChanges\n */\nGethApiDouble.prototype.shh_getMessages = function(id, callback) {\n  callback(null, false);\n};\n\nmodule.exports = GethApiDouble;\n","var Account = require(\"ethereumjs-account\").default;\nvar RuntimeError = require(\"./utils/runtimeerror\");\nvar Transaction = require(\"./utils/transaction\");\nvar utils = require(\"ethereumjs-util\");\nvar seedrandom = require(\"seedrandom\");\nvar bip39 = require(\"bip39\");\nvar wallet = require(\"ethereumjs-wallet\");\nvar hdkey = require(\"ethereumjs-wallet/hdkey\");\nvar async = require(\"async\");\nvar BlockchainDouble = require(\"./blockchain_double.js\");\nvar ForkedBlockchain = require(\"./forking/forked_blockchain.js\");\nvar Web3 = require(\"web3\");\nvar fs = require(\"fs\");\nvar sigUtil = require(\"eth-sig-util\");\nvar _ = require(\"lodash\");\nconst { BlockOutOfRangeError } = require(\"./utils/errorhelper\");\nconst BN = utils.BN;\nconst rlp = require(\"rlp\");\nconst Common = require(\"ethereumjs-common\").default;\n\nconst ZERO_BUFFER = Buffer.from([0]);\n\nvar to = require(\"./utils/to\");\nvar random = require(\"./utils/random\");\nvar TXRejectedError = require(\"./utils/txrejectederror\");\n\nfunction StateManager(options, provider) {\n  this.options = options = this._applyDefaultOptions(options || {});\n\n  if (options.fork) {\n    this.blockchain = new ForkedBlockchain(options);\n  } else {\n    this.blockchain = new BlockchainDouble(options);\n  }\n\n  this.vm = this.blockchain.vm;\n  this.stateTrie = this.blockchain.stateTrie;\n\n  this.accounts = {};\n  this.secure = !!options.secure;\n  this.account_passwords = {};\n  this.personal_accounts = {};\n  this.total_accounts = options.total_accounts;\n  this.coinbase = null;\n\n  this.latest_filter_id = 1;\n\n  // This queue manages actions that shouldn't be run in parallel.\n  // The action_processing flag ensures new actions are queued instead of\n  // run immediately.\n  this.action_queue = [];\n  this.action_processing = false;\n\n  this.snapshots = [];\n  this.logger = options.logger;\n  this.net_version = options.network_id;\n  this.mnemonic = options.mnemonic;\n  this.wallet = hdkey.fromMasterSeed(bip39.mnemonicToSeed(this.mnemonic));\n  this.wallet_hdpath = options.hd_path || options.hdPath;\n\n  this.gasPriceVal = to.rpcQuantityHexString(options.gasPrice);\n\n  this.is_mining = true;\n  this.blockTime = options.blockTime;\n  this.is_mining_on_interval = !!options.blockTime;\n  this.mining_interval_timeout = null;\n\n  this._provider = provider;\n}\n\nconst defaultOptions = {\n  forkCacheSize: 1024 * 1024 * 1024,\n  total_accounts: 10,\n  gasPrice: \"0x77359400\", // 2 gwei\n  default_balance_ether: 100,\n  unlocked_accounts: [],\n  hdPath: \"m/44'/60'/0'/0/\"\n};\n\nStateManager.prototype._applyDefaultOptions = function(options) {\n  // do this so that we can use the same seed on our next run and get the same\n  // results without explicitly setting a seed up front\n  if (!options.seed) {\n    options.seed = random.randomAlphaNumericString(10, seedrandom());\n  }\n\n  // generate a randomized default mnemonic\n  if (!options.mnemonic) {\n    const randomBytes = random.randomBytes(16, seedrandom(options.seed));\n    options.mnemonic = bip39.entropyToMnemonic(randomBytes.toString(\"hex\"));\n  }\n\n  if (!options.fork && !options.network_id) {\n    options.network_id = new Date().getTime();\n  }\n\n  // We want this function to mutate the options object so that we can report\n  // our settings back to our consumer application (e.g., ganache)\n  return _.merge(options, defaultOptions, Object.assign({}, options));\n};\n\nStateManager.prototype.initialize = function(callback) {\n  var self = this;\n\n  var accounts = [];\n\n  const defaultBalanceWei = to.hex(Web3.utils.toWei(self.options.default_balance_ether.toString(), \"ether\"));\n\n  if (self.options.accounts) {\n    accounts = self.options.accounts.map(self.createAccount.bind(self));\n  } else {\n    if (!self.total_accounts) {\n      return callback(\n        new Error(\"Cannot initialize chain: either options.accounts or options.total_accounts must be specified\")\n      );\n    }\n\n    for (var i = 0; i < self.total_accounts; i++) {\n      accounts.push(\n        self.createAccount({\n          index: i,\n          balance: defaultBalanceWei\n        })\n      );\n    }\n  }\n\n  self.coinbase = to.hex(accounts[0].address);\n  self.accounts = {};\n\n  accounts.forEach(function(data) {\n    self.accounts[data.address] = data;\n    self.personal_accounts[data.address.toLowerCase()] = true;\n  });\n\n  // Turn array into object, mostly for speed purposes.\n  // No need for caller to specify private keys.\n  self.unlocked_accounts = self.options.unlocked_accounts.reduce(function(obj, address) {\n    // If it doesn't have a hex prefix, must be a number (either a string or number type).\n    if ((address + \"\").indexOf(\"0x\") !== 0) {\n      const idx = parseInt(address);\n      const account = accounts[idx];\n      if (!account) {\n        throw new Error(`Account at index ${idx} not found. Max index available is ${accounts.length - 1}.`);\n      }\n      address = account.address.toLowerCase();\n    }\n\n    obj[address.toLowerCase()] = true; // can be any value\n    return obj;\n  }, {});\n\n  if (!self.secure) {\n    accounts.forEach(function(data) {\n      self.unlocked_accounts[data.address.toLowerCase()] = data;\n    });\n  }\n\n  if (self.options.account_keys_path) {\n    const fileData = {\n      addresses: {},\n      private_keys: {}\n    };\n    accounts.forEach(function(account) {\n      fileData.private_keys[account.address] = account.secretKey.toString(\"hex\");\n      fileData.addresses[account.address] = account;\n    });\n    const json = JSON.stringify(fileData);\n    fs.writeFileSync(self.options.account_keys_path, json, \"utf8\");\n  }\n\n  self.blockchain.initialize(accounts, function(err) {\n    if (err) {\n      return callback(err);\n    }\n\n    // If the user didn't pass a specific version id in, then use the\n    // forked blockchain's version (if it exists) or create our own.\n    if (!self.net_version) {\n      self.net_version = self.blockchain.forkVersion;\n    }\n\n    if (self.is_mining_on_interval) {\n      self.mineOnInterval();\n    }\n    callback();\n  });\n};\n\nStateManager.prototype._minerCancellationToken = null;\nStateManager.prototype.mineOnInterval = function() {\n  // cancel the a previous miner's timeout\n  clearTimeout(this.mining_interval_timeout);\n\n  // make sure a pending eth_mine doesn't come back and execute mineOnInterval\n  // again...\n  if (this._minerCancellationToken !== null) {\n    this._minerCancellationToken.cancelled = true;\n  }\n\n  // if mining was stopped `mineOnInterval` shouldn't start mining again\n  if (!this.is_mining) {\n    this.logger.log(\"Warning: mineOnInterval called when miner was stopped\");\n    return;\n  }\n\n  const cancellationToken = { cancelled: false };\n  this._minerCancellationToken = cancellationToken;\n\n  const timeout = (this.mining_interval_timeout = setTimeout(\n    this._provider.send.bind(this._provider),\n    this.blockTime * 1000,\n    { method: \"evm_mine\" },\n    () => {\n      if (!cancellationToken.cancelled) {\n        this.mineOnInterval.bind(this)();\n      }\n    }\n  ));\n\n  // Ensure this won't keep a node process open.\n  if (typeof timeout.unref === \"function\") {\n    timeout.unref();\n  }\n};\n\nStateManager.prototype.createAccount = function(opts, i) {\n  var secretKey;\n\n  if (opts.generate) {\n    secretKey = wallet.generate().getPrivateKey();\n  } else if (opts.secretKey) {\n    secretKey = utils.toBuffer(to.hex(opts.secretKey));\n  } else {\n    var index = typeof opts.index === \"undefined\" ? i : opts.index;\n    var acct = this.wallet.derivePath(this.wallet_hdpath + index); // index is a number\n    secretKey = acct.getWallet().getPrivateKey(); // Buffer\n  }\n\n  var publicKey = utils.privateToPublic(secretKey);\n  var address = utils.publicToAddress(publicKey);\n\n  var account = new Account();\n\n  account.balance = to.hex(opts.balance);\n\n  var data = {\n    secretKey: secretKey,\n    publicKey: publicKey,\n    address: to.hex(address).toLowerCase(),\n    account: account\n  };\n\n  return data;\n};\n\nStateManager.prototype.blockNumber = function(callback) {\n  return this.blockchain.getHeight(callback);\n};\n\nStateManager.prototype.gasPrice = function() {\n  return this.gasPriceVal;\n};\n\nStateManager.prototype.getBalance = function(address, number, callback) {\n  this.blockchain.getBalance(address, number, function(err, balance) {\n    if (balance) {\n      balance = to.rpcQuantityHexString(balance);\n    }\n    callback(err, balance);\n  });\n};\n\nStateManager.prototype.getTransactionCount = function(address, number, callback) {\n  this.blockchain.getNonce(address, number, function(err, nonce) {\n    if (nonce) {\n      nonce = to.rpcQuantityHexString(nonce);\n    }\n    callback(err, nonce);\n  });\n};\n\nStateManager.prototype.getCode = function(address, number, callback) {\n  this.blockchain.getCode(address, number, function(err, code) {\n    if (code) {\n      code = to.hex(code);\n    }\n    callback(err, code);\n  });\n};\n\nStateManager.prototype.queueRawTransaction = function(data, callback) {\n  // a hack until we get chainid and networkId alignment\n  // in the next major (breaking_change) version:\n  // Reason: historically we didn't validate chain ids.\n  let chainId;\n  if (Buffer.isBuffer(data)) {\n    const decodedData = rlp.decode(data);\n    let v = decodedData[6];\n    if (v !== undefined) {\n      v = utils.bufferToInt(v);\n      chainId = Math.floor((v - 35) / 2);\n      if (chainId < 0) {\n        chainId = 0;\n      }\n    }\n  }\n  const common = !chainId\n    ? this.blockchain.vm.opts.common\n    : Common.forCustomChain(\n      \"mainnet\", // TODO needs to match chain id\n      {\n        name: \"ganache\",\n        networkId: this.options.network_id || this.blockchain.forkVersion,\n        chainId,\n        comment: \"Local test network\",\n        bootstrapNodes: []\n      },\n      this.options.hardfork\n    );\n  const tx = new Transaction(data, Transaction.types.signed, common);\n  // use toLowerCase() to properly handle from addresses meant to be validated.\n  const from = to.hex(tx.from).toLowerCase();\n  this._queueTransaction(\"eth_sendRawTransaction\", tx, from, null, callback);\n};\n\nStateManager.prototype.queueStorage = function(address, position, block, callback) {\n  this.action_queue.push({\n    method: \"eth_getStorageAt\",\n    address: utils.addHexPrefix(address),\n    position: utils.addHexPrefix(position),\n    block: block,\n    callback: callback\n  });\n\n  // We know there's work, so get started.\n  this.processNextAction();\n};\n\nStateManager.prototype.queueTransaction = function(method, txJsonRpc, blockNumber, callback) {\n  // use toLowerCase() to properly handle from addresses meant to be validated.\n  const from = txJsonRpc.from ? to.hex(txJsonRpc.from).toLowerCase() : null;\n\n  if (from == null) {\n    callback(new TXRejectedError(\"from not found; is required\"));\n    return;\n  }\n\n  // Error checks. It's possible to JSON.stringify a Buffer to JSON.\n  // we actually now handle this \"properly\" (not sure about spec), but for\n  // legacy reasons we don't allow it.\n  if (txJsonRpc.to && typeof txJsonRpc.to !== \"string\") {\n    return callback(new TXRejectedError(\"Invalid to address\"));\n  }\n\n  const hasOwnProperty = Object.prototype.hasOwnProperty;\n  const isKnownAccount = hasOwnProperty.call(this.accounts, from);\n\n  if (method === \"eth_sendTransaction\" && !hasOwnProperty.call(this.unlocked_accounts, from)) {\n    const msg = isKnownAccount ? \"signer account is locked\" : \"sender account not recognized\";\n    return callback(new TXRejectedError(msg));\n  }\n\n  let type = Transaction.types.none;\n  if (!isKnownAccount || method === \"eth_call\" || method === \"eth_estimateGas\") {\n    type |= Transaction.types.fake;\n  }\n\n  let tx;\n  try {\n    tx = Transaction.fromJSON(txJsonRpc, type, this.blockchain.vm.opts.common);\n    this._setTransactionDefaults(tx, method === \"eth_sendTransaction\");\n  } catch (e) {\n    callback(e);\n    return;\n  }\n  this._queueTransaction(method, tx, from, blockNumber, callback);\n};\n\nStateManager.prototype._setTransactionDefaults = function(tx, isTransaction) {\n  if (isTransaction && tx.gasLimit.length === 0) {\n    tx.gasLimit = utils.toBuffer(this.blockchain.defaultTransactionGasLimit);\n  }\n\n  if (tx.gasPrice.length === 0) {\n    tx.gasPrice = utils.toBuffer(this.gasPriceVal);\n  }\n\n  if (tx.value.length === 0) {\n    tx.value = Buffer.from([0]);\n  }\n\n  if (tx.to.length === 0 || tx.to.equals(ZERO_BUFFER)) {\n    tx.to = Buffer.allocUnsafe(0);\n  }\n};\n\nStateManager.prototype._queueTransaction = function(method, tx, from, blockNumber, callback) {\n  if (!(tx instanceof Transaction)) {\n    throw new TXRejectedError(\"tx must be of type Transaction\");\n  }\n\n  // If the transaction has a higher gas limit than the block gas limit, error.\n  if (\n    (method === \"eth_sendRawTransaction\" || method === \"eth_sendTransaction\") &&\n    to.number(tx.gasLimit) > to.number(this.blockchain.blockGasLimit)\n  ) {\n    return callback(new TXRejectedError(\"Exceeds block gas limit\"));\n  }\n\n  this.action_queue.push({\n    method,\n    from,\n    tx,\n    callback,\n    blockNumber\n  });\n\n  // We know there's work, so get started.\n  this.processNextAction();\n};\n\nStateManager.prototype.queueTransactionTrace = function(txHash, params, callback) {\n  this.action_queue.push({\n    method: \"debug_traceTransaction\",\n    hash: to.hex(txHash),\n    params: params,\n    callback: callback\n  });\n\n  // We know there's work, so get started.\n  this.processNextAction();\n};\n\nStateManager.prototype.processNextAction = function(override) {\n  var self = this;\n\n  if (override !== true) {\n    if (this.action_processing === true || this.action_queue.length === 0) {\n      return;\n    }\n  }\n\n  var queued = this.action_queue.shift();\n\n  // Set the flag that we're currently processing something.\n  this.action_processing = true;\n\n  var intermediary = function(err, result) {\n    queued.callback(err, result);\n\n    if (self.action_queue.length > 0) {\n      self.processNextAction(true);\n    } else {\n      self.action_processing = false;\n    }\n  };\n\n  if (typeof queued.method === \"function\") {\n    var result = queued.method();\n    return intermediary(null, result);\n  } else if (queued.method === \"eth_getStorageAt\") {\n    this.blockchain.getStorage(queued.address, queued.position, queued.block, function(err, result) {\n      if (err) {\n        return intermediary(err);\n      }\n\n      if (result) {\n        result = utils.rlp.decode(result);\n      }\n\n      result = to.hex(result || 0);\n      intermediary(null, result);\n    });\n  } else if (queued.method === \"debug_traceTransaction\") {\n    this.blockchain.processTransactionTrace(queued.hash, queued.params, intermediary);\n  } else if (queued.method === \"eth_sendTransaction\" || queued.method === \"eth_sendRawTransaction\") {\n    this.processTransaction(queued.from, queued.tx, intermediary);\n  } else if (queued.method === \"eth_call\") {\n    this.processCall(queued.from, queued.tx, queued.blockNumber, intermediary);\n  } else if (queued.method === \"eth_estimateGas\") {\n    this.processGasEstimate(queued.from, queued.tx, queued.blockNumber, intermediary);\n  }\n};\n\nStateManager.prototype.sign = function(address, dataToSign) {\n  var account = this.accounts[to.hex(address).toLowerCase()];\n\n  if (!account) {\n    throw new Error(\"cannot sign data; no private key\");\n  }\n\n  var secretKey = account.secretKey;\n  var msg = to.buffer(dataToSign, \"hex\");\n  var msgHash = utils.hashPersonalMessage(msg);\n  var sgn = utils.ecsign(msgHash, Buffer.from(secretKey));\n  // ethereumjs-utils changed the behavior of toRpcSig so that the `v` value\n  // output by `toRpcSig` is always `sgn.v - 27` (basically `0` or `1`). In\n  // order to avoid a breaking change in Ganache at this time we are calculating\n  // a chain ID that will always a) validate the v, and b) generate an output v\n  // of `0` or `1`, like it used to.\n  const v = sgn.v - 27;\n  const chainId = (v - 35) / 2;\n  return utils.toRpcSig(v, sgn.r, sgn.s, chainId);\n};\n\nStateManager.prototype.signTypedData = function(address, typedDataToSign) {\n  var account = this.accounts[to.hex(address).toLowerCase()];\n  if (!account) {\n    throw new Error(\"cannot sign data; no private key\");\n  }\n\n  if (!typedDataToSign.types) {\n    throw new Error(\"cannot sign data; types missing\");\n  }\n\n  if (!typedDataToSign.types.EIP712Domain) {\n    throw new Error(\"cannot sign data; EIP712Domain definition missing\");\n  }\n\n  if (!typedDataToSign.domain) {\n    throw new Error(\"cannot sign data; domain missing\");\n  }\n\n  if (!typedDataToSign.primaryType) {\n    throw new Error(\"cannot sign data; primaryType missing\");\n  }\n\n  if (!typedDataToSign.message) {\n    throw new Error(\"cannot sign data; message missing\");\n  }\n\n  return sigUtil.signTypedData_v4(account.secretKey, { data: typedDataToSign });\n};\n\nStateManager.prototype.printTransactionReceipt = function(txHash, error, callback) {\n  var self = this;\n\n  self.blockchain.getTransactionReceipt(txHash, function(err, receipt) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.blockchain.latestBlock(function(err, block) {\n      if (err) {\n        return callback(err);\n      }\n\n      receipt = receipt.toJSON();\n\n      self.logger.log(\"\");\n      self.logger.log(\"  Transaction: \" + txHash);\n\n      if (receipt.contractAddress != null) {\n        self.logger.log(\"  Contract created: \" + receipt.contractAddress);\n      }\n\n      self.logger.log(\"  Gas usage: \" + parseInt(receipt.gasUsed, 16));\n      self.logger.log(\"  Block Number: \" + parseInt(receipt.blockNumber, 16));\n      self.logger.log(\"  Block Time: \" + new Date(to.number(block.header.timestamp) * 1000).toString());\n\n      if (error) {\n        self.logger.log(\"  Runtime Error: \" + error.error);\n        if (error.reason) {\n          self.logger.log(\"  Revert reason: \" + error.reason);\n        }\n      }\n\n      self.logger.log(\"\");\n\n      callback(null, txHash);\n    });\n  });\n};\n\nStateManager.prototype.processBlock = function(timestamp, callback) {\n  var self = this;\n\n  if (typeof timestamp === \"function\") {\n    callback = timestamp;\n    timestamp = null;\n  }\n\n  self.blockchain.processNextBlock(timestamp, function(runtimeError, transactions, vmOutput) {\n    if (runtimeError && runtimeError instanceof RuntimeError === false) {\n      // This is bad. Get out.\n      return callback(runtimeError, transactions, vmOutput);\n    }\n\n    // TODO: Can we refactor printTransactionReceipt so it's synchronous?\n    // We technically have the raw vm receipts (though they're not full receipts here...).\n    async.eachSeries(\n      transactions,\n      function(tx, finishedPrinting) {\n        var hash = to.hex(tx.hash());\n        var error = runtimeError == null ? { results: {} } : runtimeError;\n        self.printTransactionReceipt(hash, error.results[hash], finishedPrinting);\n      },\n      callback(runtimeError, transactions, vmOutput)\n    );\n  });\n};\n\nStateManager.prototype.processBlocks = function(totalBlocks, callback) {\n  var self = this;\n\n  if (typeof totalBlocks === \"function\") {\n    callback = totalBlocks;\n    totalBlocks = null;\n  }\n\n  // Note: VM errors (errors that the VM directly returns) trump all runtime errors.\n  var runtimeError = null;\n  var amountProcessed = 0;\n\n  async.whilst(\n    function() {\n      var shouldContinue;\n\n      if (totalBlocks == null) {\n        shouldContinue = self.blockchain.pending_transactions.length > 0;\n      } else {\n        shouldContinue = amountProcessed < totalBlocks;\n      }\n\n      return shouldContinue;\n    },\n    function(done) {\n      self.processBlock(function(err, transactions, vmOutput) {\n        amountProcessed += 1;\n\n        if (err) {\n          if (err instanceof RuntimeError === false) {\n            // This is bad. Get out.\n            return done(err);\n          }\n\n          // We must have a RuntimeError. Merge results if we've found\n          // other runtime errors during this execution.\n          if (runtimeError == null) {\n            runtimeError = err;\n          } else {\n            runtimeError.combine(err);\n          }\n        }\n\n        // Note we don't quit on runtime errors. We keep processing transactions.\n        done();\n      });\n    },\n    function(err) {\n      // Remember: vm errors trump runtime errors\n      callback(err || runtimeError);\n    }\n  );\n};\n\nStateManager.prototype.processCall = function(from, tx, blockNumber, callback) {\n  var self = this;\n\n  function next(err, tx) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.blockchain.processCall(tx, blockNumber, function(err, results) {\n      if (err) {\n        if (err instanceof BlockOutOfRangeError) {\n          // block doesn't exist\n          return callback(null, null);\n        }\n        return callback(err);\n      }\n\n      var result = \"0x\";\n      if (!results.error && results.execResult.returnValue) {\n        result = to.hex(results.execResult.returnValue);\n      } else if (results.error) {\n        self.logger.log(`Error processing call: ${results.error}`);\n      }\n\n      return callback(null, result);\n    });\n  }\n\n  // `eth_call` should never need to validate an existing nonce\n  if (tx.nonce.length === 0) {\n    self.createTransactionWithCorrectNonce(tx, from, next);\n  } else {\n    next(null, tx);\n  }\n};\n\nStateManager.prototype.processGasEstimate = function(from, tx, blockNumber, callback) {\n  var self = this;\n\n  function next(err, tx) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.blockchain.estimateGas(tx, blockNumber, function(err, results) {\n      if (err) {\n        return callback(err);\n      }\n      var result = \"0x\";\n      if (!results.error) {\n        result = to.hex(results.gasEstimate);\n      } else {\n        self.logger.log(`Error calculating gas estimate: ${results.error}`);\n      }\n      return callback(null, result);\n    });\n  }\n\n  // `eth_estimateGas` should never need to validate an existing nonce\n  if (tx.nonce.length === 0) {\n    self.createTransactionWithCorrectNonce(tx, from, next);\n  } else {\n    next(null, tx);\n  }\n};\n\nStateManager.prototype.processTransaction = function(from, tx, callback) {\n  var self = this;\n\n  self.createTransactionWithCorrectNonce(tx, from, function(err, tx) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.blockchain.queueTransaction(tx);\n\n    var txHash = to.hex(tx.hash());\n\n    // If we're not currently mining or we're mining on an interval,\n    // only queue the transaction, don't process it.\n    if (self.is_mining === false || self.is_mining_on_interval) {\n      return callback(null, txHash);\n    }\n\n    self.processBlocks(function(err) {\n      if (err) {\n        return callback(err);\n      }\n      callback(null, txHash);\n    });\n  });\n};\n\nStateManager.prototype.getTransactionReceipt = function(hash, callback) {\n  this.blockchain.getTransactionReceipt(hash, function(err, receipt) {\n    if (err && err.notFound) {\n      // Return null if the receipt's not found.\n      return callback(null, null);\n    }\n    callback(err, receipt);\n  });\n};\n\nStateManager.prototype.getBlock = function(hashOrNumber, callback) {\n  this.blockchain.getBlock(hashOrNumber, callback);\n};\n\nStateManager.prototype.getLogs = function(filter, callback) {\n  var self = this;\n\n  // filter.address may be a single address or an array\n  // https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_getlogs\n  var expectedAddress = filter.address && (Array.isArray(filter.address) ? filter.address : [filter.address]);\n  expectedAddress =\n    expectedAddress &&\n    expectedAddress.map(function(a) {\n      return a.toLowerCase();\n    });\n  var expectedTopics = filter.topics || [];\n\n  async.parallel(\n    {\n      fromBlock: this.blockchain.getEffectiveBlockNumber.bind(this.blockchain, filter.fromBlock || \"latest\"),\n      toBlock: this.blockchain.getEffectiveBlockNumber.bind(this.blockchain, filter.toBlock || \"latest\"),\n      latestBlock: this.blockchain.getEffectiveBlockNumber.bind(this.blockchain, \"latest\"),\n      block: this.blockchain.getBlock.bind(this.blockchain, filter.blockHash || 0)\n    },\n    function(err, results) {\n      if (err) {\n        return callback(err);\n      }\n      var fromBlock = results.fromBlock;\n      var toBlock = results.toBlock;\n      var latestBlock = results.latestBlock;\n      var block = results.block;\n\n      if (toBlock > latestBlock) {\n        toBlock = latestBlock;\n      }\n\n      if (filter.blockHash) {\n        fromBlock = to.number(block.header.number);\n        toBlock = to.number(block.header.number);\n      }\n\n      var logs = [];\n      var current = fromBlock;\n\n      async.whilst(\n        function() {\n          return current <= toBlock;\n        },\n        function(finished) {\n          self.blockchain.getBlockLogs(current, function(err, blockLogs) {\n            if (err) {\n              return finished(err);\n            }\n\n            // Filter logs that match the address\n            var filtered = !expectedAddress\n              ? blockLogs\n              : blockLogs.filter(function(log) {\n                return expectedAddress.indexOf(log.address.toLowerCase()) > -1;\n              });\n\n            // Now filter based on topics.\n            filtered = filtered.filter(function(log) {\n              var keep = true;\n              for (var i = 0; i < expectedTopics.length; i++) {\n                var expectedTopic = expectedTopics[i];\n                var logTopic = log.topics[i];\n                if (expectedTopic == null) {\n                  continue;\n                }\n                var isMatch = Array.isArray(expectedTopic)\n                  ? expectedTopic.includes(logTopic)\n                  : expectedTopic === logTopic;\n                if (i >= log.topics.length || !isMatch) {\n                  keep = false;\n                  break;\n                }\n              }\n              return keep;\n            });\n\n            logs.push.apply(logs, filtered);\n\n            current += 1;\n            finished();\n          });\n        },\n        function(err) {\n          if (err) {\n            return callback(err);\n          }\n\n          logs = logs.map(function(log) {\n            return log.toJSON();\n          });\n\n          callback(err, logs);\n        }\n      );\n    }\n  );\n};\n\n// Note: Snapshots have 1-based ids.\nStateManager.prototype.snapshot = function(callback) {\n  var self = this;\n\n  this.blockchain.getHeight(function(err, blockNumber) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.snapshots.push({\n      blockNumber: blockNumber,\n      timeAdjustment: self.blockchain.timeAdjustment\n    });\n\n    self.logger.log(\"Saved snapshot #\" + self.snapshots.length);\n\n    callback(null, to.hex(self.snapshots.length));\n  });\n};\n\nStateManager.prototype.revert = function(snapshotId, callback) {\n  var self = this;\n\n  if (snapshotId === null || snapshotId === undefined) {\n    callback(new Error(\"invalid snapshotId\"));\n    return;\n  }\n  // Convert from hex.\n  try {\n    snapshotId = utils.bufferToInt(snapshotId);\n  } catch (e) {\n    callback(e);\n    return;\n  }\n\n  this.logger.log(\"Reverting to snapshot #\" + snapshotId);\n\n  if (snapshotId > this.snapshots.length || snapshotId <= 0) {\n    // the snapshot doesn't exist now, or it has already been reverted\n    callback(null, false);\n    return false;\n  }\n\n  // Convert to zero based.\n  snapshotId = snapshotId - 1;\n  var timeAdjustment = this.snapshots[snapshotId].timeAdjustment;\n\n  // Loop through each snapshot with a higher id than the current one.\n  async.whilst(\n    function() {\n      return self.snapshots.length > snapshotId;\n    },\n    function(nextSnapshot) {\n      var snapshot = self.snapshots.pop();\n\n      // For each snapshot, asynchronously pop off the blocks it represents.\n      async.during(\n        function(doneWithTest) {\n          self.blockchain.getHeight(function(err, blockNumber) {\n            if (err) {\n              return doneWithTest(err);\n            }\n\n            doneWithTest(null, blockNumber > snapshot.blockNumber);\n          });\n        },\n        function(nextBlock) {\n          self.blockchain.popBlock(function(err) {\n            if (err) {\n              return nextBlock(err);\n            }\n            nextBlock();\n          });\n        },\n        nextSnapshot\n      );\n    },\n    function(err) {\n      if (err) {\n        return callback(err);\n      }\n\n      // Pending transactions are removed when you revert.\n      self.blockchain.clearPendingTransactions();\n      // The time adjustment is restored to its prior state\n      self.blockchain.timeAdjustment = timeAdjustment;\n\n      callback(null, true);\n    }\n  );\n};\n\nStateManager.prototype.hasContractCode = function(address, callback) {\n  this.vm.stateManager.getContractCode(address, function(err, result) {\n    if (err != null) {\n      callback(err, false);\n    } else {\n      callback(null, true);\n    }\n  });\n};\n\nStateManager.prototype.startMining = function(callback) {\n  if (this.is_mining) {\n    process.nextTick(callback);\n    this.logger.log(\"Warning: startMining called when miner was already started\");\n    return;\n  }\n\n  this.is_mining = true;\n\n  if (this.is_mining_on_interval) {\n    this.mineOnInterval();\n    process.nextTick(callback);\n  } else {\n    this.processBlocks(callback);\n  }\n};\n\nStateManager.prototype.stopMining = function(callback) {\n  if (this.is_mining) {\n    if (this._minerCancellationToken) {\n      this._minerCancellationToken.cancelled = true;\n      this._minerCancellationToken = null;\n    }\n    this.is_mining = false;\n    clearTimeout(this.mining_interval_timeout);\n    this.mining_interval_timeout = null;\n  } else {\n    this.logger.log(\"Warning: stopMining called when miner was already stopped\");\n  }\n  callback && process.nextTick(callback);\n};\n\nStateManager.prototype.isUnlocked = function(address) {\n  return this.unlocked_accounts[address.toLowerCase()] != null;\n};\n\nStateManager.prototype.createTransactionWithCorrectNonce = function(tx, from, callback) {\n  // account for transactions waiting in the tx queue\n  this.blockchain.getQueuedNonce(from, (err, expectedNonce) => {\n    if (err) {\n      return callback(err);\n    }\n\n    const validateNonce = (tx, expectedNonce) => {\n      if (tx.validateNonce(expectedNonce)) {\n        return Promise.resolve(tx);\n      } else {\n        const expected = new BN(expectedNonce).toString(10);\n        const actual = new BN(tx.nonce).toString(10);\n        return Promise.reject(\n          new TXRejectedError(\n            `the tx doesn't have the correct nonce. account has nonce of: ${expected} tx has nonce of: ${actual}`\n          )\n        );\n      }\n    };\n    const done = (tx) => callback(null, tx);\n\n    if (tx.isSigned()) {\n      validateNonce(tx, expectedNonce)\n        .then(done)\n        .catch(callback);\n    } else {\n      const sign = (tx) => {\n        // we need to sign transactions if they haven't been signed already\n        // but we never sign fake transactions\n        if (!tx.isFake() && !tx.isSigned()) {\n          const account = this.accounts[from];\n          if (account) {\n            tx.sign(account.secretKey);\n          }\n        }\n        return Promise.resolve(tx);\n      };\n\n      // Validate the tx's nonce and then sign the transaction.\n      // By signing this transaction now we ensure all future calls to tx.hash()\n      // return the same signed transaction hash. It's sort of an unintuitive\n      // quirk of etheremjs-tx that:\n      //   tx.hash(includeSignature);\n      //   tx.sign(secretKey);\n      //   tx.hash(includeSignature);\n      // will produce different hashes.\n      if (tx.nonce.length === 0) {\n        // Since this transaction is unsigned and the nonce was not defined\n        // we can go ahead and change the nonce and not worry about\n        // invalidating the tx hash the client may be expecting (automatic nonce\n        // calculation should have been expected by the client in this case).\n        tx.nonce = expectedNonce;\n        sign(tx).then(done);\n      } else {\n        validateNonce(tx, expectedNonce)\n          .then(sign)\n          .then(done)\n          .catch(callback);\n      }\n    }\n  });\n};\nmodule.exports = StateManager;\n","module.exports = require(\"ethereumjs-abi\");","module.exports = require(\"assert\");","module.exports = require(\"seedrandom\");","module.exports = require(\"bip39\");","module.exports = require(\"safe-buffer\");","module.exports = require(\"randombytes\");","module.exports = require(\"scryptsy\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"bs58check\");","'use strict';\n\nvar _require = require('ethereum-cryptography/hdkey'),\n    HDKey = _require.HDKey;\n\nvar Wallet = require('./index.js');\n\nfunction EthereumHDKey() {}\n\n/*\n * Horrible wrapping.\n */\nfunction fromHDKey(hdkey) {\n  var ret = new EthereumHDKey();\n  ret._hdkey = hdkey;\n  return ret;\n}\n\nEthereumHDKey.fromMasterSeed = function (seedBuffer) {\n  return fromHDKey(HDKey.fromMasterSeed(seedBuffer));\n};\n\nEthereumHDKey.fromExtendedKey = function (base58key) {\n  return fromHDKey(HDKey.fromExtendedKey(base58key));\n};\n\nEthereumHDKey.prototype.privateExtendedKey = function () {\n  if (!this._hdkey.privateExtendedKey) {\n    throw new Error('This is a public key only wallet');\n  }\n  return this._hdkey.privateExtendedKey;\n};\n\nEthereumHDKey.prototype.publicExtendedKey = function () {\n  return this._hdkey.publicExtendedKey;\n};\n\nEthereumHDKey.prototype.derivePath = function (path) {\n  return fromHDKey(this._hdkey.derive(path));\n};\n\nEthereumHDKey.prototype.deriveChild = function (index) {\n  return fromHDKey(this._hdkey.deriveChild(index));\n};\n\nEthereumHDKey.prototype.getWallet = function () {\n  if (this._hdkey._privateKey) {\n    return Wallet.fromPrivateKey(this._hdkey._privateKey);\n  } else {\n    return Wallet.fromPublicKey(this._hdkey._publicKey, true);\n  }\n};\n\nmodule.exports = EthereumHDKey;","module.exports = require(\"ethereum-cryptography/hdkey\");","module.exports = require(\"ethereumjs-vm\");","module.exports = require(\"heap\");","var LevelUpArrayAdapter = require(\"./database/leveluparrayadapter\");\nvar LevelUpObjectAdapter = require(\"./database/levelupobjectadapter\");\nvar levelup = require(\"levelup\");\nvar encode = require(\"encoding-down\");\nvar filedown = require(\"./database/filedown\");\nvar cachedown = require(\"cachedown\");\nvar txserializer = require(\"./database/txserializer\");\nvar blockserializer = require(\"./database/blockserializer\");\nvar bufferserializer = require(\"./database/bufferserializer\");\nvar BlockLogsSerializer = require(\"./database/blocklogsserializer\");\nvar ReceiptSerializer = require(\"./database/receiptserializer\");\nvar tmp = require(\"tmp\");\n\nfunction Database(options) {\n  this.options = options;\n  this.directory = null;\n}\n\nDatabase.prototype.initialize = function(callback) {\n  var self = this;\n\n  function getDir(cb) {\n    if (self.options.db_path) {\n      cb(null, self.options.db_path);\n    } else {\n      tmp.dir(cb);\n    }\n  }\n\n  getDir(function(err, directory) {\n    if (err) {\n      return callback(err);\n    }\n    const levelupOptions = { valueEncoding: \"json\" };\n    if (self.options.db) {\n      const store = self.options.db;\n      levelup(store, levelupOptions, finishInitializing);\n    } else {\n      self.directory = directory;\n      const store = encode(cachedown(directory, filedown).maxSize(100), levelupOptions);\n      levelup(store, {}, finishInitializing);\n    }\n  });\n\n  function finishInitializing(err, db) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.db = db;\n\n    // Blocks, keyed by array index (not necessarily by block number) (0-based)\n    self.blocks = new LevelUpArrayAdapter(\"blocks\", self.db, blockserializer);\n\n    // Logs triggered in each block, keyed by block id (ids in the blocks array; not necessarily block number) (0-based)\n    self.blockLogs = new LevelUpArrayAdapter(\"blockLogs\", self.db, new BlockLogsSerializer(self));\n\n    // Block hashes -> block ids (ids in the blocks array; not necessarily block number) for quick lookup\n    self.blockHashes = new LevelUpObjectAdapter(\"blockHashes\", self.db);\n\n    // Transaction hash -> transaction objects\n    self.transactions = new LevelUpObjectAdapter(\"transactions\", self.db, txserializer);\n\n    // Transaction hash -> transaction receipts\n    self.transactionReceipts = new LevelUpObjectAdapter(\"transactionReceipts\", self.db, new ReceiptSerializer(self));\n\n    self.trie_db = new LevelUpObjectAdapter(\"trie_db\", self.db, bufferserializer, bufferserializer);\n\n    callback();\n  }\n};\n\nDatabase.prototype.close = function(callback) {\n  callback();\n};\n\nmodule.exports = Database;\n","var Sublevel = require(\"level-sublevel\");\nconst { LevelUpOutOfRangeError, BlockOutOfRangeError } = require(\"../utils/errorhelper\");\n\n// Level up adapter that looks like an array. Doesn't support inserts.\n\nfunction LevelUpArrayAdapter(name, db, serializer) {\n  this.db = Sublevel(db);\n  this.db = this.db.sublevel(name);\n  this.name = name;\n  this.serializer = serializer || {\n    encode: function(val, callback) {\n      callback(null, val);\n    },\n    decode: function(val, callback) {\n      callback(null, val);\n    }\n  };\n}\n\nLevelUpArrayAdapter.prototype.length = function(callback) {\n  this.db.get(\"length\", function(err, result) {\n    if (err) {\n      if (err.notFound) {\n        return callback(null, 0);\n      } else {\n        return callback(err);\n      }\n    }\n\n    callback(null, result);\n  });\n};\n\nLevelUpArrayAdapter.prototype._get = function(key, callback) {\n  var self = this;\n  this.db.get(key, function(err, val) {\n    if (err) {\n      return callback(err);\n    }\n    self.serializer.decode(val, callback);\n  });\n};\n\nLevelUpArrayAdapter.prototype._put = function(key, value, callback) {\n  var self = this;\n  this.serializer.encode(value, function(err, encoded) {\n    if (err) {\n      return callback(err);\n    }\n    self.db.put(key, encoded, callback);\n  });\n};\n\nLevelUpArrayAdapter.prototype.get = function(index, callback) {\n  var self = this;\n\n  this.length(function(err, length) {\n    if (err) {\n      return callback(err);\n    }\n    if (index >= length) {\n      // index out of range\n      const RangeError =\n        self.name === \"blocks\"\n          ? new BlockOutOfRangeError(index, length)\n          : new LevelUpOutOfRangeError(self.name, index, length);\n      return callback(RangeError);\n    }\n    self._get(index, callback);\n  });\n};\n\nLevelUpArrayAdapter.prototype.push = function(val, callback) {\n  var self = this;\n  this.length(function(err, length) {\n    if (err) {\n      return callback(err);\n    }\n\n    // TODO: Do this in atomic batch.\n    self._put(length + \"\", val, function(err) {\n      if (err) {\n        return callback(err);\n      }\n      self.db.put(\"length\", length + 1, callback);\n    });\n  });\n};\n\nLevelUpArrayAdapter.prototype.pop = function(callback) {\n  var self = this;\n\n  this.length(function(err, length) {\n    if (err) {\n      return callback(err);\n    }\n\n    var newLength = length - 1;\n\n    // TODO: Do this in atomic batch.\n    self._get(newLength + \"\", function(err, val) {\n      if (err) {\n        return callback(err);\n      }\n      self.db.del(newLength + \"\", function(err) {\n        if (err) {\n          return callback(err);\n        }\n        self.db.put(\"length\", newLength, function(err) {\n          if (err) {\n            return callback(err);\n          }\n\n          callback(null, val);\n        });\n      });\n    });\n  });\n};\n\nLevelUpArrayAdapter.prototype.last = function(callback) {\n  var self = this;\n  this.length(function(err, length) {\n    if (err) {\n      return callback(err);\n    }\n\n    if (length === 0) {\n      return callback(null, null);\n    }\n\n    self._get(length - 1 + \"\", callback);\n  });\n};\n\nLevelUpArrayAdapter.prototype.first = function(callback) {\n  this._get(\"0\", callback);\n};\n\nmodule.exports = LevelUpArrayAdapter;\n","var Sublevel = require(\"level-sublevel\");\nvar async = require(\"async\");\n\nfunction LevelUpObjectAdapter(name, db, valueserializer, keyserializer, options) {\n  this.db = Sublevel(db, options);\n  this.db = this.db.sublevel(name);\n  this.name = name;\n  this.valueserializer = valueserializer || {\n    encode: function(val, callback) {\n      callback(null, val);\n    },\n    decode: function(val, callback) {\n      callback(null, val);\n    }\n  };\n  this.keyserializer = keyserializer || {\n    encode: function(val, callback) {\n      callback(null, val);\n    },\n    decode: function(val, callback) {\n      callback(null, val);\n    }\n  };\n}\n\nLevelUpObjectAdapter.prototype.get = function(key, options, callback) {\n  var self = this;\n\n  if (typeof options === \"function\") {\n    callback = options;\n    options = {};\n  }\n\n  this.keyserializer.encode(key, function(err, encodedKey) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.db.get(encodedKey, function(err, val) {\n      if (err) {\n        return callback(err);\n      }\n\n      self.valueserializer.decode(val, function(err, decodedValue) {\n        if (err) {\n          return callback(err);\n        }\n\n        callback(null, decodedValue);\n      });\n    });\n  });\n};\n\nLevelUpObjectAdapter.prototype.put = function(key, value, options, callback) {\n  var self = this;\n\n  if (typeof options === \"function\") {\n    callback = options;\n    options = {};\n  }\n\n  this.keyserializer.encode(key, function(err, encodedKey) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.valueserializer.encode(value, function(err, encoded) {\n      if (err) {\n        return callback(err);\n      }\n\n      self.db.put(encodedKey, encoded, callback);\n    });\n  });\n};\n\nLevelUpObjectAdapter.prototype.set = LevelUpObjectAdapter.prototype.put;\n\nLevelUpObjectAdapter.prototype.del = function(key, callback) {\n  var self = this;\n\n  this.keyserializer.encode(key, function(err, encodedKey) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.db.del(encodedKey, callback);\n  });\n};\n\nLevelUpObjectAdapter.prototype.batch = function(array, options, callback) {\n  var self = this;\n\n  async.each(\n    array,\n    function(item, finished) {\n      if (item.type === \"put\") {\n        self.put(item.key, item.value, options, finished);\n      } else if (item.type === \"del\") {\n        self.del(item.key, finished);\n      } else {\n        finished(new Error(\"Unknown batch type\", item.type));\n      }\n    },\n    function(err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    }\n  );\n};\n\nLevelUpObjectAdapter.prototype.isOpen = function() {\n  return true;\n};\n\nmodule.exports = LevelUpObjectAdapter;\n","module.exports = require(\"levelup\");","module.exports = require(\"encoding-down\");","var util = require(\"util\");\nvar AbstractLevelDOWN = require(\"abstract-leveldown\").AbstractLevelDOWN;\nvar async = require(\"async\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar tmp = require(\"tmp\");\n\nutil.inherits(FileDown, AbstractLevelDOWN);\n\nfunction FileDown(location) {\n  this.location = location;\n  const tmpDir = path.join(location, \"_tmp\");\n  try {\n    // Fixes https://github.com/trufflesuite/ganache/issues/1617\n    fs.mkdirSync(tmpDir, { recursive: true, mode: 0o1777 });\n  } catch (e) {\n    // `recursive` doesn't throw if the file exists, but `recursive` doesn't\n    // exist in Node 8, so we catch the EEXISTS error in that case and ignore it.\n    // once we drop node 8 suport we can remove this try/catch\n    if (e.code !== \"EEXIST\") {\n      throw e;\n    }\n  }\n  this.tmpOptions = { keep: true, dir: tmpDir };\n  AbstractLevelDOWN.call(this, location);\n}\n\nFileDown.prototype._open = function(options, callback) {\n  var self = this;\n  callback(null, self);\n};\nconst accessQueue = {\n  next: (lKey) => {\n    const cont = accessQueue.cache[lKey].shift();\n    if (cont) {\n      cont();\n    } else {\n      delete accessQueue.cache[lKey];\n    }\n  },\n  execute: (lKey, callback) => {\n    const cache = accessQueue.cache[lKey];\n    if (cache) {\n      cache.push(callback);\n    } else {\n      accessQueue.cache[lKey] = [];\n      callback();\n    }\n  },\n  cache: {}\n};\n\nconst fds = new Set();\nconst cleanup = (exit) => {\n  try {\n    fds.forEach((fdPath) => {\n      const [fd, path] = fdPath;\n      try {\n        fs.closeSync(fd);\n      } catch (e) {\n        // ignore\n      } finally {\n        try {\n          fs.unlinkSync(path);\n        } catch (e) {\n          // ignore\n        }\n      }\n    });\n    fds.clear();\n  } finally {\n    if (exit) {\n      process.exit(0);\n    }\n  }\n};\nprocess.on(\"SIGINT\", cleanup);\nprocess.on(\"exit\", () => cleanup(false));\n\nFileDown.prototype._put = function(key, value, options, callback) {\n  const lKey = path.join(this.location, key);\n  // This fixes an issue caused by writing AND reading the same key multiple times\n  // simultaneously. Sometimes the read operation would end up reading the value as 0 bytes\n  // due to the way writes are performed in node. To fix this, we implemented a queue so only a\n  // single read or write operation can occur at a time for each key; basically an in-memory lock.\n  // Additionally, during testing we found that it was possible for a write operation to fail\n  // due to program termination. This failure would sometimes cause the key to _exist_ but contain\n  // 0 bytes (which is always invalid). To fix this we write to a temp file, and only if it works\n  // do we move this temp file to its correct key location. This prevents early termination from\n  // writing partial/empty values.\n  // Of course, all this will eventually be for nothing as we are migrating the db to actual an\n  // leveldb implementation that doesn't use a separate file for every key Soon(TM).\n  accessQueue.execute(lKey, () => {\n    // get a tmp file to write the contents to...\n    tmp.file(this.tmpOptions, (err, path, fd, cleanupTmpFile) => {\n      if (err) {\n        callback(err);\n        accessQueue.next(lKey);\n        return;\n      }\n      const pair = [fd, path];\n      fds.add(pair);\n      const cleanupAndCallback = (err) => {\n        err && cleanupTmpFile();\n        fds.delete(pair);\n        callback(err);\n        accessQueue.next(lKey);\n      };\n\n      // write the value to our temporary file\n      fs.writeFile(fd, value, \"utf8\", (err) => {\n        if (err) {\n          cleanupAndCallback(err);\n          return;\n        }\n\n        // It worked! Move the temporary file to its final destination\n        fs.rename(path, lKey, (err) => {\n          if (err) {\n            cleanupAndCallback(err);\n            return;\n          }\n\n          // make sure we close this file descriptor now that the file is no\n          // longer \"temporary\" (because we successfully moved it)\n          fs.close(fd, () => cleanupAndCallback());\n        });\n      });\n    });\n  });\n};\n\nFileDown.prototype._get = function(key, options, callback) {\n  const lKey = path.join(this.location, key);\n  accessQueue.execute(lKey, () => {\n    fs.readFile(lKey, \"utf8\", (err, data) => {\n      if (err) {\n        callback(new Error(\"NotFound\"));\n      } else {\n        callback(null, data);\n      }\n      accessQueue.next(lKey);\n    });\n  });\n};\n\nFileDown.prototype._del = function(key, options, callback) {\n  fs.unlink(path.join(this.location, key), function(err) {\n    // Ignore when we try to delete a file that doesn't exist.\n    // I'm not sure why this happens. Worth looking into.\n    if (err) {\n      if (err.message.indexOf(\"ENOENT\") >= 0) {\n        return callback();\n      } else {\n        return callback(err);\n      }\n    }\n    callback();\n  });\n};\n\nFileDown.prototype._batch = function(array, options, callback) {\n  var self = this;\n  async.each(\n    array,\n    function(item, finished) {\n      if (item.type === \"put\") {\n        self.put(item.key, item.value, options, finished);\n      } else if (item.type === \"del\") {\n        self.del(item.key, options, finished);\n      } else {\n        finished(new Error(\"Unknown batch type\", item.type));\n      }\n    },\n    function(err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    }\n  );\n};\n\nmodule.exports = function(location) {\n  return new FileDown(location);\n};\n","module.exports = require(\"abstract-leveldown\");","module.exports = require(\"path\");","module.exports = require(\"cachedown\");","var txserializer = require(\"./txserializer\");\nvar async = require(\"async\");\nvar Block = require(\"ethereumjs-block\");\n\nmodule.exports = {\n  encode: function(block, done) {\n    var encoded = block.toJSON(true);\n\n    async.map(\n      block.transactions,\n      function(tx, finished) {\n        txserializer.encode(tx, finished);\n      },\n      function(err, transactions) {\n        if (err) {\n          return done(err);\n        }\n        encoded.transactions = transactions;\n        done(null, encoded);\n      }\n    );\n  },\n  decode: function(json, done) {\n    var transactions = json.transactions;\n    json.transactions = [];\n\n    var block = new Block(json);\n\n    async.eachSeries(\n      transactions,\n      function(txJson, finished) {\n        txserializer.decode(txJson, function(err, tx) {\n          if (err) {\n            return finished(err);\n          }\n          block.transactions.push(tx);\n          finished();\n        });\n      },\n      function(err) {\n        if (err) {\n          return done(err);\n        }\n\n        done(null, block);\n      }\n    );\n  }\n};\n","var utils = require(\"ethereumjs-util\");\nvar to = require(\"../utils/to\");\n\nmodule.exports = {\n  encode: function(val, cb) {\n    var hex = to.hex(val);\n    cb(null, hex);\n  },\n  decode: function(json, cb) {\n    cb(null, utils.toBuffer(json));\n  }\n};\n","var Log = require(\"../utils/log\");\nvar async = require(\"async\");\n\nfunction BlockLogsSerializer(database) {\n  this.database = database;\n}\n\nBlockLogsSerializer.prototype.encode = function(logs, done) {\n  logs = logs.map(function(log) {\n    return log.toJSON();\n  });\n\n  done(null, logs);\n};\n\nBlockLogsSerializer.prototype.decode = function(json, done) {\n  var self = this;\n\n  if (json.length === 0) {\n    return done(null, []);\n  }\n\n  this.database.blockHashes.get(json[0].blockHash, function(err, blockIndex) {\n    if (err) {\n      return done(err);\n    }\n\n    self.database.blocks.get(blockIndex, function(err, block) {\n      if (err) {\n        return done(err);\n      }\n\n      async.map(\n        json,\n        function(log, finished) {\n          finished(\n            null,\n            new Log({\n              block: block,\n              logIndex: log.logIndex,\n              transactionIndex: log.transactionIndex,\n              transactionHash: log.transactionHash,\n              address: log.address,\n              data: log.data,\n              topics: log.topics,\n              type: log.type\n            })\n          );\n        },\n        function(err, logs) {\n          if (err) {\n            return done(err);\n          }\n          done(null, logs);\n        }\n      );\n    });\n  });\n};\n\nmodule.exports = BlockLogsSerializer;\n","var Receipt = require(\"../utils/receipt\");\nvar async = require(\"async\");\n\nfunction ReceiptSerializer(database) {\n  this.database = database;\n}\n\nReceiptSerializer.prototype.encode = function(receipt, done) {\n  done(null, receipt.toJSON());\n};\n\nReceiptSerializer.prototype.decode = function(json, done) {\n  var self = this;\n  // Make sure we can handle mixed/upper-case transaction hashes\n  // it doesn't seem possible to record a transaction hash that isn't\n  // already lower case, as that's the way ganache generates them, however\n  // I don't think it will hurt anything to normalize here anyway.\n  // If you can figure out how to test this please feel free to add a test!\n  var txHash = json.transactionHash.toLowerCase();\n\n  this.database.transactions.get(json.transactionHash, function(err, tx) {\n    if (err) {\n      return done(err);\n    }\n\n    self.database.blockHashes.get(json.blockHash, function(err, blockIndex) {\n      if (err) {\n        return done(err);\n      }\n\n      async.parallel(\n        {\n          block: self.database.blocks.get.bind(self.database.blocks, blockIndex),\n          logs: self.database.blockLogs.get.bind(self.database.blockLogs, blockIndex)\n        },\n        function(err, result) {\n          if (err) {\n            return done(err);\n          }\n\n          done(\n            null,\n            new Receipt(\n              tx,\n              result.block,\n              result.logs.filter((log) => log.transactionHash.toLowerCase() === txHash),\n              json.gasUsed,\n              json.cumulativeGasUsed,\n              json.contractAddress,\n              json.status,\n              json.logsBloom\n            )\n          );\n        }\n      );\n    });\n  });\n};\n\nmodule.exports = ReceiptSerializer;\n","const estimateGas = require(\"./guestimation\");\nconst binSearch = require(\"./binSearch\");\n\nmodule.exports = async(generateVM, runArgs, callback) => {\n  const vm = generateVM();\n  estimateGas(vm, runArgs, async(err, result) => {\n    if (err) {\n      callback(err);\n      return;\n    }\n\n    await binSearch(generateVM, runArgs, result, callback);\n  });\n};\n","const RuntimeError = require(\"../runtimeerror\");\n\nconst { BN } = require(\"ethereumjs-util\");\nconst bn = (val = 0) => new BN(val);\nconst STIPEND = bn(2300);\n\nconst check = (set) => (opname) => set.has(opname);\nconst isCall = check(new Set([\"CALL\", \"DELEGATECALL\", \"STATICCALL\", \"CALLCODE\"]));\nconst isCallOrCallcode = check(new Set([\"CALL\", \"CALLCODE\"]));\nconst isCreate = check(new Set([\"CREATE\", \"CREATE2\"]));\nconst isTerminator = check(new Set([\"STOP\", \"RETURN\", \"REVERT\", \"INVALID\", \"SELFDESTRUCT\"]));\n\nmodule.exports = async(vm, runArgs, callback) => {\n  const steps = stepTracker();\n  vm.on(\"step\", steps.collect);\n\n  const Context = (index, fee) => {\n    const base = index === 0;\n    let start = index;\n    let stop = 0;\n    const cost = bn();\n    let sixtyFloorths = bn();\n    const op = steps.ops[index];\n    const next = steps.ops[index + 1];\n    const intermediateCost = op.gasLeft.sub(next.gasLeft);\n    const callingFee = fee || bn();\n    let compositeContext = false;\n\n    function addGas(val) {\n      // Add to our current context, but accounted for in sixtyfloorths\n      if (sixtyFloorths.gtn(0)) {\n        if (val.gte(sixtyFloorths)) {\n          sixtyFloorths = bn();\n        } else {\n          sixtyFloorths.isub(val);\n        }\n      }\n      cost.iadd(val);\n    }\n\n    return {\n      start: () => start,\n      stop: () => stop,\n      setStart: (val) => {\n        start = val;\n        compositeContext = true;\n      },\n      setStop: (val) => {\n        stop = val;\n      },\n      getCost: () => ({ cost, sixtyFloorths }),\n      transfer: (ctx) => {\n        const values = ctx.getCost();\n        addGas(values.cost);\n        sixtyFloorths.iadd(values.sixtyFloorths);\n      },\n      addSixtyFloorth: (sixtyFloorth) => {\n        sixtyFloorths.iadd(sixtyFloorth);\n      },\n      addRange: (fee = bn()) => {\n        // only occurs on stack increasing ops\n        addGas(steps.ops[base || compositeContext ? start : start + 1].gasLeft.sub(steps.ops[stop].gasLeft).add(fee));\n      },\n      finalizeRange: () => {\n        let range;\n        // if we have a composite context and we are NOT at the final terminator\n        if (compositeContext && stop !== steps.ops.length - 1) {\n          range = steps.ops[start].gasLeft.sub(steps.ops[stop - 1].gasLeft);\n          addGas(range);\n          const tail = steps.ops[stop - 1].gasLeft.sub(steps.ops[stop].gasLeft);\n          range = tail.add(intermediateCost);\n        } else {\n          range = steps.ops[start].gasLeft.sub(steps.ops[stop].gasLeft);\n        }\n        range.isub(callingFee);\n        addGas(range);\n        if (isCallOrCallcode(op.opcode.name) && !op.stack[op.stack.length - 3].isZero()) {\n          cost.iadd(sixtyFloorths);\n          const innerCost = next.gasLeft.sub(steps.ops[stop - 1].gasLeft);\n          if (innerCost.gt(STIPEND)) {\n            sixtyFloorths = cost.divn(63);\n          } else if (innerCost.lte(STIPEND)) {\n            sixtyFloorths = STIPEND.sub(innerCost);\n          }\n        } else if (stop !== steps.ops.length - 1) {\n          cost.iadd(sixtyFloorths);\n          sixtyFloorths = cost.divn(63);\n        }\n      }\n    };\n  };\n\n  const getTotal = () => {\n    const sysops = steps.systemOps;\n    const ops = steps.ops;\n    const opIndex = (cursor) => sysops[cursor].index;\n    const stack = [];\n    let cursor = 0;\n    let context = Context(0);\n    while (cursor < sysops.length) {\n      const currentIndex = opIndex(cursor);\n      const current = ops[currentIndex];\n      const name = current.opcode.name;\n      if (isCall(name) || isCreate(name)) {\n        if (steps.isPrecompile(currentIndex)) {\n          context.setStop(currentIndex + 1);\n          context.addRange();\n          context.setStart(currentIndex + 1);\n          context.addSixtyFloorth(STIPEND);\n        } else {\n          context.setStop(currentIndex);\n          context.addRange(bn(current.opcode.fee));\n          stack.push(context);\n          context = Context(currentIndex, bn(current.opcode.fee)); // setup next context\n        }\n      } else if (isTerminator(name)) {\n        // only on the last operation\n        context.setStop(currentIndex + 1 < steps.ops.length ? currentIndex + 1 : currentIndex);\n        context.finalizeRange();\n        const ctx = stack.pop();\n        if (ctx) {\n          ctx.transfer(context);\n          context = ctx;\n          context.setStart(currentIndex + 1);\n        } else {\n          break;\n        }\n      } else {\n        throw new Error(\"INVALID OPCODE\");\n      }\n      cursor++;\n    }\n    const gas = context.getCost();\n    return gas.cost.add(gas.sixtyFloorths);\n  };\n\n  const result = await vm.runTx(runArgs).catch((vmerr) => ({ vmerr }));\n  const vmerr = result.vmerr;\n  if (vmerr) {\n    return callback(vmerr);\n  } else if (result.execResult.exceptionError) {\n    const vmerr = RuntimeError.fromResults([runArgs.tx], { results: [result] });\n    return callback(vmerr, result);\n  } else if (steps.done()) {\n    const estimate = result.gasUsed;\n    result.gasEstimate = estimate;\n  } else {\n    const actualUsed = steps.ops[0].gasLeft.sub(steps.ops[steps.ops.length - 1].gasLeft);\n    const sixtyFloorths = getTotal().sub(actualUsed);\n    result.gasEstimate = result.gasUsed.add(sixtyFloorths);\n  }\n  callback(vmerr, result);\n};\n\nconst stepTracker = () => {\n  const sysOps = [];\n  const allOps = [];\n  const preCompile = new Set();\n  let preCompileCheck = false;\n  let precompileCallDepth = 0;\n  return {\n    collect: (info) => {\n      if (preCompileCheck) {\n        if (info.depth === precompileCallDepth) {\n          // If the current depth is unchanged.\n          // we record its position.\n          preCompile.add(allOps.length - 1);\n        }\n        // Reset the flag immediately here\n        preCompileCheck = false;\n      }\n      if (isCall(info.opcode.name)) {\n        info.stack = info.stack.map((val) => val.clone());\n        preCompileCheck = true;\n        precompileCallDepth = info.depth;\n        sysOps.push({ index: allOps.length, depth: info.depth, name: info.opcode.name });\n      } else if (isCreate(info.opcode.name) || isTerminator(info.opcode.name)) {\n        sysOps.push({ index: allOps.length, depth: info.depth, name: info.opcode.name });\n      }\n      // This goes last so we can use the length for the index ^\n      allOps.push(info);\n    },\n    isPrecompile: (index) => preCompile.has(index),\n    done: () => !allOps.length || sysOps.length < 2 || !isTerminator(allOps[allOps.length - 1].opcode.name),\n    ops: allOps,\n    systemOps: sysOps\n  };\n};\n","const { BN } = require(\"ethereumjs-util\");\nconst hexToBn = (val = 0) => new BN(parseInt(\"0x\" + val.toString(\"hex\"), 16));\nconst MULTIPLE = 64 / 63;\n\nmodule.exports = async function binSearch(generateVM, runArgs, result, callback) {\n  const MAX = hexToBn(runArgs.block.header.gasLimit);\n  const gasRefund = result.execResult.gasRefund;\n  const startingGas = gasRefund ? result.gasEstimate.add(gasRefund) : result.gasEstimate;\n  const range = { lo: startingGas, hi: startingGas };\n  const isEnoughGas = async(gas) => {\n    const vm = generateVM(); // Generate fresh VM\n    runArgs.tx.gasLimit = gas.toBuffer();\n    const result = await vm.runTx(runArgs).catch((vmerr) => ({ vmerr }));\n    return !result.vmerr && !result.execResult.exceptionError;\n  };\n\n  if (!(await isEnoughGas(range.hi))) {\n    do {\n      range.hi = range.hi.muln(MULTIPLE);\n    } while (!(await isEnoughGas(range.hi)));\n    while (range.lo.addn(1).lt(range.hi)) {\n      const mid = range.lo.add(range.hi).divn(2);\n      if (await isEnoughGas(mid)) {\n        range.hi = mid;\n      } else {\n        range.lo = mid;\n      }\n    }\n    if (range.hi.gte(MAX)) {\n      if (!(await isEnoughGas(range.hi))) {\n        return callback(new Error(\"gas required exceeds allowance or always failing transaction\"));\n      }\n    }\n  }\n\n  result.gasEstimate = range.hi;\n  callback(null, result);\n};\n","var BlockchainDouble = require(\"../blockchain_double.js\");\nvar Account = require(\"ethereumjs-account\").default;\nvar Block = require(\"ethereumjs-block\");\nvar Log = require(\"../utils/log.js\");\nvar Receipt = require(\"../utils/receipt.js\");\nvar utils = require(\"ethereumjs-util\");\nvar ForkedStorageTrie = require(\"./forked_storage_trie.js\");\nvar Web3 = require(\"web3\");\nvar to = require(\"../utils/to.js\");\nvar Transaction = require(\"../utils/transaction\");\nvar async = require(\"async\");\nvar LRUCache = require(\"lru-cache\");\nconst Sublevel = require(\"level-sublevel\");\nconst BN = utils.BN;\n\nvar inherits = require(\"util\").inherits;\n\ninherits(ForkedBlockchain, BlockchainDouble);\n\nconst httpReg = /^https?:/i;\nconst protocolReg = /^[A-Za-z][A-Za-z0-9+\\-.]*:/;\nconst validProtocolReg = /^(?:http|ws)s?:/i;\nconst blockNumberReg = /@([0-9]+)$/;\n\nfunction cloneWithoutId(obj) {\n  return Object.assign({}, obj, { id: null });\n}\n\nfunction ForkedBlockchain(options) {\n  this.options = options || {};\n\n  if (options.fork == null || (typeof options.fork === \"string\" && options.fork.trim().length === 0)) {\n    throw new Error(\"ForkedBlockchain must be passed a fork parameter.\");\n  }\n\n  this.forkVersion = null;\n\n  if (typeof options.fork === \"string\") {\n    const blockNumber = blockNumberReg.exec(options.fork);\n\n    if (blockNumber) {\n      options.fork = options.fork.slice(0, blockNumber.index);\n      options.fork_block_number = parseInt(blockNumber[1], 10);\n    }\n\n    let fork;\n    if (!protocolReg.test(options.fork)) {\n      // we don't have a protocol at all, assume ws\n      options.fork = \"ws://\" + options.fork;\n      fork = new Web3.providers.WebsocketProvider(options.fork);\n    } else if (validProtocolReg.test(options.fork)) {\n      if (httpReg.test(options.fork)) {\n        fork = new Web3.providers.HttpProvider(options.fork);\n      } else {\n        fork = new Web3.providers.WebsocketProvider(options.fork);\n      }\n    } else {\n      throw new Error(`Invalid scheme for fork url: ${options.fork}. Supported schemes are: http, https, ws, and wss.`);\n    }\n\n    this.fork = fork;\n  } else {\n    this.fork = options.fork;\n  }\n\n  this.forkBlockNumber = options.fork_block_number;\n  this.forkCacheSize = parseInt(options.forkCacheSize);\n\n  // if forkCacheSize is `0`, it means it is \"off\"\n  if (!isNaN(this.forkCacheSize) && this.forkCacheSize !== 0) {\n    const send = this.fork.send;\n    const cache = new LRUCache({\n      // `-1` means `Infinity`, which is represented by `0` in LRUCache's options\n      max: this.forkCacheSize === -1 ? 0 : this.forkCacheSize,\n      length: (bufValue, strKey) => {\n        // compute the rough byte size of the stored key + value\n        return Buffer.byteLength(bufValue) + Buffer.byteLength(strKey, \"utf8\");\n      }\n    });\n\n    // Patch the `send` method of the underlying fork provider. We can\n    // simply cache every non-error result because all requests to the\n    // fork should be deterministic.\n    const pendingRequests = new Map();\n    this.fork.send = (payload, callback) => {\n      let payloads;\n      const sendArray = Array.isArray(payload);\n      if (sendArray) {\n        payloads = payload;\n      } else {\n        payloads = [payload];\n      }\n      Promise.all(\n        payloads.map(async(payload) => {\n          const key = JSON.stringify(cloneWithoutId(payload));\n          let pendingRequest = pendingRequests.get(key);\n          // if a request is in flight just wait for it instead of sending another\n          // note: web3 actually polls on `.send`, resending the `payload`, so don't wait\n          // if the new `payload` is the same as the `pendingRequest`.\n          if (pendingRequest && pendingRequest.payload !== payload) {\n            await pendingRequest.promise;\n          }\n\n          const cachedItem = cache.get(key);\n          if (cachedItem) {\n            const result = JSON.parse(cachedItem.toString());\n            result.id = payload.id;\n            return Promise.resolve({ error: null, result });\n          } else {\n            const promise = new Promise((resolve) => {\n              send.call(this.fork, payload, (error, result) => {\n                if (!error) {\n                  cache.set(key, Buffer.from(JSON.stringify(cloneWithoutId(result))));\n                }\n                resolve({ error, result });\n              });\n            });\n            pendingRequest = {\n              payload,\n              promise\n            };\n\n            pendingRequests.set(key, pendingRequest);\n            // Node 8 doesn't have Promise.finally\n            promise\n              .catch(() => {})\n              .then(() => {\n                pendingRequests.delete(key);\n              });\n            return promise;\n          }\n        })\n      ).then((errResults) => {\n        if (!sendArray) {\n          const errResult = errResults[0];\n          callback(errResult.error, errResult.result);\n        } else {\n          let hasError = false;\n          const errors = [];\n          const results = [];\n          errResults.forEach(({ error, result }) => {\n            if (error) {\n              hasError = true;\n            }\n            errors.push(error);\n            results.push(result);\n          });\n          callback(hasError ? errors : null, results);\n        }\n      });\n    };\n  }\n\n  this.time = options.time;\n  this.storageTrieCache = {};\n\n  BlockchainDouble.call(this, options);\n\n  this.createVMFromStateTrie = function() {\n    var vm = BlockchainDouble.prototype.createVMFromStateTrie.apply(this, arguments);\n    this.patchVM(vm);\n    return vm;\n  };\n\n  this.web3 = new Web3(this.fork);\n  this._touchedKeys = [];\n}\n\nForkedBlockchain.prototype.initialize = async function(accounts, callback) {\n  try {\n    const forkVersion = await new Promise((resolve, reject) => {\n      this.web3.eth.net.getId((err, version) => {\n        if (err) {\n          if (this.options.network_id) {\n            resolve(this.options.network_id);\n          } else {\n            Error.captureStackTrace(err);\n            err.message = `The fork provider errored when checking net_version: ${err.message}`;\n            reject(err);\n          }\n        } else {\n          resolve(version);\n        }\n      });\n    });\n\n    this.forkVersion = forkVersion;\n\n    const forkBlock = (this.forkBlock = await new Promise((resolve, reject) => {\n      const queriedBlock = this.forkBlockNumber || \"latest\";\n      this.web3.eth.getBlock(queriedBlock, (err, json) => {\n        if (err) {\n          Error.captureStackTrace(err);\n          err.message =\n            `The fork provider errored when checking for block '${\n              queriedBlock\n            }': ${err.message}`;\n          reject(err);\n        } else {\n          resolve(json);\n        }\n      });\n    }));\n\n    // If no start time was passed, set the time to where we forked from.\n    // We only want to do this if a block was explicitly passed. If a block\n    // number wasn't passed, then we're using the last block and the current time.\n    if (!this.time && this.forkBlockNumber) {\n      this.time = this.options.time = new Date(to.number(forkBlock.timestamp) * 1000);\n      this.setTime(this.time);\n    }\n\n    this.forkBlockNumber = this.options.fork_block_number = forkBlock.number;\n    this.forkBlockHash = forkBlock.hash;\n\n    // Fetch the nonce for all the accounts before we prime them in our state manager.\n    // This is necessary to prevent conflicting contract deployments.\n    const nonces = await Promise.all(\n      accounts.map((account) => {\n        return new Promise((resolve, reject) => {\n          this.web3.eth.getTransactionCount(account.address, this.forkBlockNumber, (err, nonce) => {\n            if (err) {\n              Error.captureStackTrace(err);\n              err.message =\n                `The fork provider errored when checking the nonce for account ${\n                  account.address\n                }: ${err.message}`;\n              reject(err);\n            } else {\n              resolve(nonce);\n            }\n          });\n        });\n      })\n    );\n\n    nonces.forEach((nonce, index) => {\n      accounts[index].account.nonce = nonce;\n    });\n\n    BlockchainDouble.prototype.initialize.call(this, accounts, callback);\n  } catch (err) {\n    callback(err);\n  }\n};\n\nForkedBlockchain.prototype.patchVM = function(vm) {\n  const trie = vm.stateManager._trie;\n  const lookupAccount = this.getLookupAccount(trie);\n  // Unfortunately forking requires a bit of monkey patching, but it gets the job done.\n  vm.stateManager._cache._lookupAccount = lookupAccount;\n  vm.stateManager._lookupStorageTrie = this.getLookupStorageTrie(trie, lookupAccount);\n};\n\n/**\n * @param db\n * @param root\n * @param options Allows overriding the options passed to the ForkedStorageTrie,\n * like `forkBlockNumber` (required for tracing transactions)\n */\nForkedBlockchain.prototype.createStateTrie = function(db, root, options) {\n  options = Object.assign(\n    {\n      fork: this.fork,\n      forkBlockNumber: this.forkBlockNumber,\n      blockchain: this\n    },\n    options\n  );\n  // never allow the forkBlockNumber to go beyond our root forkBlockNumber\n  if (options.forkBlockNumber > this.forkBlockNumber) {\n    options.forkBlockNumber = this.forkBlockNumber;\n  }\n  return new ForkedStorageTrie(db, root, options);\n};\n\nForkedBlockchain.prototype.createGenesisBlock = function(callback) {\n  const forkBlock = this.forkBlock;\n\n  this.createBlock(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n\n    block.header.number = forkBlock.number + 1;\n    block.header.parentHash = forkBlock.hash;\n\n    callback(null, block);\n  });\n};\n\nForkedBlockchain.prototype.getLookupStorageTrie = function(stateTrie, lookupAccount) {\n  lookupAccount = lookupAccount || this.getLookupAccount(stateTrie);\n  return (address, callback) => {\n    const storageTrie = stateTrie.copy();\n    storageTrie.address = address;\n    lookupAccount(address, (err, account) => {\n      if (err) {\n        return callback(err);\n      }\n\n      storageTrie.root = account.stateRoot;\n      callback(null, storageTrie);\n    });\n  };\n};\n\nForkedBlockchain.prototype.isFallbackBlock = function(value, callback) {\n  var self = this;\n\n  self.getEffectiveBlockNumber(value, function(err, number) {\n    if (err) {\n      return callback(err);\n    }\n\n    callback(null, number <= to.number(self.forkBlockNumber));\n  });\n};\n\nForkedBlockchain.prototype.isBlockHash = function(value) {\n  const isHash = typeof value === \"string\" && value.indexOf(\"0x\") === 0 && value.length > 42;\n  return isHash || (Buffer.isBuffer(value) && value.byteLength > 20);\n};\n\nForkedBlockchain.prototype.isFallbackBlockHash = function(value, callback) {\n  var self = this;\n\n  if (!this.isBlockHash(value)) {\n    return callback(null, false);\n  }\n\n  if (Buffer.isBuffer(value)) {\n    value = to.hex(value);\n  }\n\n  self.data.blockHashes.get(value, function(err, blockIndex) {\n    if (err) {\n      if (err.notFound) {\n        // If the block isn't found in our database, then it must be a fallback block.\n        return callback(null, true);\n      } else {\n        return callback(err);\n      }\n    }\n    callback(null, false);\n  });\n};\n\nForkedBlockchain.prototype.getFallbackBlock = function(numberOrHash, cb) {\n  var self = this;\n\n  if (Buffer.isBuffer(numberOrHash)) {\n    // When tracing a transaction the VM sometimes ask for a block numbers as\n    // buffers instead of numbers.\n    numberOrHash = to.rpcDataHexString(numberOrHash);\n  }\n  if (typeof numberOrHash === \"string\" && numberOrHash.length !== 66) {\n    numberOrHash = to.number(numberOrHash);\n  }\n\n  self.web3.eth.getBlock(numberOrHash, true, function(err, json) {\n    if (err) {\n      return cb(err);\n    }\n\n    if (json == null) {\n      return cb(new Error(\"Block not found\"));\n    }\n\n    var block = new Block();\n\n    block.header.parentHash = utils.toBuffer(json.parentHash);\n    block.header.uncleHash = utils.toBuffer(json.sha3Uncles);\n    block.header.coinbase = utils.toBuffer(json.miner);\n    block.header.stateRoot = utils.toBuffer(json.stateRoot); // Should we include the following three?\n    block.header.transactionsTrie = utils.toBuffer(json.transactionsRoot);\n    block.header.receiptTrie = utils.toBuffer(json.receiptsRoot);\n    block.header.bloom = utils.toBuffer(json.logsBloom);\n    block.header.difficulty = utils.toBuffer(\"0x\" + json.totalDifficulty.toString(16)); // BigNumber\n    block.header.number = utils.toBuffer(json.number);\n    block.header.gasLimit = utils.toBuffer(json.gasLimit);\n    block.header.gasUsed = utils.toBuffer(json.gasUsed);\n    block.header.timestamp = utils.toBuffer(json.timestamp);\n    block.header.extraData = utils.toBuffer(json.extraData);\n\n    (json.transactions || []).forEach(function(txJson, index) {\n      block.transactions.push(\n        Transaction.fromJSON(txJson, Transaction.types.real, null, self.forkVersion, self.options.hardfork)\n      );\n    });\n\n    // Fake block. Let's do the worst.\n    // TODO: Attempt to fill out all block data so as to produce the same hash! (can we?)\n    block.hash = function() {\n      return utils.toBuffer(json.hash);\n    };\n\n    cb(null, block);\n  });\n};\n\nForkedBlockchain.prototype.getBlock = function(number, callback) {\n  let checkFn;\n  const isBlockHash = this.isBlockHash(number);\n  if (isBlockHash) {\n    checkFn = this.isFallbackBlockHash;\n  } else {\n    checkFn = this.isFallbackBlock;\n  }\n  checkFn.call(this, number, (err, isFallback) => {\n    if (err) {\n      return callback(err);\n    }\n    if (isFallback) {\n      return this.getFallbackBlock(number, callback);\n    }\n\n    const getBlock = BlockchainDouble.prototype.getBlock.bind(this);\n    if (isBlockHash) {\n      getBlock(number, callback);\n    } else {\n      this.getRelativeBlockNumber(number, (err, number) => {\n        if (err) {\n          return callback(err);\n        }\n        getBlock(number, callback);\n      });\n    }\n  });\n};\n\nForkedBlockchain.prototype.getStorage = function(address, key, number, callback) {\n  var self = this;\n\n  this.getEffectiveBlockNumber(number, (err, blockNumber) => {\n    if (err) {\n      return callback(err);\n    }\n\n    if (blockNumber > self.forkBlockNumber) {\n      // we should have this block\n\n      self.getBlock(blockNumber, function(err, block) {\n        if (err) {\n          return callback(err);\n        }\n\n        const trie = self.stateTrie;\n\n        // Manipulate the state root in place to maintain checkpoints\n        const currentStateRoot = trie.root;\n        self.stateTrie.root = block.header.stateRoot;\n\n        self.getLookupStorageTrie(self.stateTrie)(address, (err, trie) => {\n          if (err) {\n            return callback(err);\n          }\n\n          trie.get(utils.setLengthLeft(utils.toBuffer(key), 32), function(err, value) {\n            // Finally, put the stateRoot back for good\n            trie.root = currentStateRoot;\n\n            if (err != null) {\n              return callback(err);\n            }\n\n            callback(null, value);\n          });\n        });\n      });\n    } else {\n      // we're looking for something prior to forking, so let's\n      // hit eth_getStorageAt\n      self.web3.eth.getStorageAt(to.rpcDataHexString(address), to.rpcDataHexString(key), blockNumber, function(\n        err,\n        value\n      ) {\n        if (err) {\n          return callback(err);\n        }\n\n        value = utils.rlp.encode(value);\n\n        callback(null, value);\n      });\n    }\n  });\n};\n\nForkedBlockchain.prototype.getCode = function(address, number, callback) {\n  var self = this;\n\n  if (typeof number === \"function\") {\n    callback = number;\n    number = \"latest\";\n  }\n\n  if (!number) {\n    number = \"latest\";\n  }\n\n  this.getEffectiveBlockNumber(number, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n    number = effective;\n\n    self.stateTrie.getTouchedAt(address, (err, touchedAt) => {\n      if (err) {\n        return callback(err);\n      }\n\n      if (typeof touchedAt !== \"undefined\" && touchedAt <= number) {\n        BlockchainDouble.prototype.getCode.call(self, address, number, callback);\n      } else {\n        if (number > to.number(self.forkBlockNumber)) {\n          number = \"latest\";\n        }\n\n        self.fetchCodeFromFallback(address, number, function(err, code) {\n          if (code) {\n            code = utils.toBuffer(code);\n          }\n          callback(err, code);\n        });\n      }\n    });\n  });\n};\n\nForkedBlockchain.prototype.getLookupAccount = function(trie) {\n  return (address, callback) => {\n    // If the account doesn't exist in our state trie, get it off the wire.\n    trie.keyExists(address, (err, exists) => {\n      if (err) {\n        return callback(err);\n      }\n      if (exists) {\n        trie.get(address, (err, data) => {\n          if (err) {\n            return callback(err);\n          }\n          const account = new Account(data);\n          callback(null, account);\n        });\n      } else {\n        this.fetchAccountFromFallback(address, to.number(trie.forkBlockNumber), callback);\n      }\n    });\n  };\n};\n\nForkedBlockchain.prototype.getAccount = function(address, number, callback) {\n  var self = this;\n\n  if (typeof number === \"function\") {\n    callback = number;\n    number = \"latest\";\n  }\n\n  this.getEffectiveBlockNumber(number, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n    number = effective;\n\n    // If the account doesn't exist in our state trie, get it off the wire.\n    self.stateTrie.keyExists(address, function(err, exists) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (exists && number > to.number(self.forkBlockNumber)) {\n        BlockchainDouble.prototype.getAccount.call(self, address, number, function(err, acc) {\n          if (err) {\n            return callback(err);\n          }\n          callback(null, acc);\n        });\n      } else {\n        self.fetchAccountFromFallback(address, number, callback);\n      }\n    });\n  });\n};\n\nForkedBlockchain.prototype.getTransaction = function(hash, callback) {\n  var self = this;\n  BlockchainDouble.prototype.getTransaction.call(this, hash, function(err, tx) {\n    if (err) {\n      return callback(err);\n    }\n    if (tx != null) {\n      return callback(null, tx);\n    }\n\n    self.web3.eth.getTransaction(hash, function(err, result) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (result) {\n        result = Transaction.fromJSON(result, Transaction.types.signed, null, self.forkVersion, self.options.hardfork);\n      }\n\n      callback(null, result);\n    });\n  });\n};\n\nForkedBlockchain.prototype.getTransactionReceipt = function(hash, callback) {\n  var self = this;\n  BlockchainDouble.prototype.getTransactionReceipt.call(this, hash, function(err, receipt) {\n    if (err) {\n      return callback(err);\n    }\n    if (receipt) {\n      return callback(null, receipt);\n    }\n\n    self.web3.eth.getTransactionReceipt(hash, function(err, receiptJson) {\n      if (err) {\n        return callback(err);\n      }\n      if (!receiptJson) {\n        return callback();\n      }\n\n      async.parallel(\n        {\n          tx: self.getTransaction.bind(self, hash),\n          block: self.getBlock.bind(self, receiptJson.blockNumber)\n        },\n        function(err, result) {\n          if (err) {\n            return callback(err);\n          }\n\n          var logs = receiptJson.logs.map(function(log) {\n            log.block = result.block;\n            return new Log(log);\n          });\n\n          var receipt = new Receipt(\n            result.tx,\n            result.block,\n            logs,\n            receiptJson.gasUsed,\n            receiptJson.cumulativeGasUsed,\n            receiptJson.contractAddress,\n            receiptJson.status,\n            to.hex(receiptJson.logsBloom)\n          );\n\n          callback(null, receipt);\n        }\n      );\n    });\n  });\n};\n\nForkedBlockchain.prototype.fetchAccountFromFallback = function(address, blockNumber, callback) {\n  var self = this;\n  address = to.hex(address);\n\n  async.parallel(\n    {\n      code: this.fetchCodeFromFallback.bind(this, address, blockNumber),\n      balance: this.fetchBalanceFromFallback.bind(this, address, blockNumber),\n      nonce: this.fetchNonceFromFallback.bind(this, address, blockNumber)\n    },\n    function(err, results) {\n      if (err) {\n        return callback(err);\n      }\n\n      var code = results.code;\n      var balance = results.balance;\n      var nonce = results.nonce;\n\n      var account = new Account({\n        nonce: nonce,\n        balance: balance\n      });\n\n      // This puts the code on the trie, keyed by the hash of the code.\n      // It does not actually link an account to code in the trie.\n      account.setCode(self.stateTrie, utils.toBuffer(code), function(err) {\n        if (err) {\n          return callback(err);\n        }\n        callback(null, account);\n      });\n    }\n  );\n};\n\nForkedBlockchain.prototype.fetchCodeFromFallback = function(address, blockNumber, callback) {\n  var self = this;\n  address = to.hex(address);\n\n  // Allow an optional blockNumber\n  if (typeof blockNumber === \"function\") {\n    callback = blockNumber;\n    blockNumber = this.forkBlockNumber;\n  }\n\n  this.getSafeFallbackBlockNumber(blockNumber, function(err, safeBlockNumber) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.web3.eth.getCode(address, safeBlockNumber, function(err, code) {\n      if (err) {\n        return callback(err);\n      }\n\n      code = \"0x\" + utils.toBuffer(code).toString(\"hex\");\n      callback(null, code);\n    });\n  });\n};\n\nForkedBlockchain.prototype.fetchBalanceFromFallback = function(address, blockNumber, callback) {\n  var self = this;\n  address = to.hex(address);\n\n  // Allow an optional blockNumber\n  if (typeof blockNumber === \"function\") {\n    callback = blockNumber;\n    blockNumber = this.forkBlockNumber;\n  }\n\n  this.getSafeFallbackBlockNumber(blockNumber, function(err, safeBlockNumber) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.web3.eth.getBalance(address, safeBlockNumber, function(err, balance) {\n      if (err) {\n        return callback(err);\n      }\n\n      balance = \"0x\" + new BN(balance).toString(16);\n      callback(null, balance);\n    });\n  });\n};\n\nForkedBlockchain.prototype.fetchNonceFromFallback = function(address, blockNumber, callback) {\n  var self = this;\n  address = to.hex(address);\n\n  // Allow an optional blockNumber\n  if (typeof blockNumber === \"function\") {\n    callback = blockNumber;\n    blockNumber = this.forkBlockNumber;\n  }\n\n  this.getSafeFallbackBlockNumber(blockNumber, function(err, safeBlockNumber) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.web3.eth.getTransactionCount(address, safeBlockNumber, function(err, nonce) {\n      if (err) {\n        return callback(err);\n      }\n\n      nonce = \"0x\" + self.web3.utils.toBN(nonce).toString(16);\n      callback(null, nonce);\n    });\n  });\n};\n\nForkedBlockchain.prototype.getHeight = function(callback) {\n  this.latestBlock(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, to.number(block.header.number));\n  });\n};\n\nForkedBlockchain.prototype.getRelativeBlockNumber = function(number, callback) {\n  var self = this;\n  this.getEffectiveBlockNumber(number, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, effective - to.number(self.forkBlockNumber) - 1);\n  });\n};\n\nForkedBlockchain.prototype.getSafeFallbackBlockNumber = function(blockNumber, callback) {\n  var forkBlockNumber = to.number(this.forkBlockNumber);\n\n  if (blockNumber == null) {\n    return callback(null, forkBlockNumber);\n  }\n\n  this.getEffectiveBlockNumber(blockNumber, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n    if (effective > forkBlockNumber) {\n      effective = forkBlockNumber;\n    }\n\n    callback(null, effective);\n  });\n};\n\nForkedBlockchain.prototype.getBlockLogs = function(number, callback) {\n  var self = this;\n\n  this.getEffectiveBlockNumber(number, function(err, effective) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.getRelativeBlockNumber(effective, function(err, relative) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (relative < 0) {\n        self.getBlock(number, function(err, block) {\n          if (err) {\n            return callback(err);\n          }\n\n          self.web3.currentProvider.send(\n            {\n              jsonrpc: \"2.0\",\n              method: \"eth_getLogs\",\n              params: [\n                {\n                  fromBlock: to.hex(number),\n                  toBlock: to.hex(number)\n                }\n              ],\n              id: new Date().getTime()\n            },\n            function(err, res) {\n              if (err) {\n                return callback(err);\n              }\n\n              var logs = res.result.map(function(log) {\n                // To make this result masquerade as the right information.\n                log.block = block;\n                return new Log(log);\n              });\n\n              callback(null, logs);\n            }\n          );\n        });\n      } else {\n        BlockchainDouble.prototype.getBlockLogs.call(self, relative, callback);\n      }\n    });\n  });\n};\n\nForkedBlockchain.prototype.getQueuedNonce = function(address, callback) {\n  var nonce = null;\n  var addressBuffer = to.buffer(address);\n  this.pending_transactions.forEach(function(tx) {\n    if (!tx.from.equals(addressBuffer)) {\n      return;\n    }\n\n    var pendingNonce = new BN(tx.nonce);\n    // If this is the first queued nonce for this address we found,\n    // or it's higher than the previous highest, note it.\n    if (nonce === null || pendingNonce.gt(nonce)) {\n      nonce = pendingNonce;\n    }\n  });\n\n  // If we found a queued transaction nonce, return one higher\n  // than the highest we found\n  if (nonce != null) {\n    return callback(null, nonce.iaddn(1).toArrayLike(Buffer));\n  }\n  this.getLookupAccount(this.stateTrie)(addressBuffer, function(err, account) {\n    if (err) {\n      return callback(err);\n    }\n\n    // nonces are initialized as an empty buffer, which isn't what we want.\n    callback(null, account.nonce.length === 0 ? Buffer.from([0]) : account.nonce);\n  });\n};\n\nForkedBlockchain.prototype.processCall = function(tx, blockNumber, callback) {\n  const self = this;\n\n  this.getEffectiveBlockNumber(blockNumber, function(err, effectiveBlockNumber) {\n    if (err) {\n      return callback(err);\n    }\n\n    if (effectiveBlockNumber > self.forkBlockNumber) {\n      BlockchainDouble.prototype.processCall.call(self, tx, blockNumber, callback);\n    } else {\n      self.web3.eth.call({\n        from: to.rpcDataHexString(tx.from),\n        to: to.nullableRpcDataHexString(tx.to),\n        data: to.rpcDataHexString(tx.data)\n      }, effectiveBlockNumber, function(err, result) {\n        if (err) {\n          return callback(err);\n        }\n\n        callback(null, {\n          execResult: {\n            returnValue: result\n          }\n        });\n      });\n    }\n  });\n};\n\nForkedBlockchain.prototype.processBlock = async function(vm, block, commit, callback) {\n  const self = this;\n\n  self._touchedKeys = [];\n  BlockchainDouble.prototype.processBlock.call(self, vm, block, commit, callback);\n};\n\nForkedBlockchain.prototype.putBlock = function(block, logs, receipts, callback) {\n  const self = this;\n  const touched = Sublevel(self.data.trie_db).sublevel(\"touched\");\n  const blockKey = `block-${to.number(block.header.number)}`;\n\n  BlockchainDouble.prototype.putBlock.call(self, block, logs, receipts, function(err, result) {\n    if (err) {\n      return callback(err);\n    }\n\n    touched.put(blockKey, JSON.stringify(self._touchedKeys), (err) => {\n      if (err) {\n        return callback(err);\n      }\n\n      callback(null, result);\n    });\n  });\n};\n\nForkedBlockchain.prototype.popBlock = function(callback) {\n  const self = this;\n  const touched = Sublevel(this.data.trie_db).sublevel(\"touched\");\n\n  this.data.blocks.last(function(err, block) {\n    if (err) {\n      return callback(err);\n    }\n    if (block == null) {\n      return callback(null, null);\n    }\n\n    const blockKey = `block-${to.number(block.header.number)}`;\n    touched.get(blockKey, function(err, value) {\n      if (err) {\n        return callback(err);\n      }\n\n      const touchedKeys = value ? JSON.parse(value) : [];\n      async.eachSeries(\n        touchedKeys,\n        function(touchedKey, finished) {\n          touched.del(touchedKey, finished);\n        },\n        function(err) {\n          if (err) {\n            return callback(err);\n          }\n\n          touched.del(blockKey, function(err) {\n            if (err) {\n              return callback(err);\n            }\n\n            BlockchainDouble.prototype.popBlock.call(self, callback);\n          });\n        }\n      );\n    });\n  });\n};\n\nForkedBlockchain.prototype.close = function(callback) {\n  if (this.fork.disconnect) {\n    this.fork.disconnect();\n  }\n  BlockchainDouble.prototype.close.call(this, callback);\n};\n\nmodule.exports = ForkedBlockchain;\n","const Sublevel = require(\"level-sublevel\");\nconst MerklePatriciaTree = require(\"merkle-patricia-tree\");\nconst BaseTrie = require(\"merkle-patricia-tree/baseTrie\");\nconst checkpointInterface = require(\"merkle-patricia-tree/checkpoint-interface\");\nvar utils = require(\"ethereumjs-util\");\nvar inherits = require(\"util\").inherits;\nvar Web3 = require(\"web3\");\nvar to = require(\"../utils/to.js\");\n\ninherits(ForkedStorageBaseTrie, BaseTrie);\n\nfunction ForkedStorageBaseTrie(db, root, options) {\n  BaseTrie.call(this, db, root);\n  this._touched = Sublevel(this.db).sublevel(\"touched\");\n\n  this.options = options;\n  this.address = options.address;\n  this.forkBlockNumber = options.forkBlockNumber;\n  this.blockchain = options.blockchain;\n  this.fork = options.fork;\n  this.web3 = new Web3(this.fork);\n  this.persist = typeof options.persist === \"undefined\" ? true : options.persist;\n}\n\n// Note: This overrides a standard method whereas the other methods do not.\nForkedStorageBaseTrie.prototype.get = function(key, callback) {\n  var self = this;\n\n  key = utils.toBuffer(key);\n\n  self.keyExists(key, function(err, keyExists) {\n    if (err) {\n      return callback(err);\n    }\n\n    self.getTouchedAt(key, function(err, touchedAt) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (keyExists && typeof touchedAt !== \"undefined\") {\n        MerklePatriciaTree.prototype.get.call(self, key, function(err, r) {\n          callback(err, r);\n        });\n      } else {\n        // If this is the main trie, get the whole account.\n        if (self.address == null) {\n          self.blockchain.fetchAccountFromFallback(key, self.forkBlockNumber, function(err, account) {\n            if (err) {\n              return callback(err);\n            }\n\n            callback(null, account.serialize());\n          });\n        } else {\n          self.web3.eth.getStorageAt(\n            to.rpcDataHexString(self.address),\n            to.rpcDataHexString(key),\n            self.forkBlockNumber,\n            function(err, value) {\n              if (err) {\n                return callback(err);\n              }\n\n              value = to.rpcQuantityBuffer(value);\n\n              callback(null, value);\n            }\n          );\n        }\n      }\n    });\n  });\n};\n\nForkedStorageBaseTrie.prototype.keyExists = function(key, callback) {\n  key = utils.toBuffer(key);\n  this.findPath(key, (err, node, remainder, stack) => {\n    const exists = node && remainder.length === 0;\n    callback(err, exists);\n  });\n};\n\nForkedStorageBaseTrie.prototype.touch = function(key, callback) {\n  if (!this.persist) {\n    return callback();\n  }\n\n  const self = this;\n  let rpcKey = to.rpcDataHexString(key);\n  if (this.address) {\n    rpcKey = `${to.rpcDataHexString(this.address)};${rpcKey}`;\n  }\n  rpcKey = rpcKey.toLowerCase();\n\n  this._touched.get(rpcKey, (err, result) => {\n    if (err && err.type !== \"NotFoundError\") {\n      return callback(err);\n    }\n\n    if (typeof result === \"undefined\") {\n      // key doesn't exist\n      this.blockchain.data.blocks.last((err, lastBlock) => {\n        if (err) {\n          return callback(err);\n        }\n\n        const number = lastBlock === null ? self.forkBlockNumber : to.number(lastBlock.header.number);\n        this._touched.put(rpcKey, number + 1);\n        this.blockchain._touchedKeys.push(rpcKey);\n        callback();\n      });\n    } else {\n      callback();\n    }\n  });\n};\n\nconst originalPut = ForkedStorageBaseTrie.prototype.put;\nForkedStorageBaseTrie.prototype.put = function(key, value, callback) {\n  const self = this;\n  this.touch(key, function(err) {\n    if (err) {\n      return callback(err);\n    }\n\n    originalPut.call(self, key, value, callback);\n  });\n};\n\nForkedStorageBaseTrie.prototype.getTouchedAt = function(key, callback) {\n  let rpcKey = to.rpcDataHexString(key);\n  if (this.address) {\n    rpcKey = `${to.rpcDataHexString(this.address)};${rpcKey}`;\n  }\n  rpcKey = rpcKey.toLowerCase();\n\n  this._touched.get(rpcKey, function(err, result) {\n    if (err && err.type !== \"NotFoundError\") {\n      return callback(err);\n    }\n\n    callback(null, result);\n  });\n};\n\nForkedStorageBaseTrie.prototype.del = function(key, callback) {\n  this.put(key, 0, callback);\n};\n\nForkedStorageBaseTrie.prototype.copy = function() {\n  return new ForkedStorageBaseTrie(this.db, this.root, this.options);\n};\n\ninherits(ForkedStorageTrie, ForkedStorageBaseTrie);\n\nfunction ForkedStorageTrie(db, root, options) {\n  ForkedStorageBaseTrie.call(this, db, root, options);\n  checkpointInterface.call(this, this);\n}\n\nForkedStorageTrie.prove = MerklePatriciaTree.prove;\nForkedStorageTrie.verifyProof = MerklePatriciaTree.verifyProof;\n\nmodule.exports = ForkedStorageTrie;\n","module.exports = require(\"merkle-patricia-tree/baseTrie\");","module.exports = require(\"merkle-patricia-tree/checkpoint-interface\");","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file index.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\n\"use strict\";\n\nvar _ = require('underscore');\nvar core = require('web3-core');\nvar helpers = require('web3-core-helpers');\nvar Subscriptions = require('web3-core-subscriptions').subscriptions;\nvar Method = require('web3-core-method');\nvar utils = require('web3-utils');\nvar Net = require('web3-net');\n\nvar ENS = require('web3-eth-ens');\nvar Personal = require('web3-eth-personal');\nvar BaseContract = require('web3-eth-contract');\nvar Iban = require('web3-eth-iban');\nvar Accounts = require('web3-eth-accounts');\nvar abi = require('web3-eth-abi');\n\nvar getNetworkType = require('./getNetworkType.js');\nvar formatter = helpers.formatters;\n\n\nvar blockCall = function (args) {\n    return (_.isString(args[0]) && args[0].indexOf('0x') === 0) ? \"eth_getBlockByHash\" : \"eth_getBlockByNumber\";\n};\n\nvar transactionFromBlockCall = function (args) {\n    return (_.isString(args[0]) && args[0].indexOf('0x') === 0) ? 'eth_getTransactionByBlockHashAndIndex' : 'eth_getTransactionByBlockNumberAndIndex';\n};\n\nvar uncleCall = function (args) {\n    return (_.isString(args[0]) && args[0].indexOf('0x') === 0) ? 'eth_getUncleByBlockHashAndIndex' : 'eth_getUncleByBlockNumberAndIndex';\n};\n\nvar getBlockTransactionCountCall = function (args) {\n    return (_.isString(args[0]) && args[0].indexOf('0x') === 0) ? 'eth_getBlockTransactionCountByHash' : 'eth_getBlockTransactionCountByNumber';\n};\n\nvar uncleCountCall = function (args) {\n    return (_.isString(args[0]) && args[0].indexOf('0x') === 0) ? 'eth_getUncleCountByBlockHash' : 'eth_getUncleCountByBlockNumber';\n};\n\n\nvar Eth = function Eth() {\n    var _this = this;\n\n    // sets _requestmanager\n    core.packageInit(this, arguments);\n\n    // overwrite package setRequestManager\n    var setRequestManager = this.setRequestManager;\n    this.setRequestManager = function (manager) {\n        setRequestManager(manager);\n\n        _this.net.setRequestManager(manager);\n        _this.personal.setRequestManager(manager);\n        _this.accounts.setRequestManager(manager);\n        _this.Contract._requestManager = _this._requestManager;\n        _this.Contract.currentProvider = _this._provider;\n\n        return true;\n    };\n\n    // overwrite setProvider\n    var setProvider = this.setProvider;\n    this.setProvider = function () {\n        setProvider.apply(_this, arguments);\n\n        _this.setRequestManager(_this._requestManager);\n\n        // Set detectedAddress/lastSyncCheck back to null because the provider could be connected to a different chain now\n        _this.ens._detectedAddress = null;\n        _this.ens._lastSyncCheck = null;\n    };\n\n\n    var handleRevert = false;\n    var defaultAccount = null;\n    var defaultBlock = 'latest';\n    var transactionBlockTimeout = 50;\n    var transactionConfirmationBlocks = 24;\n    var transactionPollingTimeout = 750;\n    var maxListenersWarningThreshold = 100;\n    var defaultChain, defaultHardfork, defaultCommon;\n\n    Object.defineProperty(this, 'handleRevert', {\n        get: function () {\n            return handleRevert;\n        },\n        set: function (val) {\n            handleRevert = val;\n\n            // also set on the Contract object\n            _this.Contract.handleRevert = handleRevert;\n\n            // update handleRevert\n            methods.forEach(function(method) {\n                method.handleRevert = handleRevert;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'defaultCommon', {\n        get: function () {\n            return defaultCommon;\n        },\n        set: function (val) {\n            defaultCommon = val;\n\n            // also set on the Contract object\n            _this.Contract.defaultCommon = defaultCommon;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.defaultCommon = defaultCommon;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'defaultHardfork', {\n        get: function () {\n            return defaultHardfork;\n        },\n        set: function (val) {\n            defaultHardfork = val;\n\n            // also set on the Contract object\n            _this.Contract.defaultHardfork = defaultHardfork;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.defaultHardfork = defaultHardfork;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'defaultChain', {\n        get: function () {\n            return defaultChain;\n        },\n        set: function (val) {\n            defaultChain = val;\n\n            // also set on the Contract object\n            _this.Contract.defaultChain = defaultChain;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.defaultChain = defaultChain;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'transactionPollingTimeout', {\n        get: function () {\n            return transactionPollingTimeout;\n        },\n        set: function (val) {\n            transactionPollingTimeout = val;\n\n            // also set on the Contract object\n            _this.Contract.transactionPollingTimeout = transactionPollingTimeout;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.transactionPollingTimeout = transactionPollingTimeout;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'transactionConfirmationBlocks', {\n        get: function () {\n            return transactionConfirmationBlocks;\n        },\n        set: function (val) {\n            transactionConfirmationBlocks = val;\n\n            // also set on the Contract object\n            _this.Contract.transactionConfirmationBlocks = transactionConfirmationBlocks;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.transactionConfirmationBlocks = transactionConfirmationBlocks;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'transactionBlockTimeout', {\n        get: function () {\n            return transactionBlockTimeout;\n        },\n        set: function (val) {\n            transactionBlockTimeout = val;\n\n            // also set on the Contract object\n            _this.Contract.transactionBlockTimeout = transactionBlockTimeout;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.transactionBlockTimeout = transactionBlockTimeout;\n            });\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'defaultAccount', {\n        get: function () {\n            return defaultAccount;\n        },\n        set: function (val) {\n            if(val) {\n                defaultAccount = utils.toChecksumAddress(formatter.inputAddressFormatter(val));\n            }\n\n            // also set on the Contract object\n            _this.Contract.defaultAccount = defaultAccount;\n            _this.personal.defaultAccount = defaultAccount;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.defaultAccount = defaultAccount;\n            });\n\n            return val;\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'defaultBlock', {\n        get: function () {\n            return defaultBlock;\n        },\n        set: function (val) {\n            defaultBlock = val;\n            // also set on the Contract object\n            _this.Contract.defaultBlock = defaultBlock;\n            _this.personal.defaultBlock = defaultBlock;\n\n            // update defaultBlock\n            methods.forEach(function(method) {\n                method.defaultBlock = defaultBlock;\n            });\n\n            return val;\n        },\n        enumerable: true\n    });\n    Object.defineProperty(this, 'maxListenersWarningThreshold', {\n        get: function () {\n            return maxListenersWarningThreshold;\n        },\n        set: function (val) {\n            if (_this.currentProvider && _this.currentProvider.setMaxListeners){\n                maxListenersWarningThreshold = val;\n                _this.currentProvider.setMaxListeners(val);\n            }\n        },\n        enumerable: true\n    });\n\n\n    this.clearSubscriptions = _this._requestManager.clearSubscriptions.bind(_this._requestManager);\n\n    // add net\n    this.net = new Net(this);\n    // add chain detection\n    this.net.getNetworkType = getNetworkType.bind(this);\n\n    // add accounts\n    this.accounts = new Accounts(this);\n\n    // add personal\n    this.personal = new Personal(this);\n    this.personal.defaultAccount = this.defaultAccount;\n\n    // set warnings threshold\n    this.maxListenersWarningThreshold = maxListenersWarningThreshold;\n\n    // create a proxy Contract type for this instance, as a Contract's provider\n    // is stored as a class member rather than an instance variable. If we do\n    // not create this proxy type, changing the provider in one instance of\n    // web3-eth would subsequently change the provider for _all_ contract\n    // instances!\n    var self = this;\n    var Contract = function Contract() {\n        BaseContract.apply(this, arguments);\n\n        // when Eth.setProvider is called, call packageInit\n        // on all contract instances instantiated via this Eth\n        // instances. This will update the currentProvider for\n        // the contract instances\n        var _this = this;\n        var setProvider = self.setProvider;\n        self.setProvider = function() {\n          setProvider.apply(self, arguments);\n          core.packageInit(_this, [self]);\n        };\n    };\n\n    Contract.setProvider = function() {\n        BaseContract.setProvider.apply(this, arguments);\n    };\n\n    // make our proxy Contract inherit from web3-eth-contract so that it has all\n    // the right functionality and so that instanceof and friends work properly\n    Contract.prototype = Object.create(BaseContract.prototype);\n    Contract.prototype.constructor = Contract;\n\n    // add contract\n    this.Contract = Contract;\n    this.Contract.defaultAccount = this.defaultAccount;\n    this.Contract.defaultBlock = this.defaultBlock;\n    this.Contract.transactionBlockTimeout = this.transactionBlockTimeout;\n    this.Contract.transactionConfirmationBlocks = this.transactionConfirmationBlocks;\n    this.Contract.transactionPollingTimeout = this.transactionPollingTimeout;\n    this.Contract.handleRevert = this.handleRevert;\n    this.Contract._requestManager = this._requestManager;\n    this.Contract._ethAccounts = this.accounts;\n    this.Contract.currentProvider = this._requestManager.provider;\n\n    // add IBAN\n    this.Iban = Iban;\n\n    // add ABI\n    this.abi = abi;\n\n    // add ENS\n    this.ens = new ENS(this);\n\n    var methods = [\n        new Method({\n            name: 'getNodeInfo',\n            call: 'web3_clientVersion'\n        }),\n        new Method({\n            name: 'getProtocolVersion',\n            call: 'eth_protocolVersion',\n            params: 0\n        }),\n        new Method({\n            name: 'getCoinbase',\n            call: 'eth_coinbase',\n            params: 0\n        }),\n        new Method({\n            name: 'isMining',\n            call: 'eth_mining',\n            params: 0\n        }),\n        new Method({\n            name: 'getHashrate',\n            call: 'eth_hashrate',\n            params: 0,\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'isSyncing',\n            call: 'eth_syncing',\n            params: 0,\n            outputFormatter: formatter.outputSyncingFormatter\n        }),\n        new Method({\n            name: 'getGasPrice',\n            call: 'eth_gasPrice',\n            params: 0,\n            outputFormatter: formatter.outputBigNumberFormatter\n        }),\n        new Method({\n            name: 'getAccounts',\n            call: 'eth_accounts',\n            params: 0,\n            outputFormatter: utils.toChecksumAddress\n        }),\n        new Method({\n            name: 'getBlockNumber',\n            call: 'eth_blockNumber',\n            params: 0,\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'getBalance',\n            call: 'eth_getBalance',\n            params: 2,\n            inputFormatter: [formatter.inputAddressFormatter, formatter.inputDefaultBlockNumberFormatter],\n            outputFormatter: formatter.outputBigNumberFormatter\n        }),\n        new Method({\n            name: 'getStorageAt',\n            call: 'eth_getStorageAt',\n            params: 3,\n            inputFormatter: [formatter.inputAddressFormatter, utils.numberToHex, formatter.inputDefaultBlockNumberFormatter]\n        }),\n        new Method({\n            name: 'getCode',\n            call: 'eth_getCode',\n            params: 2,\n            inputFormatter: [formatter.inputAddressFormatter, formatter.inputDefaultBlockNumberFormatter]\n        }),\n        new Method({\n            name: 'getBlock',\n            call: blockCall,\n            params: 2,\n            inputFormatter: [formatter.inputBlockNumberFormatter, function (val) { return !!val; }],\n            outputFormatter: formatter.outputBlockFormatter\n        }),\n        new Method({\n            name: 'getUncle',\n            call: uncleCall,\n            params: 2,\n            inputFormatter: [formatter.inputBlockNumberFormatter, utils.numberToHex],\n            outputFormatter: formatter.outputBlockFormatter,\n\n        }),\n        new Method({\n            name: 'getBlockTransactionCount',\n            call: getBlockTransactionCountCall,\n            params: 1,\n            inputFormatter: [formatter.inputBlockNumberFormatter],\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'getBlockUncleCount',\n            call: uncleCountCall,\n            params: 1,\n            inputFormatter: [formatter.inputBlockNumberFormatter],\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'getTransaction',\n            call: 'eth_getTransactionByHash',\n            params: 1,\n            inputFormatter: [null],\n            outputFormatter: formatter.outputTransactionFormatter\n        }),\n        new Method({\n            name: 'getTransactionFromBlock',\n            call: transactionFromBlockCall,\n            params: 2,\n            inputFormatter: [formatter.inputBlockNumberFormatter, utils.numberToHex],\n            outputFormatter: formatter.outputTransactionFormatter\n        }),\n        new Method({\n            name: 'getTransactionReceipt',\n            call: 'eth_getTransactionReceipt',\n            params: 1,\n            inputFormatter: [null],\n            outputFormatter: formatter.outputTransactionReceiptFormatter\n        }),\n        new Method({\n            name: 'getTransactionCount',\n            call: 'eth_getTransactionCount',\n            params: 2,\n            inputFormatter: [formatter.inputAddressFormatter, formatter.inputDefaultBlockNumberFormatter],\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'sendSignedTransaction',\n            call: 'eth_sendRawTransaction',\n            params: 1,\n            inputFormatter: [null],\n            abiCoder: abi\n        }),\n        new Method({\n            name: 'signTransaction',\n            call: 'eth_signTransaction',\n            params: 1,\n            inputFormatter: [formatter.inputTransactionFormatter]\n        }),\n        new Method({\n            name: 'sendTransaction',\n            call: 'eth_sendTransaction',\n            params: 1,\n            inputFormatter: [formatter.inputTransactionFormatter],\n            abiCoder: abi\n        }),\n        new Method({\n            name: 'sign',\n            call: 'eth_sign',\n            params: 2,\n            inputFormatter: [formatter.inputSignFormatter, formatter.inputAddressFormatter],\n            transformPayload: function (payload) {\n                payload.params.reverse();\n                return payload;\n            }\n        }),\n        new Method({\n            name: 'call',\n            call: 'eth_call',\n            params: 2,\n            inputFormatter: [formatter.inputCallFormatter, formatter.inputDefaultBlockNumberFormatter],\n            abiCoder: abi\n        }),\n        new Method({\n            name: 'estimateGas',\n            call: 'eth_estimateGas',\n            params: 1,\n            inputFormatter: [formatter.inputCallFormatter],\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'submitWork',\n            call: 'eth_submitWork',\n            params: 3\n        }),\n        new Method({\n            name: 'getWork',\n            call: 'eth_getWork',\n            params: 0\n        }),\n        new Method({\n            name: 'getPastLogs',\n            call: 'eth_getLogs',\n            params: 1,\n            inputFormatter: [formatter.inputLogFormatter],\n            outputFormatter: formatter.outputLogFormatter\n        }),\n        new Method({\n            name: 'getChainId',\n            call: 'eth_chainId',\n            params: 0,\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'requestAccounts',\n            call: 'eth_requestAccounts',\n            params: 0,\n            outputFormatter: utils.toChecksumAddress\n        }),\n        new Method({\n            name: 'getProof',\n            call: 'eth_getProof',\n            params: 3,\n            inputFormatter: [formatter.inputAddressFormatter, formatter.inputStorageKeysFormatter, formatter.inputDefaultBlockNumberFormatter],\n            outputFormatter: formatter.outputProofFormatter\n        }),\n        new Method({\n            name: 'getPendingTransactions',\n            call: 'eth_pendingTransactions',\n            params: 0,\n            outputFormatter: formatter.outputTransactionFormatter\n        }),\n\n        // subscriptions\n        new Subscriptions({\n            name: 'subscribe',\n            type: 'eth',\n            subscriptions: {\n                'newBlockHeaders': {\n                    // TODO rename on RPC side?\n                    subscriptionName: 'newHeads', // replace subscription with this name\n                    params: 0,\n                    outputFormatter: formatter.outputBlockFormatter\n                },\n                'pendingTransactions': {\n                    subscriptionName: 'newPendingTransactions', // replace subscription with this name\n                    params: 0\n                },\n                'logs': {\n                    params: 1,\n                    inputFormatter: [formatter.inputLogFormatter],\n                    outputFormatter: formatter.outputLogFormatter,\n                    // DUBLICATE, also in web3-eth-contract\n                    subscriptionHandler: function (output) {\n                        if(output.removed) {\n                            this.emit('changed', output);\n                        } else {\n                            this.emit('data', output);\n                        }\n\n                        if (_.isFunction(this.callback)) {\n                            this.callback(null, output, this);\n                        }\n                    }\n                },\n                'syncing': {\n                    params: 0,\n                    outputFormatter: formatter.outputSyncingFormatter,\n                    subscriptionHandler: function (output) {\n                        var _this = this;\n\n                        // fire TRUE at start\n                        if(this._isSyncing !== true) {\n                            this._isSyncing = true;\n                            this.emit('changed', _this._isSyncing);\n\n                            if (_.isFunction(this.callback)) {\n                                this.callback(null, _this._isSyncing, this);\n                            }\n\n                            setTimeout(function () {\n                                _this.emit('data', output);\n\n                                if (_.isFunction(_this.callback)) {\n                                    _this.callback(null, output, _this);\n                                }\n                            }, 0);\n\n                            // fire sync status\n                        } else {\n                            this.emit('data', output);\n                            if (_.isFunction(_this.callback)) {\n                                this.callback(null, output, this);\n                            }\n\n                            // wait for some time before fireing the FALSE\n                            clearTimeout(this._isSyncingTimeout);\n                            this._isSyncingTimeout = setTimeout(function () {\n                                if(output.currentBlock > output.highestBlock - 200) {\n                                    _this._isSyncing = false;\n                                    _this.emit('changed', _this._isSyncing);\n\n                                    if (_.isFunction(_this.callback)) {\n                                        _this.callback(null, _this._isSyncing, _this);\n                                    }\n                                }\n                            }, 500);\n                        }\n                    }\n                }\n            }\n        })\n    ];\n\n    methods.forEach(function(method) {\n        method.attachToObject(_this);\n        method.setRequestManager(_this._requestManager, _this.accounts); // second param is the eth.accounts module (necessary for signing transactions locally)\n        method.defaultBlock = _this.defaultBlock;\n        method.defaultAccount = _this.defaultAccount;\n        method.transactionBlockTimeout = _this.transactionBlockTimeout;\n        method.transactionConfirmationBlocks = _this.transactionConfirmationBlocks;\n        method.transactionPollingTimeout = _this.transactionPollingTimeout;\n        method.handleRevert = _this.handleRevert;\n    });\n\n};\n\n// Adds the static givenProvider and providers property to the Eth module\ncore.addProviders(Eth);\n\n\nmodule.exports = Eth;\n\n","module.exports = require(\"web3-core-subscriptions\");","module.exports = require(\"web3-eth-ens\");","module.exports = require(\"web3-eth-contract\");","module.exports = require(\"web3-eth-iban\");","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file accounts.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\n'use strict';\n\nvar _ = require('underscore');\nvar core = require('web3-core');\nvar Method = require('web3-core-method');\nvar Account = require('eth-lib/lib/account');\nvar Hash = require('eth-lib/lib/hash');\nvar RLP = require('eth-lib/lib/rlp');// jshint ignore:line\nvar Bytes = require('eth-lib/lib/bytes');// jshint ignore:line\nvar cryp = (typeof global === 'undefined') ? require('crypto-browserify') : require('crypto');\nvar scrypt = require('scrypt-js');\nvar uuid = require('uuid');\nvar utils = require('web3-utils');\nvar helpers = require('web3-core-helpers');\nvar Transaction = require('ethereumjs-tx').Transaction;\nvar Common = require('ethereumjs-common').default;\n\n\nvar isNot = function(value) {\n    return (_.isUndefined(value) || _.isNull(value));\n};\n\nvar Accounts = function Accounts() {\n    var _this = this;\n\n    // sets _requestmanager\n    core.packageInit(this, arguments);\n\n    // remove unecessary core functions\n    delete this.BatchRequest;\n    delete this.extend;\n\n    var _ethereumCall = [\n        new Method({\n            name: 'getNetworkId',\n            call: 'net_version',\n            params: 0,\n            outputFormatter: parseInt\n        }),\n        new Method({\n            name: 'getChainId',\n            call: 'eth_chainId',\n            params: 0,\n            outputFormatter: utils.hexToNumber\n        }),\n        new Method({\n            name: 'getGasPrice',\n            call: 'eth_gasPrice',\n            params: 0\n        }),\n        new Method({\n            name: 'getTransactionCount',\n            call: 'eth_getTransactionCount',\n            params: 2,\n            inputFormatter: [function(address) {\n                if (utils.isAddress(address)) {\n                    return address;\n                } else {\n                    throw new Error('Address ' + address + ' is not a valid address to get the \"transactionCount\".');\n                }\n            }, function() {\n                return 'latest';\n            }]\n        })\n    ];\n    // attach methods to this._ethereumCall\n    this._ethereumCall = {};\n    _.each(_ethereumCall, function(method) {\n        method.attachToObject(_this._ethereumCall);\n        method.setRequestManager(_this._requestManager);\n    });\n\n\n    this.wallet = new Wallet(this);\n};\n\nAccounts.prototype._addAccountFunctions = function(account) {\n    var _this = this;\n\n    // add sign functions\n    account.signTransaction = function signTransaction(tx, callback) {\n        return _this.signTransaction(tx, account.privateKey, callback);\n    };\n    account.sign = function sign(data) {\n        return _this.sign(data, account.privateKey);\n    };\n\n    account.encrypt = function encrypt(password, options) {\n        return _this.encrypt(account.privateKey, password, options);\n    };\n\n\n    return account;\n};\n\nAccounts.prototype.create = function create(entropy) {\n    return this._addAccountFunctions(Account.create(entropy || utils.randomHex(32)));\n};\n\nAccounts.prototype.privateKeyToAccount = function privateKeyToAccount(privateKey, ignoreLength) {\n    if (!privateKey.startsWith('0x')) {\n        privateKey = '0x' + privateKey;\n    }\n\n    // 64 hex characters + hex-prefix\n    if (!ignoreLength && privateKey.length !== 66) {\n        throw new Error(\"Private key must be 32 bytes long\");\n    }\n\n    return this._addAccountFunctions(Account.fromPrivate(privateKey));\n};\n\nAccounts.prototype.signTransaction = function signTransaction(tx, privateKey, callback) {\n    var _this = this,\n        error = false,\n        transactionOptions = {},\n        hasTxSigningOptions = !!(tx && ((tx.chain && tx.hardfork) || tx.common));\n\n    callback = callback || function() {\n    };\n\n    if (!tx) {\n        error = new Error('No transaction object given!');\n\n        callback(error);\n        return Promise.reject(error);\n    }\n\n    function signed(tx) {\n        if (tx.common && (tx.chain && tx.hardfork)) {\n            error = new Error(\n                'Please provide the ethereumjs-common object or the chain and hardfork property but not all together.'\n            );\n        }\n\n        if ((tx.chain && !tx.hardfork) || (tx.hardfork && !tx.chain)) {\n            error = new Error(\n                'When specifying chain and hardfork, both values must be defined. ' +\n                'Received \"chain\": ' + tx.chain + ', \"hardfork\": ' + tx.hardfork\n            );\n        }\n\n        if (!tx.gas && !tx.gasLimit) {\n            error = new Error('\"gas\" is missing');\n        }\n\n        if (tx.nonce < 0 ||\n            tx.gas < 0 ||\n            tx.gasPrice < 0 ||\n            tx.chainId < 0) {\n            error = new Error('Gas, gasPrice, nonce or chainId is lower than 0');\n        }\n\n        if (error) {\n            callback(error);\n            return Promise.reject(error);\n        }\n\n        try {\n            var transaction = helpers.formatters.inputCallFormatter(_.clone(tx));\n            transaction.to = transaction.to || '0x';\n            transaction.data = transaction.data || '0x';\n            transaction.value = transaction.value || '0x';\n            transaction.chainId = utils.numberToHex(transaction.chainId);\n\n            // Because tx has no ethereumjs-tx signing options we use fetched vals.\n            if (!hasTxSigningOptions) {\n                transactionOptions.common = Common.forCustomChain(\n                    'mainnet',\n                    {\n                        name: 'custom-network',\n                        networkId: transaction.networkId,\n                        chainId: transaction.chainId\n                    },\n                    'petersburg'\n                );\n\n                delete transaction.networkId;\n            } else {\n                if (transaction.common) {\n                    transactionOptions.common = Common.forCustomChain(\n                        transaction.common.baseChain || 'mainnet',\n                        {\n                            name: transaction.common.customChain.name || 'custom-network',\n                            networkId: transaction.common.customChain.networkId,\n                            chainId: transaction.common.customChain.chainId\n                        },\n                        transaction.common.hardfork || 'petersburg'\n                    );\n\n                    delete transaction.common;\n                }\n\n                if (transaction.chain) {\n                    transactionOptions.chain = transaction.chain;\n                    delete transaction.chain;\n                }\n\n                if (transaction.hardfork) {\n                    transactionOptions.hardfork = transaction.hardfork;\n                    delete transaction.hardfork;\n                }\n            }\n\n            if (privateKey.startsWith('0x')) {\n                privateKey = privateKey.substring(2);\n            }\n\n            var ethTx = new Transaction(transaction, transactionOptions);\n\n            ethTx.sign(Buffer.from(privateKey, 'hex'));\n\n            var validationResult = ethTx.validate(true);\n\n            if (validationResult !== '') {\n                throw new Error('Signer Error: ' + validationResult);\n            }\n\n            var rlpEncoded = ethTx.serialize().toString('hex');\n            var rawTransaction = '0x' + rlpEncoded;\n            var transactionHash = utils.keccak256(rawTransaction);\n\n            var result = {\n                messageHash: '0x' + Buffer.from(ethTx.hash(false)).toString('hex'),\n                v: '0x' + Buffer.from(ethTx.v).toString('hex'),\n                r: '0x' + Buffer.from(ethTx.r).toString('hex'),\n                s: '0x' + Buffer.from(ethTx.s).toString('hex'),\n                rawTransaction: rawTransaction,\n                transactionHash: transactionHash\n            };\n\n            callback(null, result);\n            return result;\n\n        } catch (e) {\n            callback(e);\n            return Promise.reject(e);\n        }\n    }\n\n\n    // Resolve immediately if nonce, chainId, price and signing options are provided\n    if (tx.nonce !== undefined && tx.chainId !== undefined && tx.gasPrice !== undefined && hasTxSigningOptions) {\n        return Promise.resolve(signed(tx));\n    }\n\n    // Otherwise, get the missing info from the Ethereum Node\n    return Promise.all([\n        isNot(tx.chainId) ? _this._ethereumCall.getChainId() : tx.chainId,\n        isNot(tx.gasPrice) ? _this._ethereumCall.getGasPrice() : tx.gasPrice,\n        isNot(tx.nonce) ? _this._ethereumCall.getTransactionCount(_this.privateKeyToAccount(privateKey).address) : tx.nonce,\n        isNot(hasTxSigningOptions) ? _this._ethereumCall.getNetworkId() : 1\n    ]).then(function(args) {\n        if (isNot(args[0]) || isNot(args[1]) || isNot(args[2]) || isNot(args[3])) {\n            throw new Error('One of the values \"chainId\", \"networkId\", \"gasPrice\", or \"nonce\" couldn\\'t be fetched: ' + JSON.stringify(args));\n        }\n        return signed(_.extend(tx, {chainId: args[0], gasPrice: args[1], nonce: args[2], networkId: args[3]}));\n    });\n};\n\n/* jshint ignore:start */\nAccounts.prototype.recoverTransaction = function recoverTransaction(rawTx) {\n    var values = RLP.decode(rawTx);\n    var signature = Account.encodeSignature(values.slice(6, 9));\n    var recovery = Bytes.toNumber(values[6]);\n    var extraData = recovery < 35 ? [] : [Bytes.fromNumber((recovery - 35) >> 1), '0x', '0x'];\n    var signingData = values.slice(0, 6).concat(extraData);\n    var signingDataHex = RLP.encode(signingData);\n    return Account.recover(Hash.keccak256(signingDataHex), signature);\n};\n/* jshint ignore:end */\n\nAccounts.prototype.hashMessage = function hashMessage(data) {\n    var messageHex = utils.isHexStrict(data) ? data : utils.utf8ToHex(data);\n    var messageBytes = utils.hexToBytes(messageHex)\n    var messageBuffer = Buffer.from(messageBytes);\n    var preamble = '\\x19Ethereum Signed Message:\\n' + messageBytes.length;\n    var preambleBuffer = Buffer.from(preamble);\n    var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n    return Hash.keccak256s(ethMessage);\n};\n\nAccounts.prototype.sign = function sign(data, privateKey) {\n    if (!privateKey.startsWith('0x')) {\n        privateKey = '0x' + privateKey;\n    }\n\n    // 64 hex characters + hex-prefix\n    if (privateKey.length !== 66) {\n        throw new Error(\"Private key must be 32 bytes long\");\n    }\n\n    var hash = this.hashMessage(data);\n    var signature = Account.sign(hash, privateKey);\n    var vrs = Account.decodeSignature(signature);\n    return {\n        message: data,\n        messageHash: hash,\n        v: vrs[0],\n        r: vrs[1],\n        s: vrs[2],\n        signature: signature\n    };\n};\n\nAccounts.prototype.recover = function recover(message, signature, preFixed) {\n    var args = [].slice.apply(arguments);\n\n\n    if (_.isObject(message)) {\n        return this.recover(message.messageHash, Account.encodeSignature([message.v, message.r, message.s]), true);\n    }\n\n    if (!preFixed) {\n        message = this.hashMessage(message);\n    }\n\n    if (args.length >= 4) {\n        preFixed = args.slice(-1)[0];\n        preFixed = _.isBoolean(preFixed) ? !!preFixed : false;\n\n        return this.recover(message, Account.encodeSignature(args.slice(1, 4)), preFixed); // v, r, s\n    }\n    return Account.recover(message, signature);\n};\n\n// Taken from https://github.com/ethereumjs/ethereumjs-wallet\nAccounts.prototype.decrypt = function(v3Keystore, password, nonStrict) {\n    /* jshint maxcomplexity: 10 */\n\n    if (!_.isString(password)) {\n        throw new Error('No password given.');\n    }\n\n    var json = (_.isObject(v3Keystore)) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n\n    if (json.version !== 3) {\n        throw new Error('Not a valid V3 wallet');\n    }\n\n    var derivedKey;\n    var kdfparams;\n    if (json.crypto.kdf === 'scrypt') {\n        kdfparams = json.crypto.kdfparams;\n\n        // FIXME: support progress reporting callback\n        derivedKey = scrypt.syncScrypt(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n    } else if (json.crypto.kdf === 'pbkdf2') {\n        kdfparams = json.crypto.kdfparams;\n\n        if (kdfparams.prf !== 'hmac-sha256') {\n            throw new Error('Unsupported parameters to PBKDF2');\n        }\n\n        derivedKey = cryp.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n    } else {\n        throw new Error('Unsupported key derivation scheme');\n    }\n\n    var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n\n    var mac = utils.sha3(Buffer.from([...derivedKey.slice(16, 32), ...ciphertext])).replace('0x', '');\n    if (mac !== json.crypto.mac) {\n        throw new Error('Key derivation failed - possibly wrong password');\n    }\n\n    var decipher = cryp.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n    var seed = '0x' + Buffer.from([...decipher.update(ciphertext), ...decipher.final()]).toString('hex');\n\n    return this.privateKeyToAccount(seed, true);\n};\n\nAccounts.prototype.encrypt = function(privateKey, password, options) {\n    /* jshint maxcomplexity: 20 */\n    var account = this.privateKeyToAccount(privateKey, true);\n\n    options = options || {};\n    var salt = options.salt || cryp.randomBytes(32);\n    var iv = options.iv || cryp.randomBytes(16);\n\n    var derivedKey;\n    var kdf = options.kdf || 'scrypt';\n    var kdfparams = {\n        dklen: options.dklen || 32,\n        salt: salt.toString('hex')\n    };\n\n    if (kdf === 'pbkdf2') {\n        kdfparams.c = options.c || 262144;\n        kdfparams.prf = 'hmac-sha256';\n        derivedKey = cryp.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n    } else if (kdf === 'scrypt') {\n        // FIXME: support progress reporting callback\n        kdfparams.n = options.n || 8192; // 2048 4096 8192 16384\n        kdfparams.r = options.r || 8;\n        kdfparams.p = options.p || 1;\n        derivedKey = scrypt.syncScrypt(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n    } else {\n        throw new Error('Unsupported kdf');\n    }\n\n    var cipher = cryp.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n    if (!cipher) {\n        throw new Error('Unsupported cipher');\n    }\n\n\n    var ciphertext = Buffer.from([\n        ...cipher.update(Buffer.from(account.privateKey.replace('0x', ''), 'hex')),\n        ...cipher.final()]\n    );\n\n    var mac = utils.sha3(Buffer.from([...derivedKey.slice(16, 32), ...ciphertext])).replace('0x', '');\n\n    return {\n        version: 3,\n        id: uuid.v4({random: options.uuid || cryp.randomBytes(16)}),\n        address: account.address.toLowerCase().replace('0x', ''),\n        crypto: {\n            ciphertext: ciphertext.toString('hex'),\n            cipherparams: {\n                iv: iv.toString('hex')\n            },\n            cipher: options.cipher || 'aes-128-ctr',\n            kdf: kdf,\n            kdfparams: kdfparams,\n            mac: mac.toString('hex')\n        }\n    };\n};\n\n\n// Note: this is trying to follow closely the specs on\n// http://web3js.readthedocs.io/en/1.0/web3-eth-accounts.html\n\nfunction Wallet(accounts) {\n    this._accounts = accounts;\n    this.length = 0;\n    this.defaultKeyName = 'web3js_wallet';\n}\n\nWallet.prototype._findSafeIndex = function(pointer) {\n    pointer = pointer || 0;\n    if (_.has(this, pointer)) {\n        return this._findSafeIndex(pointer + 1);\n    } else {\n        return pointer;\n    }\n};\n\nWallet.prototype._currentIndexes = function() {\n    var keys = Object.keys(this);\n    var indexes = keys\n        .map(function(key) {\n            return parseInt(key);\n        })\n        .filter(function(n) {\n            return (n < 9e20);\n        });\n\n    return indexes;\n};\n\nWallet.prototype.create = function(numberOfAccounts, entropy) {\n    for (var i = 0; i < numberOfAccounts; ++i) {\n        this.add(this._accounts.create(entropy).privateKey);\n    }\n    return this;\n};\n\nWallet.prototype.add = function(account) {\n\n    if (_.isString(account)) {\n        account = this._accounts.privateKeyToAccount(account);\n    }\n    if (!this[account.address]) {\n        account = this._accounts.privateKeyToAccount(account.privateKey);\n        account.index = this._findSafeIndex();\n\n        this[account.index] = account;\n        this[account.address] = account;\n        this[account.address.toLowerCase()] = account;\n\n        this.length++;\n\n        return account;\n    } else {\n        return this[account.address];\n    }\n};\n\nWallet.prototype.remove = function(addressOrIndex) {\n    var account = this[addressOrIndex];\n\n    if (account && account.address) {\n        // address\n        this[account.address].privateKey = null;\n        delete this[account.address];\n        // address lowercase\n        this[account.address.toLowerCase()].privateKey = null;\n        delete this[account.address.toLowerCase()];\n        // index\n        this[account.index].privateKey = null;\n        delete this[account.index];\n\n        this.length--;\n\n        return true;\n    } else {\n        return false;\n    }\n};\n\nWallet.prototype.clear = function() {\n    var _this = this;\n    var indexes = this._currentIndexes();\n\n    indexes.forEach(function(index) {\n        _this.remove(index);\n    });\n\n    return this;\n};\n\nWallet.prototype.encrypt = function(password, options) {\n    var _this = this;\n    var indexes = this._currentIndexes();\n\n    var accounts = indexes.map(function(index) {\n        return _this[index].encrypt(password, options);\n    });\n\n    return accounts;\n};\n\n\nWallet.prototype.decrypt = function(encryptedWallet, password) {\n    var _this = this;\n\n    encryptedWallet.forEach(function(keystore) {\n        var account = _this._accounts.decrypt(keystore, password);\n\n        if (account) {\n            _this.add(account);\n        } else {\n            throw new Error('Couldn\\'t decrypt accounts. Password wrong?');\n        }\n    });\n\n    return this;\n};\n\nWallet.prototype.save = function(password, keyName) {\n    localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n\n    return true;\n};\n\nWallet.prototype.load = function(password, keyName) {\n    var keystore = localStorage.getItem(keyName || this.defaultKeyName);\n\n    if (keystore) {\n        try {\n            keystore = JSON.parse(keystore);\n        } catch (e) {\n\n        }\n    }\n\n    return this.decrypt(keystore || [], password);\n};\n\nif (!storageAvailable('localStorage')) {\n    delete Wallet.prototype.save;\n    delete Wallet.prototype.load;\n}\n\n/**\n * Checks whether a storage type is available or not\n * For more info on how this works, please refer to MDN documentation\n * https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Feature-detecting_localStorage\n *\n * @method storageAvailable\n * @param {String} type the type of storage ('localStorage', 'sessionStorage')\n * @returns {Boolean} a boolean indicating whether the specified storage is available or not\n */\nfunction storageAvailable(type) {\n    var storage;\n    try {\n        storage = window[type];\n        var x = '__storage_test__';\n        storage.setItem(x, x);\n        storage.removeItem(x);\n        return true;\n    } catch (e) {\n        return e && (\n                // everything except Firefox\n            e.code === 22 ||\n            // Firefox\n            e.code === 1014 ||\n            // test name field too, because code might not be present\n            // everything except Firefox\n            e.name === 'QuotaExceededError' ||\n            // Firefox\n            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n            // acknowledge QuotaExceededError only if there's something already stored\n            (storage && storage.length !== 0);\n    }\n}\n\n\nmodule.exports = Accounts;\n","module.exports = require(\"eth-lib/lib/account\");","module.exports = require(\"eth-lib/lib/hash\");","module.exports = require(\"eth-lib/lib/rlp\");","module.exports = require(\"eth-lib/lib/bytes\");","module.exports = require(\"crypto-browserify\");","module.exports = require(\"scrypt-js\");","module.exports = require(\"uuid\");","module.exports = require(\"web3-eth-abi\");","/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @file getNetworkType.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\n\"use strict\";\n\nvar _ = require('underscore');\n\nvar getNetworkType = function (callback) {\n    var _this = this,\n        id;\n\n\n    return this.net.getId()\n        .then(function (givenId) {\n\n            id = givenId;\n\n            return _this.getBlock(0);\n        })\n        .then(function (genesis) {\n            var returnValue = 'private';\n\n            if (genesis.hash === '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3' &&\n                id === 1) {\n                returnValue = 'main';\n            }\n            if (genesis.hash === '0cd786a2425d16f152c658316c423e6ce1181e15c3295826d7c9904cba9ce303' &&\n                id === 2) {\n                returnValue = 'morden';\n            }\n            if (genesis.hash === '0x41941023680923e0fe4d74a34bdac8141f2540e3ae90623718e47d66d1ca4a2d' &&\n                id === 3) {\n                returnValue = 'ropsten';\n            }\n            if (genesis.hash === '0x6341fd3daf94b748c72ced5a5b26028f2474f5f00d824504e4fa37a75767e177' &&\n                id === 4) {\n                returnValue = 'rinkeby';\n            }\n            if (genesis.hash === '0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a' &&\n                id === 5) {\n                returnValue = 'goerli';\n            }\n            if (genesis.hash === '0xa3c565fc15c7478862d50ccd6561e3c06b24cc509bf388941c25ea985ce32cb9' &&\n                id === 42) {\n                returnValue = 'kovan';\n            }\n\n            if (_.isFunction(callback)) {\n                callback(null, returnValue);\n            }\n\n            return returnValue;\n        })\n        .catch(function (err) {\n            if (_.isFunction(callback)) {\n                callback(err);\n            } else {\n                throw err;\n            }\n        });\n};\n\nmodule.exports = getNetworkType;\n","module.exports = require(\"web3-shh\");","module.exports = require(\"web3-bzz\");","module.exports = require(\"lru-cache\");","module.exports = require(\"eth-sig-util\");","module.exports = require(\"rlp\");","module.exports = {\n  // Mimics crypto.random bytes, but takes in a random number generator\n  // as its second parameter. rng is expected to be a function that takes\n  // no parameters and returns a result like Math.random().\n  // This is important because it allows for a seeded random number generator.\n  // Since this is a mock RPC library, the rng doesn't need to be cryptographically secure.\n  randomBytes: function(length, rng) {\n    var buf = [];\n\n    for (var i = 0; i < length; i++) {\n      buf.push(rng() * 255);\n    }\n\n    return Buffer.from(buf);\n  },\n\n  randomAlphaNumericString: function(length, rng) {\n    const alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    let text = \"\";\n\n    for (var i = 0; i < length; i++) {\n      text += alphabet.charAt(Math.floor((rng || Math.random)() * alphabet.length));\n    }\n\n    return text;\n  }\n};\n","// this replaces `eth-block-tracker` in the provider-engine, as that block tracker is meant to work with\n// an external provider instance\n\nconst EventEmitter = require(\"events\");\nvar blockHelper = require(\"./utils/block_helper\");\n\nfunction GanacheBlockTracker(opts) {\n  opts = opts || {};\n  EventEmitter.apply(this);\n  if (!opts.blockchain) {\n    throw new Error(\"RpcBlockTracker - no blockchain specified.\");\n  }\n  if (!opts.blockchain.on) {\n    throw new Error(\"RpcBlockTracker - blockchain is not an EventEmitter.\");\n  }\n  this._blockchain = opts.blockchain;\n  this.start = this.start.bind(this);\n  this.stop = this.stop.bind(this);\n  this.getTrackingBlock = this.getTrackingBlock.bind(this);\n  this.awaitCurrentBlock = this.awaitCurrentBlock.bind(this);\n  this._setCurrentBlock = this._setCurrentBlock.bind(this);\n}\n\nGanacheBlockTracker.prototype = Object.create(EventEmitter.prototype);\nGanacheBlockTracker.prototype.constructor = GanacheBlockTracker;\n\nGanacheBlockTracker.prototype.getTrackingBlock = function() {\n  return this._currentBlock;\n};\n\nGanacheBlockTracker.prototype.getCurrentBlock = function() {\n  return this._currentBlock;\n};\n\nGanacheBlockTracker.prototype.awaitCurrentBlock = function() {\n  const self = this;\n  // return if available\n  if (this._currentBlock) {\n    return this._currentBlock;\n  }\n  // wait for \"sync\" event\n  return new Promise((resolve) => this.once(\"block\", resolve)).then(() => self._currentBlock);\n};\n\nGanacheBlockTracker.prototype.start = function(opts = {}) {\n  this._blockchain.on(\"block\", this._setCurrentBlock);\n  return Promise.resolve();\n};\n\nGanacheBlockTracker.prototype.stop = function() {\n  this._isRunning = false;\n  this._blockchain.removeListener(\"block\", this._setCurrentBlock);\n};\n\n//\n// private\n//\n\nGanacheBlockTracker.prototype._setCurrentBlock = function(newBlock) {\n  const block = blockHelper.toJSON(newBlock, true);\n  if (this._currentBlock && this._currentBlock.hash === block.hash) {\n    return;\n  }\n  const oldBlock = this._currentBlock;\n  this._currentBlock = block;\n  this.emit(\"latest\", block);\n  this.emit(\"sync\", { block, oldBlock });\n  this.emit(\"block\", block);\n};\n\nmodule.exports = GanacheBlockTracker;\n","// make sourcemaps work!\nrequire(\"source-map-support/register\");\n\nvar Provider = require(\"./provider\");\nvar webSocketServer = require(\"./webSocketServer\");\nvar httpServer = require(\"./httpServer\");\nvar _ = require(\"lodash\");\n\nmodule.exports = {\n  create: function(options) {\n    options = _applyDefaultOptions(options || {});\n\n    var logger = options.logger;\n    var provider = new Provider(options);\n\n    var server = httpServer(provider, logger);\n    server.keepAliveTimeout = options.keepAliveTimeout;\n\n    let connectionCounter = 0;\n    const connections = {};\n    server.on(\"connection\", (conn) => {\n      const key = connectionCounter++;\n      connections[key] = conn;\n      conn.on(\"close\", () => delete connections[key]);\n    });\n\n    var oldListen = server.listen;\n\n    server.listen = function() {\n      var args = Array.prototype.slice.call(arguments);\n      var callback = function() {};\n      if (args.length > 0) {\n        var last = args[args.length - 1];\n        if (typeof last === \"function\") {\n          callback = args.pop();\n        }\n      }\n\n      var intermediary = function(err) {\n        if (err) {\n          return callback(err);\n        }\n        server.provider.manager.waitForInitialization(callback);\n      };\n\n      args.push(intermediary);\n\n      oldListen.apply(server, args);\n    };\n\n    server.provider = provider;\n\n    if (options.ws) {\n      webSocketServer(server, provider, logger);\n    }\n\n    var oldClose = server.close;\n\n    server.close = function(callback) {\n      var args = Array.prototype.slice.call(arguments);\n      oldClose.apply(server, args);\n\n      server.provider.close(function(err) {\n        if (err) {\n          return callback(err);\n        }\n        Object.keys(connections).forEach((key) => {\n          try {\n            connections[key].destroy();\n          } catch (error) {}\n        });\n      });\n    };\n\n    return server;\n  }\n};\n\nconst defaultOptions = {\n  logger: {\n    log: function() {}\n  },\n  ws: true,\n  keepAliveTimeout: 5000\n};\n\nvar _applyDefaultOptions = function(options) {\n  return _.merge({}, defaultOptions, options);\n};\n","var websocket = require(\"websocket\");\nvar WebSocketServer = websocket.server;\n\nmodule.exports = function(httpServer, provider, logger) {\n  var connectionManager = new ConnectionManager(provider, logger);\n\n  var wsServer = new WebSocketServer({\n    httpServer: httpServer,\n    autoAcceptConnections: true\n  });\n\n  wsServer.on(\"connect\", connectionManager.manageConnection);\n\n  return wsServer;\n};\n\nfunction ConnectionManager(provider, logger) {\n  const self = this;\n  self.provider = provider;\n  self.logger = logger;\n  self.connectionsBySubscriptionId = {};\n  self.connections = {};\n  self.connectionCounter = 0;\n\n  self._updateSubscriptions = self._updateSubscriptions.bind(self);\n  self.manageConnection = self.manageConnection.bind(self);\n  self._logPayload = self._logPayload.bind(self);\n  self._handleRequest = self._handleRequest.bind(self);\n\n  provider.on(\"data\", function(err, notification) {\n    if (err) {\n      return;\n    }\n    self._updateSubscriptions(notification);\n  });\n}\n\nConnectionManager.prototype.manageConnection = function(connection) {\n  const self = this;\n  connection.id = ++self.connectionCounter;\n  self.connections[connection.id] = {\n    connection: connection,\n    subscriptions: {}\n  };\n\n  connection.on(\"message\", function(message) {\n    let payload;\n    try {\n      if (message.type === \"utf8\") {\n        payload = JSON.parse(message.utf8Data);\n      } else if (message.type === \"binary\") {\n        payload = JSON.parse(message.binaryData.toString(\"utf8\").trim());\n      } else {\n        throw new Error(\"Invalid message type\");\n      }\n    } catch (e) {\n      connection.close(websocket.connection.CLOSE_REASON_UNPROCESSABLE_INPUT, e.message);\n      return;\n    }\n\n    self._logPayload(payload);\n    self._handleRequest(connection, payload);\n  });\n\n  connection.on(\"close\", function() {\n    // remove subscriptions\n    Object.keys(self.connections[connection.id].subscriptions).forEach((subscriptionId) => {\n      self.provider.send(\n        {\n          jsonrpc: \"2.0\",\n          method: \"eth_unsubscribe\",\n          params: [subscriptionId],\n          id: new Date().getTime()\n        },\n        function(err, result) {\n          if (err) {\n            return;\n          }\n          delete self.connectionsBySubscriptionId[subscriptionId];\n        }\n      );\n    });\n\n    delete self.connections[connection.id];\n  });\n};\n\nConnectionManager.prototype._handleRequest = function(connection, payload) {\n  const self = this;\n\n  // handle subscription requests, otherwise delegate to provider\n  switch (payload.method) {\n    case \"eth_subscribe\":\n      self.provider.send(payload, function(err, result) {\n        if (!err && result.result && self.connections[connection.id]) {\n          self.connections[connection.id].subscriptions[result.result] = true;\n          self.connectionsBySubscriptionId[result.result] = self.connections[connection.id];\n        }\n        connection.send(JSON.stringify(result));\n      });\n      break;\n    case \"eth_unsubscribe\":\n      self.provider.send(payload, function(err, result) {\n        if (err || result.error) {\n          if (connection && connection.send) {\n            connection.send(JSON.stringify(result));\n          }\n          return;\n        }\n\n        if (self.connections[connection.id]) {\n          delete self.connections[connection.id].subscriptions[payload.params[0]];\n        }\n        delete self.connectionsBySubscriptionId[payload.params[0]];\n\n        connection.send(JSON.stringify(result));\n      });\n      break;\n    default:\n      self.provider.send(payload, function(_, result) {\n        connection.send(JSON.stringify(result));\n      });\n  }\n};\n\n// Log messages that come into the TestRPC via http\nConnectionManager.prototype._logPayload = function(payload) {\n  const self = this;\n  if (payload instanceof Array) {\n    // Batch request\n    for (var i = 0; i < payload.length; i++) {\n      var item = payload[i];\n      self.logger.log(item.method);\n    }\n  } else {\n    self.logger.log(payload.method);\n  }\n};\n\nConnectionManager.prototype._updateSubscriptions = function(notification) {\n  const subscription = this.connectionsBySubscriptionId[notification.params.subscription];\n  // Safety check for subscription/connection.\n  if (subscription) {\n    subscription.connection.send(JSON.stringify(notification));\n  }\n};\n","module.exports = require(\"websocket\");","const http = require(\"http\");\nconst { rpcError } = require(\"./utils/to\");\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction createCORSResponseHeaders(method, requestHeaders) {\n  // https://fetch.spec.whatwg.org/#http-requests\n  const headers = {};\n  const isCORSRequest = hasOwnProperty.call(requestHeaders, \"origin\");\n  if (isCORSRequest) {\n    // OPTIONS preflight requests need a little extra treatment\n    if (method === \"OPTIONS\") {\n      // we only allow POST requests, so it doesn't matter which method the request is asking for\n      headers[\"Access-Control-Allow-Methods\"] = \"POST\";\n      // echo all requested access-control-request-headers back to the response\n      if (hasOwnProperty.call(requestHeaders, \"access-control-request-headers\")) {\n        headers[\"Access-Control-Allow-Headers\"] = requestHeaders[\"access-control-request-headers\"];\n      }\n      // Safari needs Content-Length = 0 for a 204 response otherwise it hangs forever\n      // https://github.com/expressjs/cors/pull/121#issue-130260174\n      headers[\"Content-Length\"] = 0;\n\n      // Make browsers and compliant clients cache the OPTIONS preflight response for 10\n      // minutes (this is the maximum time Chromium allows)\n      headers[\"Access-Control-Max-Age\"] = 600; // seconds\n    }\n\n    // From the spec: https://fetch.spec.whatwg.org/#http-responses\n    // \"For a CORS-preflight request, request’s credentials mode is always \"omit\",\n    // but for any subsequent CORS requests it might not be. Support therefore\n    // needs to be indicated as part of the HTTP response to the CORS-preflight request as well.\", so this\n    // header is added to all requests.\n    // Additionally, https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Credentials,\n    // states that there aren't any HTTP Request headers that indicate you whether or not Request.withCredentials\n    // is set. Because web3@1.0.0-beta.35-? always sets `request.withCredentials = true` while Safari requires it be\n    // returned even when no credentials are set in the browser this header must always be return on all requests.\n    // (I've found that Chrome and Firefox don't actually require the header when credentials aren't set)\n    //  Regression Commit: https://github.com/ethereum/web3.js/pull/1722\n    //  Open Web3 Issue: https://github.com/ethereum/web3.js/issues/1802\n    headers[\"Access-Control-Allow-Credentials\"] = true;\n\n    // From the spec: \"It cannot be reliably identified as participating in the CORS protocol\n    // as the `Origin` header is also included for all requests whose method is neither\n    // `GET` nor `HEAD`.\"\n    // Explicitly set the origin instead of using *, since credentials\n    // can't be used in conjunction with *. This will always be set\n    /// for valid preflight requests.\n    headers[\"Access-Control-Allow-Origin\"] = requestHeaders.origin;\n  }\n  return headers;\n}\n\nfunction sendResponse(response, statusCode, headers, data) {\n  response.writeHead(statusCode, headers);\n  response.end(data);\n}\n\nmodule.exports = function(provider, logger) {\n  var server = http.createServer(function(request, response) {\n    var method = request.method;\n    var body = [];\n\n    request\n      .on(\"data\", function(chunk) {\n        body.push(chunk);\n      })\n      .on(\"end\", function() {\n        body = Buffer.concat(body).toString();\n        // At this point, we have the headers, method, url and body, and can now\n        // do whatever we need to in order to respond to this request.\n\n        const headers = createCORSResponseHeaders(method, request.headers);\n\n        switch (method) {\n          case \"POST\":\n            var payload;\n            try {\n              payload = JSON.parse(body);\n            } catch (e) {\n              headers[\"Content-Type\"] = \"text/plain\";\n              sendResponse(response, 400, headers, \"400 Bad Request\");\n              return;\n            }\n\n            // Log messages that come into the TestRPC via http\n            if (payload instanceof Array) {\n              // Batch request\n              for (var i = 0; i < payload.length; i++) {\n                var item = payload[i];\n                logger.log(item.method);\n              }\n            } else {\n              logger.log(payload.method);\n            }\n\n            // http connections do not support subscriptions\n            if (payload.method === \"eth_subscribe\" || payload.method === \"eth_unsubscribe\") {\n              headers[\"Content-Type\"] = \"application/json\";\n              sendResponse(response, 400, headers, rpcError(payload.id, -32000, \"notifications not supported\"));\n              break;\n            }\n\n            provider.send(payload, function(_, result) {\n              headers[\"Content-Type\"] = \"application/json\";\n              sendResponse(response, 200, headers, JSON.stringify(result));\n            });\n\n            break;\n          case \"OPTIONS\":\n            sendResponse(response, 204, headers);\n            break;\n          default:\n            headers[\"Content-Type\"] = \"text/plain\";\n            sendResponse(response, 400, headers, \"400 Bad Request\");\n            break;\n        }\n      });\n  });\n\n  server.ganacheProvider = provider;\n  return server;\n};\n","module.exports = require(\"http\");"],"sourceRoot":""}